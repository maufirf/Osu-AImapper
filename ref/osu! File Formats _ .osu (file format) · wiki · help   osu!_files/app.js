!function(t){var e={};function n(i){if(e[i])return e[i].exports;var s=e[i]={i:i,l:!1,exports:{}};return t[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=t,n.c=e,n.d=function(t,e,i){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:i})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)n.d(i,s,function(e){return t[e]}.bind(null,s));return i},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="/",n(n.s=0)}({"+3o9":function(t,e){(function(){this.InputHandler=function(){function t(){}return t.CANCEL="cancel",t.SUBMIT="submit",t.KEY_ENTER=13,t.KEY_ESC=27,t.textarea=function(e){return function(n){var i;return n.keyCode===t.KEY_ESC?i=t.CANCEL:n.keyCode===t.KEY_ENTER&&!n.shiftKey&&osu.isDesktop()&&(n.preventDefault(),i=t.SUBMIT),"function"==typeof e?e(i,n):void 0}},t}()}).call(window)},"+FrL":function(t,e){(function(){var t,e;e=ReactDOMFactories.div,t="value-display",this.ValueDisplay=function(n){var i,s,o,r;return s=n.label,r=n.value,i=n.description,o=n.modifiers,e({className:osu.classWithModifiers(t,o)},e({className:t+"__label"},s),e({className:t+"__value"},r),null!=i?e({className:t+"__description"},i):void 0)}}).call(window)},"+U5f":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.UserVerification=function(){function e(){this.showOnLoad=t(this.showOnLoad,this),this.showOnError=t(this.showOnError,this),this.show=t(this.show,this),this.success=t(this.success,this),this.setModal=t(this.setModal,this),this.setMessage=t(this.setMessage,this),this.reposition=t(this.reposition,this),this.reissue=t(this.reissue,this),this.prepareForRequest=t(this.prepareForRequest,this),this.float=t(this.float,this),this.error=t(this.error,this),this.autoSubmit=t(this.autoSubmit,this),this.$modal=t(this.$modal,this),addEventListener("turbolinks:load",this.setModal),$(document).on("ajax:error",this.showOnError),$(document).on("turbolinks:load",this.showOnLoad),$(document).on("input",".js-user-verification--input",this.autoSubmit),$(document).on("click",".js-user-verification--reissue",this.reissue),$(window).on("throttled-resize throttled-scroll",this.reposition),this.clickAfterVerification=null,this.inputBox=document.getElementsByClassName("js-user-verification--input"),this.message=document.getElementsByClassName("js-user-verification--message"),this.messageSpinner=document.getElementsByClassName("js-user-verification--message-spinner"),this.messageText=document.getElementsByClassName("js-user-verification--message-text"),this.reference=document.getElementsByClassName("js-user-verification--reference")}return e.prototype.$modal=function(){return $(".js-user-verification")},e.prototype.autoSubmit=function(t){var e,n,i,s;if(e=(s=this.inputBox[0]).value.replace(/\s/g,""),i=s.dataset.lastKey,n=parseInt(s.dataset.verificationKeyLength,10),0===e.length&&this.setMessage(),n===e.length&&e!==i)return s.dataset.lastKey=e,this.prepareForRequest("verifying"),this.request=$.post(laroute.route("account.verify"),{verification_key:e}).done(this.success).fail(this.error)},e.prototype.error=function(t){return this.setMessage(osu.xhrErrorMessage(t))},e.prototype.float=function(t,e,n){return null==e&&(e=this.modal),t?(e.classList.add("js-user-verification--center"),e.style.paddingTop=null):(e.classList.remove("js-user-verification--center"),e.style.paddingTop=n+"px")},e.prototype.prepareForRequest=function(t){var e;return null!=(e=this.request)&&e.abort(),this.setMessage(osu.trans("user_verification.box."+t),!0)},e.prototype.reissue=function(t){return t.preventDefault(),this.prepareForRequest("issuing"),this.request=$.post(laroute.route("account.reissue-code")).done((e=this,function(t){return e.setMessage(t.message)})).fail(this.error);var e},e.prototype.reposition=function(){var t,e,n;if(null!=(t=this.modal)?t.classList.contains("js-user-verification--active"):void 0)return osu.isMobile()?this.float(!0,this.modal):(n=null!=(e=this.reference[0])?e.getBoundingClientRect().bottom:void 0,this.float(n<0,this.modal,n))},e.prototype.setMessage=function(t,e){if(null==e&&(e=!1),null!=t&&0!==t.length)return this.messageText[0].textContent=t,Fade.toggle(this.messageSpinner[0],e),Fade.in(this.message[0]);Fade.out(this.message[0])},e.prototype.setModal=function(){return this.modal=document.querySelector(".js-user-verification")},e.prototype.success=function(){var t;return this.$modal().modal("hide"),this.modal.classList.remove("js-user-verification--active"),t=this.clickAfterVerification,this.clickAfterVerification=null,this.setMessage(),this.inputBox[0].value="",this.inputBox[0].dataset.lastKey="",osu.executeAction(t)},e.prototype.show=function(t,e){return this.clickAfterVerification=t,null!=e&&$(".js-user-verification--box").html(e),this.$modal().modal({backdrop:"static",keyboard:!1,show:!0}).addClass("js-user-verification--active"),this.reposition()},e.prototype.showOnError=function(t,e){var n,i;if(i=t.target,401===e.status&&"verify"===(null!=(n=e.responseJSON)?n.authentication:void 0))return this.show(i,e.responseJSON.box)},e.prototype.showOnLoad=function(){if(window.showVerificationModal)return window.showVerificationModal=null,this.show()},e}()}).call(window)},"+y1S":function(t,e,n){var i=n("FP4j");t.exports=function(t){var e=i(t,"line-height"),n=parseFloat(e,10);if(e===n+""){var s=t.style.lineHeight;t.style.lineHeight=e+"em",e=i(t,"line-height"),n=parseFloat(e,10),s?t.style.lineHeight=s:delete t.style.lineHeight}if(-1!==e.indexOf("pt")?(n*=4,n/=3):-1!==e.indexOf("mm")?(n*=96,n/=25.4):-1!==e.indexOf("cm")?(n*=96,n/=2.54):-1!==e.indexOf("in")?n*=96:-1!==e.indexOf("pc")&&(n*=16),n=Math.round(n),"normal"===e){var o=t.nodeName,r=document.createElement(o);r.innerHTML="&nbsp;","TEXTAREA"===o.toUpperCase()&&r.setAttribute("rows","1");var a=i(t,"font-size");r.style.fontSize=a,r.style.padding="0px",r.style.border="0px";var u=document.body;u.appendChild(r),n=r.offsetHeight,u.removeChild(r)}return n}},"/BGJ":function(t,e){(function(){var t,e,n;React.createElement,n=ReactDOMFactories.span,e=ReactDOMFactories.i,t="supporter-icon",this.SupporterIcon=function(i){var s,o,r,a;return s=null!=(o=i.background)&&o,a=null!=(r=i.smaller)&&r,t,n({className:t+(a?" "+t+"--smaller":"")+" fa-stack",title:osu.trans("users.show.is_supporter")},s?e({className:t+"__bg fas fa-circle fa-stack-2x"}):void 0,e({className:"far fa-circle fa-stack-2x"}),e({className:t+"__heart fas fa-heart fa-stack-1x"}))}}).call(window)},0:function(t,e,n){n("hjjs"),t.exports=n("zzf1")},"0356":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEditPlaystyle=function(){function e(){this.update=t(this.update,this),this.setState=t(this.setState,this),this.saved=t(this.saved,this),this.clearState=t(this.clearState,this),this.change=t(this.change,this),this.debouncedUpdate=_.debounce(this.update,500),$(document).on("change",".js-account-edit-playstyle",this.change)}return e.prototype.checkboxFields=document.getElementsByClassName("js-account-edit-playstyle"),e.prototype.change=function(t){var e;return t.currentTarget.dataset.playstyleUpdating="1",null!=(e=this.xhr)&&e.abort(),this.setState("saving"),this.debouncedUpdate()},e.prototype.clearState=function(){var t,e,n,i,s;for(s=[],e=0,n=(i=this.checkboxFields).length;e<n;e++)t=i[e],s.push(t.setAttribute("data-account-edit-state",""));return s},e.prototype.saved=function(){return this.setState("saved"),this.setStateTimeout=Timeout.set(3e3,this.clearState)},e.prototype.setState=function(t){var e,n,i,s,o;for(Timeout.clear(this.setStateTimeout),o=[],n=0,i=(s=this.checkboxFields).length;n<i;n++)e=s[n],o.push(e.setAttribute("data-account-edit-state","1"===e.dataset.playstyleUpdating?t:""));return o},e.prototype.update=function(){var t,e,n,i,s,o;for(t=[""],n=0,i=(s=this.checkboxFields).length;n<i;n++)(e=s[n]).getElementsByTagName("input")[0].checked&&t.push(e.dataset.playstyle);return this.xhr=$.ajax(laroute.route("account.update"),{method:"PUT",data:{user:{osu_playstyle:t}}}).done((o=this,function(){return o.saved()})).fail(function(t){return function(e,n){if("abort"!==n)return osu.ajaxError(e),t.clearState()}}(this)).always(function(t){return function(n,i){var s,o,r,a;if("abort"!==i){for(a=[],s=0,o=(r=t.checkboxFields).length;s<o;s++)e=r[s],a.push(e.dataset.playstyleUpdating="0");return a}}}(this))},e}()}).call(window)},"0EjP":function(t,e){(function(){var t,e,n,i,s,o,r,a,u,l=function(t,e){return function(){return t.apply(e,arguments)}},c={}.hasOwnProperty;t=ReactDOMFactories.button,e=ReactDOMFactories.div,ReactDOMFactories.em,n=ReactDOMFactories.form,i=ReactDOMFactories.i,s=ReactDOMFactories.label,o=ReactDOMFactories.option,r=ReactDOMFactories.select,a=ReactDOMFactories.span,ReactDOMFactories.strong,u=ReactDOMFactories.textarea,React.createElement,this.BBCodeEditor=function(h){function p(){return this.sendOnChange=l(this.sendOnChange,this),this._save=l(this._save,this),this._reset=l(this._reset,this),this._cancel=l(this._cancel,this),this.onKeyDown=l(this.onKeyDown,this),this.setSizeSelect=l(this.setSizeSelect,this),this.setBody=l(this.setBody,this),this.toolbarButton=l(this.toolbarButton,this),this.actionButton=l(this.actionButton,this),this.render=l(this.render,this),this.componentDidMount=l(this.componentDidMount,this),p.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)c.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(p,React.Component),p.prototype.componentDidMount=function(){return this.sizeSelect.value="",this.body.selectionEnd=0,this.body.focus()},p.prototype.render=function(){var t,l,c,h,p;for(t="post-editor",l=0,c=(p=null!=(h=this.props.modifiers)?h:[]).length;l<c;l++)t+=" post-editor--"+p[l];return n({className:t},u({className:"post-editor__textarea",name:"body",placeholder:this.props.placeholder,defaultValue:this.props.rawValue,disabled:this.props.disabled,onKeyDown:this.onKeyDown,ref:this.setBody}),e({className:"post-editor__footer"},e({className:"post-editor-footer"},e({className:"post-editor-footer__col post-editor-footer__col--toolbar"},e({className:"post-box-toolbar"},this.toolbarButton("bold",i({className:"fas fa-bold"})),this.toolbarButton("italic",i({className:"fas fa-italic"})),this.toolbarButton("strikethrough",i({className:"fas fa-strikethrough"})),this.toolbarButton("heading",i({className:"fas fa-heading"})),this.toolbarButton("link",i({className:"fas fa-link"})),this.toolbarButton("spoilerbox",i({className:"fas fa-barcode"})),this.toolbarButton("list-numbered",i({className:"fas fa-list-ol"})),this.toolbarButton("list",i({className:"fas fa-list"})),this.toolbarButton("image",i({className:"fas fa-image"})),s({className:"bbcode-size-select",title:osu.trans("bbcode.size._")},a({className:"bbcode-size-select__label"},osu.trans("bbcode.size._")),i({className:"fas fa-chevron-down"}),r({className:"bbcode-size-select__select js-bbcode-btn--size",disabled:this.props.disabled,ref:this.setSizeSelect},o({value:"50"},osu.trans("bbcode.size.tiny")),o({value:"85"},osu.trans("bbcode.size.small")),o({value:"100"},osu.trans("bbcode.size.normal")),o({value:"150"},osu.trans("bbcode.size.large")))))),e({className:"post-editor-footer__col post-editor-footer__col--actions"},this.actionButton(this._cancel,osu.trans("common.buttons.cancel")),this.actionButton(this._reset,osu.trans("common.buttons.reset")),this.actionButton(this._save,osu.trans("common.buttons.save"))))))},p.prototype.actionButton=function(e,n){return t({className:"btn-osu btn-osu--post-editor btn-osu-default",disabled:this.props.disabled,type:"button",onClick:e},n)},p.prototype.toolbarButton=function(e,n){return t({className:"btn-circle btn-circle--bbcode js-bbcode-btn--"+e,disabled:this.props.disabled,title:osu.trans("bbcode."+_.snakeCase(e)),type:"button"},a({className:"btn-circle__content"},n))},p.prototype.setBody=function(t){return this.body=t},p.prototype.setSizeSelect=function(t){return this.sizeSelect=t},p.prototype.onKeyDown=function(t){return 27===t.keyCode&&this._cancel()},p.prototype._cancel=function(t){if(this.body.value===this.props.rawValue||confirm(osu.trans("common.confirmation_unsaved")))return this.body.value=this.props.rawValue,this.sendOnChange({event:t,type:"cancel"})},p.prototype._reset=function(t){return this.body.value=this.props.rawValue,this.sendOnChange({event:t,type:"reset"}),this.body.focus()},p.prototype._save=function(t){return this.sendOnChange({event:t,type:"save"})},p.prototype.sendOnChange=function(t){var e,n,i;return n=t.event,i=t.type,"function"==typeof(e=this.props).onChange?e.onChange({event:n,type:i,value:this.body.value,hasChanged:this.body.value!==this.props.rawValue}):void 0},p}()}).call(window)},"0KrW":function(t,e){(function(){var t,e,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty;t=ReactDOMFactories.a,e=ReactDOMFactories.li,n=ReactDOMFactories.span,i=ReactDOMFactories.ul,this.PlaymodeTabs=function(r){function a(){return this.switchMode=s(this.switchMode,this),this.render=s(this.render,this),a.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,React.Component),a.prototype.render=function(){var s,o,r,a,u;return i({className:"page-mode"},function(){var i,l,c,h,p,d,m;for(m=[],l=0,c=(h=BeatmapHelper.modes).length;l<c;l++)u=h[l],r=!(this.props.enableAll||null!=this.props.beatmaps[u]),s=u===this.props.currentMode,a="page-mode-link",s&&(a+=" page-mode-link--is-active"),r&&(a+=" page-mode-link--is-disabled"),m.push(e({className:"page-mode__item",key:u},t({className:a,onClick:this.switchMode,href:null!=(p="function"==typeof(i=this.props).hrefFunc?i.hrefFunc(u):void 0)?p:"#","data-mode":u,"data-disabled":r},osu.trans("beatmaps.mode."+u),null!=(null!=(d=this.props.counts)?d[u]:void 0)?n({className:"page-mode-link__badge"},this.props.counts[u]):void 0,this.props.showCounts?(o=Number(_.sumBy(this.props.beatmaps[u],function(t){return!t.convert})))>0?n({className:"page-mode-link__badge"},o):void 0:void 0,n({className:"page-mode-link__stripe"}))));return m}.call(this))},a.prototype.switchMode=function(t){var e,n;if(t.preventDefault(),e=(n=t.currentTarget).dataset.mode,this.props.currentMode!==e&&null!=e&&"true"!==n.dataset.disabled)return $.publish("playmode:set",{mode:e})},a}()}).call(window)},"0Sjo":function(t,e){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}};t="beatmap-discussions-chart",this.BeatmapDiscussionsChart=function(){function n(n,i){var s;this.length=i,this.resize=e(this.resize,this),this.positionPoints=e(this.positionPoints,this),this.drawXAxis=e(this.drawXAxis,this),this.drawAreas=e(this.drawAreas,this),this.setWrapperSize=e(this.setWrapperSize,this),this.setSvgSize=e(this.setSvgSize,this),this.setAxisSize=e(this.setAxisSize,this),this.setScales=e(this.setScales,this),this.setDimensions=e(this.setDimensions,this),this.loadData=e(this.loadData,this),this.id=Math.floor(1e3*Math.random()),this.dimensions={chartHeight:120,totalHeight:150,xAxisHeight:2,barTop:0,targetAreaWidth:10},this.dimensions.labelHeight=this.dimensions.totalHeight-this.dimensions.chartHeight,this.dimensions.labelTop=this.dimensions.totalHeight-this.dimensions.labelHeight,this.dimensions.iconTop=this.dimensions.labelTop+this.dimensions.labelHeight/2,this.dimensions.barHeight=this.dimensions.chartHeight-this.dimensions.barTop,this.dimensions.xAxisTop=this.dimensions.chartHeight-this.dimensions.xAxisHeight,this.dimensions.targetAreaHeight=this.dimensions.barHeight+this.dimensions.labelHeight,this.margins={top:0,right:40,bottom:0,left:40},this.scaleX=d3.scaleLinear().domain([0,this.length]).nice(),this.area=d3.select(n).append("div").classed(t,!0),this.svg=this.area.append("svg"),(s=this.svg.append("defs").append("linearGradient").attr("id","bar-gradient-"+this.id).attr("gradientUnits","userSpaceOnUse").attr("x1",0).attr("x2",0).attr("y1",0).attr("y2","100%")).append("stop").classed(t+"__bar-gradient "+t+"__bar-gradient--start",!0).attr("offset","30%"),s.append("stop").classed(t+"__bar-gradient",!0).attr("offset","80%"),this.svgWrapper=this.svg.append("g").classed(t+"__wrapper",!0),this.svgChartArea=this.svgWrapper.append("rect").attr("x",-this.margins.left).attr("y",0).attr("height",this.dimensions.chartHeight).classed(t+"__chart-area",!0),this.svgLabelArea=this.svgWrapper.append("rect").attr("x",-this.margins.left).attr("y",this.dimensions.labelTop).attr("height",this.dimensions.labelHeight).classed(t+"__label-area",!0),this.svgXAxis=this.svgWrapper.append("rect").attr("x",-this.margins.left).attr("y",this.dimensions.xAxisTop).attr("height",this.dimensions.xAxisHeight).classed(t+"__axis "+t+"__axis--x",!0),this.svgPointsContainer=this.svgWrapper.append("g"),this.xAxis=d3.axisBottom().ticks(0).tickSizeOuter(0)}return n.prototype.loadData=function(e){var n;return this.data=_.orderBy(e,"timestamp"),this.svgPoints=this.svgPointsContainer.selectAll("."+t+"__point").data(this.data,function(t){return t.id}),(n=this.svgPoints.enter().append("a").classed(t+"__point",!0)).append("line").classed(t+"__bar",!0).attr("x1",0).attr("x2",0).attr("y1",this.dimensions.barTop).attr("y2",this.dimensions.barTop+this.dimensions.barHeight).attr("stroke","url(#bar-gradient-"+this.id+")"),n.append("rect").classed(t+"__target-area",!0).attr("x",-this.dimensions.targetAreaWidth/2).attr("width",this.dimensions.targetAreaWidth).attr("y",this.dimensions.barTop).attr("height",this.dimensions.targetAreaHeight),n.append("text").classed(t+"__icon",!0).style("text-anchor","middle").attr("y",this.dimensions.iconTop),this.svgPoints.exit().remove(),this.svgPoints=n.merge(this.svgPoints),this.svgPoints.attr("xlink:href",function(t){return BeatmapDiscussionHelper.url({discussion:t})}).attr("class",function(e){var n,i;return i=e.resolved?"resolved":_.kebabCase(e.message_type),n="js-beatmap-discussion--jump "+t+"__point "+t+"__point--"+i,null!=e.deleted_at&&(n+=" "+t+"__point--deleted"),n}).attr("title",function(t){return BeatmapDiscussionHelper.formatTimestamp(t.timestamp)}).attr("data-tooltip-position","bottom center").attr("data-tooltip-modifiers","extra-padding"),this.svgPoints.select("."+t+"__icon > tspan").remove(),this.svgPoints.select("."+t+"__icon").append("tspan").attr("class",function(t){var e;return e=t.resolved?"resolved":_.camelCase(t.message_type),BeatmapDiscussionHelper.messageType.iconText[e][0]}).html(function(t){var e;return e=t.resolved?"resolved":_.camelCase(t.message_type),BeatmapDiscussionHelper.messageType.iconText[e][1]}),this.resize()},n.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},n.prototype.setScales=function(){return this.scaleX.range([0,this.width])},n.prototype.setAxisSize=function(){return this.xAxis.scale(this.scaleX)},n.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},n.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},n.prototype.drawAreas=function(){var t;return t=this.width+(this.margins.left+this.margins.right),this.svgChartArea.attr("width",t),this.svgLabelArea.attr("width",t)},n.prototype.drawXAxis=function(){return this.svgXAxis.attr("width",this.width+(this.margins.left+this.margins.right))},n.prototype.positionPoints=function(){return this.svgPoints.attr("transform",(t=this,function(e){return"translate("+Math.round(t.scaleX(e.timestamp))+", 0)"}));var t},n.prototype.resize=function(){return this.setDimensions(),this.setScales(),this.setSvgSize(),this.setWrapperSize(),this.setAxisSize(),this.drawXAxis(),this.drawAreas(),this.positionPoints()},n}()}).call(window)},"0tzJ":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BeatmapsetDownloadObserver=function(){function e(){this.showPopup=t(this.showPopup,this),this.createPopup=t(this.createPopup,this),this.loadAndShowPopup=t(this.loadAndShowPopup,this),this.quotaCheck=t(this.quotaCheck,this),$(document).on("click mouseup",".js-beatmapset-download-link",this.quotaCheck)}return e.prototype.targetSelector=".support-osu-popup",e.prototype.container="#popup-container",e.prototype.wrapperClass="empty-popup",e.prototype.quotaCheck=function(t){var e;if(("undefined"==typeof currentUser||null===currentUser||!currentUser.is_supporter)&&("mouseup"!==t.type||2===t.which))return $.ajax(laroute.route("download-quota-check")).done((e=this,function(t){var n;if(20===(n=t.quota_used)||n>0&&n%50==0)return e.loadAndShowPopup}))},e.prototype.loadAndShowPopup=function(){return 0===$(this.targetSelector).length?$.get(laroute.route("support-osu-popup"),(t=this,function(e){return t.createPopup(e),t.showPopup()})):this.showPopup();var t},e.prototype.createPopup=function(t){var e;if(void 0!==t)return(e=$("."+this.wrapperClass+"--clone").clone()).removeClass(this.wrapperClass+"--clone"),e.find(".popup-content").html(t),e.find(".support-osu-popup__close-button").on("click",function(t){return t.preventDefault(),e.fadeOut(),Blackout.hide()}),e.appendTo($(this.container))},e.prototype.showPopup=function(){var t;return"function"==typeof(t=document.activeElement).blur&&t.blur(),Blackout.show(),$(this.targetSelector).parents("."+this.wrapperClass).fadeIn()},e}()}).call(window)},"2LKk":function(t,e){(function(){var t,e,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty;ReactDOMFactories.button,t=ReactDOMFactories.div,n=ReactDOMFactories.h2,i=ReactDOMFactories.span,e=React.createElement,this.Comments=function(r){function a(){return this.render=s(this.render,this),a.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(a,React.PureComponent),a.prototype.render=function(){var s,o,r;return r=_.groupBy(this.props.comments,"parent_id"),o=r.null,t({className:osu.classWithModifiers("comments",this.props.modifiers)},n({className:"comments__title"},osu.trans("comments.title"),i({className:"comments__count"},osu.formatNumber(this.props.total))),t({className:"comments__new"},e(CommentEditor,{commentableType:this.props.commentableType,commentableId:this.props.commentableId,focus:!1,modifiers:this.props.modifiers})),t({className:"comments__content"},t({className:"comments__items"},e(CommentsSort,{loadingSort:this.props.loadingSort,currentSort:this.props.currentSort,modifiers:this.props.modifiers})),null!=o?t({className:"comments__items "+(null!=this.props.loadingSort?"comments__items--loading":"")},function(){var t,n,i;for(i=[],t=0,n=o.length;t<n;t++)s=o[t],i.push(e(Comment,{key:s.id,comment:s,commentsByParentId:r,userVotesByCommentId:this.props.userVotesByCommentId,usersById:this.props.usersById,depth:0,currentSort:this.props.currentSort,modifiers:this.props.modifiers,moreComments:this.props.moreComments}));return i}.call(this),e(CommentShowMore,{commentableType:this.props.commentableType,commentableId:this.props.commentableId,comments:o,total:this.props.topLevelCount,sort:this.props.currentSort,modifiers:_.concat("top",this.props.modifiers),moreComments:this.props.moreComments})):t({className:"comments__items comments__items--empty"},osu.trans("comments.empty"))))},a}()}).call(window)},"2b+G":function(t,e){(function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;ReactDOMFactories.button,e=ReactDOMFactories.div,ReactDOMFactories.span,n=React.createElement,t="comment-editor",this.CommentEditor=function(o){function r(t){var e;this.setTextarea=i(this.setTextarea,this),this.post=i(this.post,this),this.onChange=i(this.onChange,this),this.mode=i(this.mode,this),this.isValid=i(this.isValid,this),this.handleKeyDownCallback=i(this.handleKeyDownCallback,this),this.close=i(this.close,this),this.buttonText=i(this.buttonText,this),this.render=i(this.render,this),this.componentWillUnmount=i(this.componentWillUnmount,this),this.componentDidMount=i(this.componentDidMount,this),r.__super__.constructor.call(this,t),this.textarea=null,this.throttledPost=_.throttle(this.post,1e3),this.handleKeyDown=InputHandler.textarea(this.handleKeyDownCallback),this.state={message:null!=(e=this.props.message)?e:"",posting:!1}}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,React.PureComponent),r.prototype.componentDidMount=function(){var t;if(this.textarea.selectionStart=-1,null==(t=this.props.focus)||t)return this.textarea.focus()},r.prototype.componentWillUnmount=function(){var t;return this.throttledPost.cancel(),null!=(t=this.xhr)?t.abort():void 0},r.prototype.render=function(){var i;return i=osu.classWithModifiers(t,this.props.modifiers),"new"===this.mode()&&(i+=" "+t+"--fancy"),e({className:i},"new"===this.mode()?e({className:t+"__avatar"},n(UserAvatar,{user:currentUser,modifiers:["full-circle"]})):void 0,n(TextareaAutosize,{className:t+"__message",innerRef:this.setTextarea,value:this.state.message,placeholder:osu.trans("comments.placeholder."+this.mode()),onChange:this.onChange,onKeyDown:this.handleKeyDown,disabled:null==currentUser.id||this.state.posting}),e({className:t+"__footer"},e({className:t+"__footer-item "+t+"__footer-item--notice hidden-xs"},osu.trans("comments.editor.textarea_hint._",{action:osu.trans("comments.editor.textarea_hint."+this.mode())})),null!=this.props.close?e({className:t+"__footer-item"},n(BigButton,{modifiers:["comment-editor"],text:osu.trans("common.buttons.cancel"),props:{onClick:this.props.close,disabled:this.state.posting}})):void 0,null!=currentUser.id?e({className:t+"__footer-item"},n(BigButton,{modifiers:["comment-editor"],text:this.state.posting?n(Spinner):this.buttonText(),props:{onClick:this.throttledPost,disabled:this.state.posting||!this.isValid()}})):e({className:t+"__footer-item"},n(BigButton,{modifiers:["comment-editor"],extraClasses:["js-user-link"],text:osu.trans("comments.guest_button."+this.mode())}))))},r.prototype.buttonText=function(){var t;return t=function(){switch(this.mode()){case"reply":return"reply";case"edit":return"save";case"new":return"post"}}.call(this),osu.trans("common.buttons."+t)},r.prototype.close=function(){var t;if(null!=this.props.close&&((null!=(t=this.props.message)?t:"")===this.state.message||confirm(osu.trans("common.confirmation_unsaved"))))return this.props.close()},r.prototype.handleKeyDownCallback=function(t,e){switch(t){case InputHandler.CANCEL:return this.close();case InputHandler.SUBMIT:return this.throttledPost()}},r.prototype.isValid=function(){return null!=this.state.message&&this.state.message.length>0},r.prototype.mode=function(){return null!=this.props.parent?"reply":null!=this.props.id?"edit":"new"},r.prototype.onChange=function(t){return this.setState({message:t.target.value})},r.prototype.post=function(){var t,e,n,i,s,o,r;if("edit"===this.mode()&&this.state.message===this.props.message)return"function"==typeof(t=this.props).close?t.close():void 0;switch(this.setState({posting:!0}),e={comment:{message:this.state.message}},this.mode()){case"reply":case"new":o=laroute.route("comments.store"),n="POST",e.comment.commentable_type=this.props.commentableType,e.comment.commentable_id=this.props.commentableId,e.comment.parent_id=null!=(s=this.props.parent)?s.id:void 0,r=this,i=function(t){return r.setState({message:""}),$.publish("comments:added",{commentBundle:t,prepend:!0})};break;case"edit":o=laroute.route("comments.update",{comment:this.props.id}),n="PUT",i=function(t){return $.publish("comment:updated",{comment:t})}}return this.xhr=$.ajax(o,{method:n,data:e}).always(function(t){return function(){return t.setState({posting:!1})}}(this)).done(function(t){return function(e){var n;return i(e),"function"==typeof(n=t.props).close?n.close():void 0}}(this)).fail(function(t,e){return osu.ajaxError(t,e)})},r.prototype.setTextarea=function(t){return this.textarea=t},r}()}).call(window)},"2uEk":function(t,e){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty;t="line-chart",this.LineChart=function(){function i(i,s){var o,r,a,u,l,c,h,p,d;for(c in this.options=null!=s?s:{},this.resize=e(this.resize,this),this.onHover=e(this.onHover,this),this.lookupIndexFromX=e(this.lookupIndexFromX,this),this.hoverStart=e(this.hoverStart,this),this.hoverReset=e(this.hoverReset,this),this.hoverEnd=e(this.hoverEnd,this),this.drawLine=e(this.drawLine,this),this.drawAxes=e(this.drawAxes,this),this.setWrapperSize=e(this.setWrapperSize,this),this.setSvgSize=e(this.setSvgSize,this),this.setLineSize=e(this.setLineSize,this),this.setAxesSize=e(this.setAxesSize,this),this.setScalesRange=e(this.setScalesRange,this),this.setDimensions=e(this.setDimensions,this),this.loadData=e(this.loadData,this),this.margins={top:20,right:20,bottom:50,left:60},_.assign(this.margins,this.options.margins),this.id=Math.floor(1e3*Math.random()),null==(o=this.options).scales&&(o.scales={}),null==(r=this.options.scales).x&&(r.x=d3.scaleTime()),null==(a=this.options.scales).y&&(a.y=d3.scaleLinear()),null==(u=this.options).circleLine&&(u.circleLine=!1),null==(l=this.options).axisLabels&&(l.axisLabels=!0),this.area=d3.select(i).classed(osu.classWithModifiers(t,this.options.modifiers),!0),this.svg=this.area.append("svg"),this.svgWrapper=this.svg.append("g").classed(t+"__wrapper",!0),this.options.axisLabels&&(this.svgXAxis=this.svgWrapper.append("g").classed(t+"__axis "+t+"__axis--x",!0),this.svgYAxis=this.svgWrapper.append("g").classed(t+"__axis "+t+"__axis--y",!0)),this.svgLine=this.svgWrapper.append("path").classed(t+"__line",!0),this.hoverArea=this.area.append("div").classed(t+"__hover-area",!0).on("mouseout",this.hoverEnd).on("mousemove",this.onHover).on("drag",this.onHover),h=this.margins)n.call(h,c)&&(d=h[c],this.hoverArea.style(c,d+"px"));this.hover=this.hoverArea.append("div").classed(t+"__hover",!0).attr("data-visibility","hidden"),this.options.circleLine&&(this.hoverLine=this.hover.append("div").classed(t+"__hover-line",!0)),this.hoverCircle=this.hover.append("div").classed(t+"__hover-circle",!0),this.hoverInfoBox=this.hover.append("div").classed(t+"__hover-info-box",!0).attr("data-float","left"),this.hoverInfoBoxX=this.hoverInfoBox.append("div").classed(t+"__hover-info-box-text "+t+"__hover-info-box-text--x",!0),this.hoverInfoBoxY=this.hoverInfoBox.append("div").classed(t+"__hover-info-box-text "+t+"__hover-info-box-text--y",!0),this.options.axisLabels&&(this.xAxis=d3.axisBottom().tickSizeOuter(0).tickPadding(5),this.yAxis=d3.axisLeft().ticks(4)),this.line=d3.line().curve(null!=(p=this.options.curve)?p:d3.curveMonotoneX)}return i.prototype.loadData=function(t){return this.data=t,this.svgLine.datum(t),this.resize()},i.prototype.setDimensions=function(){var t;return(t=this.area.node().getBoundingClientRect()).width>0&&t.height>0&&(this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom),!0)},i.prototype.setScalesRange=function(){var t,e;return this.options.scales.x.range([0,this.width]).domain((null!=(t=this.options.domains)?t.x:void 0)||d3.extent(this.data,function(t){return t.x})),this.options.scales.y.range([this.height,0]).domain((null!=(e=this.options.domains)?e.y:void 0)||d3.extent(this.data,function(t){return t.y}))},i.prototype.setAxesSize=function(){var t,e,n,i;if(this.options.axisLabels)return this.xAxis.scale(this.options.scales.x).tickSizeInner(-this.height).ticks(null!=(e=null!=(n=this.options.ticks)?n.x:void 0)?e:15).tickFormat(this.options.formats.x).tickValues(null!=(t=this.options.tickValues)?t.x:void 0),this.yAxis.scale(this.options.scales.y).tickSizeInner(-this.width).tickFormat(this.options.formats.y).tickValues(null!=(i=this.options.tickValues)?i.y:void 0)},i.prototype.setLineSize=function(){return this.line.x((t=this,function(e){return t.options.scales.x(e.x)})).y(function(t){return function(e){return t.options.scales.y(e.y)}}(this));var t},i.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},i.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},i.prototype.drawAxes=function(){if(this.options.axisLabels)return this.svgXAxis.transition().attr("transform","translate(0, "+this.height+")").call(this.xAxis),this.svgYAxis.transition().call(this.yAxis),this.svgXAxis.selectAll(".tick line").classed(t+"__tick-line "+t+"__tick-line--default",!0),this.svgYAxis.selectAll(".tick line").classed(t+"__tick-line "+t+"__tick-line--default",!0),this.svgXAxis.selectAll(".domain").classed("u-hidden",!0),this.svgYAxis.selectAll(".domain").classed("u-hidden",!0),this.svgXAxis.selectAll("text").style("text-anchor","start").attr("transform","rotate(45) translate(5, 0)").classed(t+"__tick-text "+t+"__tick-text--strong",!0),this.svgYAxis.selectAll("text").classed(t+"__tick-text",!0)},i.prototype.drawLine=function(){return this.svgLine.transition().attr("d",this.line)},i.prototype.hoverEnd=function(){return Fade.out(this.hover.node())},i.prototype.hoverReset=function(){var t,e;return e=this,(t=function(t,n){var i,s,o,r,a;for(a=[],s=0,o=(r=[e.hoverLine,e.hoverCircle]).length;s<o;s++)i=r[s],a.push(i.style(t,n));return a})("transition","none"),this.hoverEnd(),t("transform",null),Timeout.set(0,function(){return t("transition",null)})},i.prototype.hoverStart=function(){return Fade.in(this.hover.node())},i.prototype.lookupIndexFromX=function(t){return d3.bisector(function(t){return t.x}).left(this.data,t)},i.prototype.onHover=function(){var t,e,n,i,s,o,r,a,u,l,c;if((l=this.options.scales.x.invert(d3.mouse(this.hoverArea.node())[0]),n=this.lookupIndexFromX(l))&&(this.hoverStart(),Timeout.clear(this._autoEndHover),osu.isMobile()&&(this._autoEndHover=Timeout.set(3e3,this.hoverEnd)),e=l-this.data[n-1].x<=this.data[n].x-l?this.data[n-1]:this.data[n],t=["x","y"].map((c=this,function(t){return Math.round(c.options.scales[t](e[t]))+"px"})),this.hoverLine.style("transform","translateX("+t[0]+")"),this.hoverCircle.style("transform","translate("+t.join(",")+")"),this.hoverInfoBoxX.html((null!=(o=null!=(r=this.options.infoBoxFormats)?r.x:void 0)?o:this.options.formats.x)(e.x)),this.hoverInfoBoxY.html((null!=(a=null!=(u=this.options.infoBoxFormats)?u.y:void 0)?a:this.options.formats.y)(e.y)),null!=(s=d3.event.clientX)))if(i=this.hoverInfoBox.node().getBoundingClientRect(),"right"===this.hoverInfoBox.attr("data-float")){if(s>i.left)return this.hoverInfoBox.attr("data-float","left")}else if(s<i.right)return this.hoverInfoBox.attr("data-float","right")},i.prototype.resize=function(){if(this.setDimensions())return this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.setAxesSize(),this.setLineSize(),this.drawAxes(),this.drawLine(),this.hoverReset()},i}()}).call(window)},"38ot":function(t,e){(function(){var t;t=document.getElementsByClassName("js-fixed-element"),$(document).on("shown.bs.modal",".modal",function(t){if(!osu.isIos)return $(t.target).find(".modal-af").focus()}),$(document).on("hidden.bs.modal",".modal",function(){return $(".modal-backdrop").remove(),$("body, .js-fixed-element").css({paddingRight:""})}),$(document).on("show.bs.modal",".modal",function(){var e,n,i,s,o,r,a,u;for(Timeout.set(10,function(){return $(".modal-backdrop").trigger("bsTransitionEnd")}),e=[],i=s=0,r=t.length;s<r;i=++s)n=t[i],e[i]=n.getBoundingClientRect(),e[i].skip="fixed"!==getComputedStyle(n).position;for(u=[],i=o=0,a=t.length;o<a;i=++o)n=t[i],e[i].skip||(n.style.left=e[i].left+"px",u.push(n.style.width=e[i].width+"px"));return u}),$(document).on("shown.bs.modal",".modal",function(){var e,n,i,s,o,r,a,u,l;for(a=$("body").css("padding-right"),l=[],n=i=0,o=t.length;i<o;n=++i)e=t[n],l[n]="fixed"!==getComputedStyle(e).position;for(u=[],n=s=0,r=t.length;s<r;n=++s)e=t[n],l[n]||(e.style.paddingRight=a,e.style.left="",u.push(e.style.width=""));return u})}).call(window)},"52Ca":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty;this.ReactTurbolinks=function(){function n(e){this.components=null!=e?e:{},this.registerPersistent=t(this.registerPersistent,this),this.register=t(this.register,this),this.destroyPersisted=t(this.destroyPersisted,this),this.destroy=t(this.destroy,this),this.boot=t(this.boot,this),this.targets=[],$(document).on("turbolinks:load",this.destroyPersisted),$(document).on("turbolinks:load",this.boot),$(document).on("turbolinks:before-cache",this.destroy)}return n.prototype.boot=function(){var t,n,i,s,o;for(t in s=[],i=this.components)e.call(i,t)&&(n=i[t],s.push(function(){var t,e,i,s;for(s=[],t=0,e=(i=n.targets).length;t<e;t++)"1"!==(o=i[t]).dataset.reactTurbolinksLoaded&&(o.dataset.reactTurbolinksLoaded="1",this.targets.push(o),s.push(ReactDOM.render(React.createElement(n.element,n.propsFunction(o)),o)));return s}.call(this)));return s},n.prototype.destroy=function(){var t,n,i,s,o;for(t in s=[],i=this.components)e.call(i,t)&&(n=i[t],s.push(function(){var t,e,i,s;for(s=[],t=0,e=(i=n.targets).length;t<e;t++)"1"===(o=i[t]).dataset.reactTurbolinksLoaded&&(o.dataset.reactTurbolinksLoaded=null,n.persistent?s.push(void 0):s.push(ReactDOM.unmountComponentAtNode(o)));return s}()));return s},n.prototype.destroyPersisted=function(){var t,e;for(t=[];e=this.targets.pop();)t.push(ReactDOM.unmountComponentAtNode(e));return t},n.prototype.register=function(t,e,n){return null==n&&(n=function(){}),this.registerPersistent(t,e,!1,n)},n.prototype.registerPersistent=function(t,e,n,i){if(null==n&&(n=!0),null==i&&(i=function(){}),!this.components[t])return this.components[t]={loaded:!1,persistent:n,targets:document.getElementsByClassName("js-react--"+t),element:e,propsFunction:i},this.boot()},n}()}).call(window)},"5ASV":function(t,e){(function(){this.StoreCart=function(){function t(){}return t.setEnabled=function(t){return $(".js-store-add-to-cart").prop("disabled",!t),$("#product-form").data("disabled",!t)},t}()}).call(window)},"5hXa":function(t,e){(function(){$(document).on("keypress",".js-auto-submit",function(t){if(13===t.which)return t.preventDefault(),$(t.target).trigger("change")}),$(document).on("change",".js-auto-submit",function(t){var e;if((e=$(t.target)).val()!==e.data("last-submitted-value"))return e.data("last-submitted-value",e.val()),e.parents("form").submit()}),$(document).on("keypress",".content-editable-submit",function(t){if(13===t.which)return t.preventDefault(),$(t.target).trigger("blur")}),$(document).on("blur",".content-editable-submit",function(t){var e,n,i;if((n=$(t.target)).html()!==n.data("last-submitted-value"))return n.data("last-submitted-value",n.html()),e=n.parents("form"),(i=$(document.createElement("input"))).attr("type","hidden"),i.attr("name",n.attr("data-name")),i.attr("value",n.html()),e.append(i),e.submit(),i.remove()}),$(document).on("turbolinks:load",function(){return $(".content-editable-submit").each(function(t,e){var n;return(n=$(e)).data("last-submitted-value",n.html())})}),$(document).on("click","#popup-container, #overlay",function(t){var e;return $("#overlay").fadeOut(),(e=$(t.target).closest(".popup-active")).fadeOut(null,e.remove)}),$(document).on("turbolinks:load",function(){return $("[value=_disabled]").attr("disabled",!0)}),$(document).on("click",".clickable-row",function(t){var e,n,i;if(i=t.target,!osu.isClickable(i))return(n=t.currentTarget).classList.contains("clickable-row-link")?n.click():null!=(e=n.getElementsByClassName("clickable-row-link")[0])?e.click():void 0}),$(document).on("keydown",".js-quick-submit",function(t){if((t.ctrlKey||t.metaKey)&&13===t.keyCode)return t.preventDefault(),$(t.target).closest("form").submit()}),$(document).on("ajax:beforeSend",function(t){var e,n,i,s,o,r;if((n=t.target)._submitting)return!1;for(n._submitting=!0,n._ujsSubmitDisabled=[],r=[],i=0,s=(o=n.querySelectorAll(".js-ujs-submit-disable")).length;i<s;i++)(e=o[i]).disabled||(e.disabled=!0,r.push(n._ujsSubmitDisabled.push(e)));return r}),$(document).on("ajax:complete",function(t){var e,n,i;for((n=t.target)._submitting=!1,i=[];e=n._ujsSubmitDisabled.pop();)i.push(e.disabled=!1);return i})}).call(window)},"6FbF":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.CheckboxValidation=function(){function e(){this.validate=t(this.validate,this),$(document).on("change",".js-checkbox-validation",this.validate)}return e.prototype.validate=function(t){var e,n,i,s,o,r,a,u;if(null==(e=t.currentTarget)._checkboxValidationCache&&(e._checkboxValidationCache=JSON.parse(t.currentTarget.dataset.checkboxValidation)),a=t.target.name,null!=(s=t.currentTarget._checkboxValidationCache[a])){for(n=t.currentTarget.querySelectorAll("[name='"+a+"']"),u=t.currentTarget.getElementsByClassName("js-checkbox-validation--submit")[0],i=0,o=0,r=n.length;o<r;o++)n[o].checked&&(i+=1);return u.disabled=i<s.min||i>s.max}},e}()}).call(window)},"6Laf":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.OsuLayzr=function(){function e(){this.reinit=t(this.reinit,this),this.init=t(this.init,this),this.observer=new MutationObserver(this.reinit),$(document).on("turbolinks:load",this.init)}return e.prototype.init=function(){return null==this.layzr&&(this.layzr=Layzr()),this.reinit(),this.observer.observe(document.body,{childList:!0,subtree:!0})},e.prototype.reinit=function(){return this.layzr.update().check().handlers(!0)},e}()}).call(window)},"6TQG":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicReply=function(){function e(e,n){this.forum=e,this.stickyFooter=n,this.toggle=t(this.toggle,this),this.stickOrUnstick=t(this.stickOrUnstick,this),this.unstick=t(this.unstick,this),this.stick=t(this.stick,this),this.posted=t(this.posted,this),this.inputChange=t(this.inputChange,this),this.enableFlash=t(this.enableFlash,this),this.deactivate=t(this.deactivate,this),this.activateWithReply=t(this.activateWithReply,this),this.activate=t(this.activate,this),this.setState=t(this.setState,this),this.getState=t(this.getState,this),this.deleteState=t(this.deleteState,this),this.available=t(this.available,this),this.initialize=t(this.initialize,this),this.container=document.getElementsByClassName("js-forum-topic-reply--container"),this.box=document.getElementsByClassName("js-forum-topic-reply"),this.block=document.getElementsByClassName("js-forum-topic-reply--block"),this.input=document.getElementsByClassName("js-forum-topic-reply--input"),this.stickButtons=document.getElementsByClassName("js-forum-topic-reply--stick"),this.fixedBar=document.getElementsByClassName("js-sticky-footer--fixed-bar"),$(document).on("ajax:success",".js-forum-topic-reply",this.posted),$(document).on("click",".js-forum-topic-reply--stick",this.toggle),$(document).on("ajax:success",".js-forum-topic-reply--quote",this.activateWithReply),$(document).on("focus",".js-forum-topic-reply--input",this.activate),$(document).on("input change",".js-forum-topic-reply--input",_.debounce(this.inputChange,500)),$.subscribe("stickyFooter",this.stickOrUnstick),$(document).on("turbolinks:load",this.initialize)}return e.prototype.marker=function(){return document.querySelector('.js-sticky-footer[data-sticky-footer-target="forum-topic-reply"]')},e.prototype.$input=function(){return $(".js-forum-topic-reply--input")},e.prototype.initialize=function(){if(this.available())return this.deleteState("sticking"),this.input[0].value=this.getState("text")||"","1"===this.getState("active")?this.activate():void 0},e.prototype.available=function(){return this.block.length},e.prototype.deleteState=function(t){return localStorage.removeItem("forum-topic-reply--"+document.location.pathname+"--"+t)},e.prototype.getState=function(t){return localStorage.getItem("forum-topic-reply--"+document.location.pathname+"--"+t)},e.prototype.setState=function(t,e){return localStorage.setItem("forum-topic-reply--"+document.location.pathname+"--"+t,e)},e.prototype.activate=function(t){var e,n,i;for(t&&t.preventDefault(),this.setState("active","1"),e=0,n=(i=this.stickButtons).length;e<n;e++)i[e].classList.add("js-activated");if(this.stickyFooter.markerEnable(this.marker()),$.publish("stickyFooter:check"),"1"!==this.getState("sticking")&&null!=currentUser.id)return this.enableFlash()},e.prototype.activateWithReply=function(t,e){var n,i;return e+="\n",(i=(n=this.$input()).val())&&(e=i+"\n\n"+e),n.val(e),this.inputChange(),n[0].selectionStart=e.length,this.activate(t)},e.prototype.deactivate=function(t){var e,n,i;for(t&&t.preventDefault(),this.stickyFooter.markerDisable(this.marker()),this.setState("active","0"),e=0,n=(i=this.stickButtons).length;e<n;e++)i[e].classList.remove("js-activated");return $.publish("stickyFooter:check"),this.disableFlash()},e.prototype.disableFlash=function(){return $(".js-forum-topic-reply").removeClass("js-forum-topic-reply-flash")},e.prototype.enableFlash=function(){return $(".js-forum-topic-reply").addClass("js-forum-topic-reply-flash"),Timeout.set(500,this.disableFlash)},e.prototype.inputChange=function(){return this.setState("text",this.input[0].value)},e.prototype.posted=function(t,e){var n;return this.deactivate(),this.$input().val(""),this.setState("text",""),n=$(e),this.forum.postPosition(n[0])-1!==this.forum.postPosition(this.forum.endPost())||"1"===t.target.dataset.forceReload?osu.navigate(n.find(".js-post-url").attr("href")):(this.forum.setTotalPosts(this.forum.totalPosts()+1),this.forum.endPost().insertAdjacentHTML("afterend",e),osu.pageChange(),this.forum.endPost().scrollIntoView())},e.prototype.stick=function(){var t,e;if("1"!==this.getState("sticking"))return this.setState("sticking","1"),e=(t=this.$input()).is(":focus"),this.fixedBar[0].insertBefore(this.box[0],this.fixedBar[0].firstChild),e?t.focus():void 0},e.prototype.unstick=function(t){if("1"===this.getState("sticking"))return this.deleteState("sticking"),this.container[0].insertBefore(this.box[0],this.container[0].firstChild)},e.prototype.stickOrUnstick=function(t,e){return"forum-topic-reply"===e?this.stick():this.unstick()},e.prototype.toggle=function(){return"1"===this.getState("active")?this.deactivate():(this.activate(),this.$input().focus())},e}()}).call(window)},"6TfI":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=arguments;e.default=function(t){var e=!1;return function(){e||(e=!0,window.requestAnimationFrame(function(){t.apply(void 0,i),e=!1}))}}},"6Z8S":function(t,e){(function(){var t;t=$({}),$.subscribe=t.on.bind(t),$.unsubscribe=t.off.bind(t),$.publish=t.trigger.bind(t)}).call(window)},"6nUW":function(t,e){(function(){var t,e,n,i,s;t=ReactDOMFactories.a,e=ReactDOMFactories.button,s=ReactDOMFactories.span,i=ReactDOMFactories.i,n=React.createElement,this.BigButton=function(o){var r,a,u,l,c,h,p,d,m,f,g,v;for(h=null!=(d=o.modifiers)?d:[],v=o.text,a=o.icon,p=null!=(m=o.props)?m:{},r=null!=(f=o.extraClasses)?f:[],p.className=osu.classWithModifiers("btn-osu-big",h),u=0,c=r.length;u<c;u++)l=r[u],p.className+=" "+l;return(null!=p.href?p.disabled?s:t:e)(p,s({className:"btn-osu-big__content "+(null==v||null==a?"btn-osu-big__content--center":"")},null!=v?s({className:"btn-osu-big__left"},s({className:"btn-osu-big__text-top"},null!=(g=v.top)?g:v),null!=v.bottom?s({className:"btn-osu-big__text-bottom"},v.bottom):void 0):void 0,null!=a?s({className:"btn-osu-big__icon"},s({className:"fa-fw"},"_spinner"===a?n(Spinner):i({className:a}))):void 0))}}).call(window)},"70NH":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t){return t.pageYOffset?t.pageYOffset:t.document?t.document.documentElement&&t.document.documentElement.scrollTop?t.document.documentElement.scrollTop:t.document.body&&t.document.body.scrollTop?t.document.body.scrollTop:0:t.scrollY||t.scrollTop||0}},"7dd3":function(t,e){(function(){var t,e,n,i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;t=ReactDOMFactories.a,e=ReactDOMFactories.div,i=ReactDOMFactories.i,s=ReactDOMFactories.span,n=React.createElement,this.Build=function(a){function u(){return this.renderNav=o(this.renderNav,this),this.render=o(this.render,this),u.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,React.PureComponent),u.prototype.render=function(){var i,o,r,a,u,l;return i=osu.classWithModifiers("build",this.props.modifiers),a=_.groupBy(this.props.build.changelog_entries,"category"),o=_(a).keys().sort().value(),e({className:i+" t-changelog-stream--"+_.kebabCase(this.props.build.update_stream.display_name)},e({className:"build__version"},this.renderNav({version:"previous",icon:"fas fa-chevron-left"}),t({className:"build__version-link",href:Url.changelogBuild(this.props.build)},s({className:"build__stream"},this.props.build.update_stream.display_name)," ",s({className:"u-changelog-stream--text"},this.props.build.display_version)),this.renderNav({version:"next",icon:"fas fa-chevron-right"})),null!=(l=this.props.showDate)&&l?e({className:"build__date"},moment(this.props.build.created_at).format("LL")):void 0,function(){var t,i,s;for(s=[],t=0,i=o.length;t<i;t++)r=o[t],s.push(e({key:r,className:"build__changelog-entries-container"},e({className:"build__changelog-entries-category"},r),e({className:"build__changelog-entries"},function(){var t,i,s,o,l;for(l=[],t=0,i=(s=a[r]).length;t<i;t++)u=s[t],l.push(e({key:null!=(o=u.id)?o:u.created_at+"-"+u.title,className:"build__changelog-entry"},n(ChangelogEntry,{entry:u})));return l}())));return s}())},u.prototype.renderNav=function(e){var n,o,r;if(r=e.version,o=e.icon,null!=this.props.build.versions)return null!=(n=this.props.build.versions[r])?t({className:"build__version-link",href:Url.changelogBuild(n),title:n.display_version},i({className:o})):s({className:"build__version-link build__version-link--disabled"},i({className:o}))},u}()}).call(window)},"7mzp":function(t,e){(function(){this.Timeago=function(){return function(){var t;this.observer=new MutationObserver(function(t){if($.fn.timeago)return t.forEach(function(t){var e;return(e=$(t.addedNodes)).find(".timeago").add(e.filter(".timeago")).timeago()})}),$(document).on("turbolinks:load",(t=this,function(){return $(".timeago").timeago(),t.observer.observe(document.body,{childList:!0,subtree:!0})}))}}()}).call(window)},"7nD5":function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var i,s,o,r,a,u=1,l={},c=!1,h=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?i=function(t){e.nextTick(function(){m(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){m(t.data)},i=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(s=h.documentElement,i=function(t){var e=h.createElement("script");e.onreadystatechange=function(){m(t),e.onreadystatechange=null,s.removeChild(e),e=null},s.appendChild(e)}):i=function(t){setTimeout(m,0,t)}:(r="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(r)&&m(+e.data.slice(r.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),i=function(e){t.postMessage(r+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var s={callback:t,args:e};return l[u]=s,i(u),u++},p.clearImmediate=d}function d(t){delete l[t]}function m(t){if(c)setTimeout(m,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(n,i)}}(e)}finally{d(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n("BemA"),n("VrS/"))},"8DVv":function(t,e){(function(){$(document).on("ajax:before",function(){return LoadingOverlay.show(),$(document).one("ajax:complete.ujsHideLoadingOverlay",LoadingOverlay.hide)}),$(document).on("ajax:success",function(t,e){var n,i;return i=function(){if(!_.isEmpty(null!=e?e.message:void 0))return osu.popup(e.message,"success")},"1"===t.target.getAttribute("data-reload-on-success")?(n="1"===t.target.getAttribute("data-reload-reset-scroll"),$(document).one("turbolinks:load",i),osu.reloadPage(!n)):i()}),$(document).on("ajax:error",function(t,e){if("1"!==t.target.dataset.skipAjaxErrorPopup&&401!==e.status)return osu.ajaxError(e)})}).call(window)},"9put":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TooltipDefault=function(){function e(){this.timeagoTip=t(this.timeagoTip,this),this.rollback=t(this.rollback,this),this.autoAddTooltip=t(this.autoAddTooltip,this),this.onMouseOver=t(this.onMouseOver,this),$(document).on("mouseover touchstart","[title]:not(iframe)",this.onMouseOver),$(document).on("mouseenter touchstart",".u-ellipsis-overflow, .u-ellipsis-overflow-desktop",this.autoAddTooltip),$(document).on("turbolinks:before-cache",this.rollback)}return e.prototype.onMouseOver=function(t){var e,n,i,s,o,r,a,u;if(u=(s=t.currentTarget).getAttribute("title"),s.removeAttribute("title"),0!==_.size(u)){if(e=s.classList.contains("timeago")||s.classList.contains("js-tooltip-time")?this.timeagoTip(s,u):$("<span>").text(u),!s._tooltip)return s._tooltip=!0,n=null!=(a=s.dataset.tooltipPosition)?a:"top center",o=function(){switch(n){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center";case"bottom center":return"top center"}}(),i="qtip tooltip-default","fixed"===s.dataset.tooltipFloat&&(i+=" tooltip-default--fixed"),null!=s.dataset.tooltipModifiers&&(i+=" tooltip-default--"+s.dataset.tooltipModifiers),r={overwrite:!1,content:e,position:{my:o,at:n,viewport:$(window)},show:{event:t.type,ready:!0},hide:{event:"click mouseleave"},style:{classes:i,tip:{width:10,height:8}}},"touchstart"===t.type&&(r.hide={inactive:3e3}),s.dataset.tooltipPinPosition&&(r.position.effect=!1),s.dataset.origTitle=u,$(s).qtip(r,t);$(s).qtip("set",{"content.text":e})}},e.prototype.autoAddTooltip=function(t){var e,n,i;return i=t.currentTarget,n=(e=$(i)).qtip("api"),i.offsetWidth<i.scrollWidth?n?n.enable():(e.attr("title",e.text()),e.trigger("mouseover")):null!=n?n.disable():void 0},e.prototype.remove=function(t){if(t._tooltip)return $(t).qtip("destroy",!0),t._tooltip=!1,null==t.getAttribute("title")&&t.setAttribute("title",t.dataset.origTitle),delete t.dataset.origTitle},e.prototype.rollback=function(){var t,e,n,i,s;for($(".qtip").remove(),s=[],e=0,n=(i=document.querySelectorAll("[data-orig-title]")).length;e<n;e++)t=i[e],s.push(t.setAttribute("title",t.dataset.origTitle));return s},e.prototype.timeagoTip=function(t,e){var n,i,s,o,r,a;return a=null!=(s=null!=(o=t.getAttribute("datetime"))?o:e)?s:t.textContent,r=moment(a),n=$("<strong>").text(r.format("LL")),i=$("<span>").addClass("tooltip-default__time").text(r.format("LT")+" "+this.tzString(r)),$("<span>").append(n).append(" ").append(i)},e.prototype.tzString=function(t){var e;return"UTC"+((e=t.utcOffset())%60==0?(e>=0?"+":"")+e/60:t.format("Z"))},e}()}).call(window)},BemA:function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},BzC5:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Gallery=function(){function e(){this.switchPreview=t(this.switchPreview,this),this.thumbBoundsFn=t(this.thumbBoundsFn,this),this.open=t(this.open,this),this.initiateOpen=t(this.initiateOpen,this),this.container=document.getElementsByClassName("pswp"),$(document).on("click",".js-gallery",this.initiateOpen),$(document).on("click",".js-gallery-thumbnail",this.switchPreview),$(document).on("turbolinks:before-cache",function(){return $(".js-gallery--container").remove()})}return e.prototype.initiateOpen=function(t){var e,n,i;if(!(e=$(t.currentTarget)).parents("a").length)return t.preventDefault(),i=parseInt(e.attr("data-index"),10),n=e.attr("data-gallery-id"),this.open({galleryId:n,index:i})},e.prototype.open=function(t){var e,n,i,s;return n=t.galleryId,i=t.index,(e=this.container[0].cloneNode(!0)).classList.add("js-gallery--container"),document.body.appendChild(e),s=new PhotoSwipe(e,PhotoSwipeUI_Default,this.data(n),{showHideOpacity:!0,getThumbBoundsFn:this.thumbBoundsFn(n),index:i,history:!1,timeToIdle:null}),_.startsWith(n,"contest-")&&new _exported.GalleryContest(e,s),s.init(),$(document).one("gallery:close",function(){try{return s.close()}catch(t){}})},e.prototype.data=function(t){var e,n,i,s,o,r,a;for(r=[],n=0,i=(s=document.querySelectorAll(".js-gallery[data-gallery-id='"+t+"']")).length;n<i;n++)a=null!=(o=(e=s[n]).getAttribute("data-src"))?o:e.getAttribute("href"),r.push({element:e,msrc:a,src:a,w:parseInt(e.getAttribute("data-width"),10),h:parseInt(e.getAttribute("data-height"),10)});return r},e.prototype.thumbBoundsFn=function(t){return function(e){var n,i,s,o,r,a,u;return u=(n=$(".js-gallery[data-gallery-id='"+t+"'][data-index='"+e+"']")).offset(),a=[n.width(),n.height()],i=[u.left+a[0]/2,u.top+a[1]/2],s=[parseInt(n.attr("data-width"),10),parseInt(n.attr("data-height"),10)],o=Math.max(a[0]/s[0],a[1]/s[1]),r=s.map(function(t){return t*o}),{x:i[0]-r[0]/2,y:i[1]-r[1]/2,w:r[0]}}},e.prototype.switchPreview=function(t){var e,n,i,s,o,r,a,u,l,c;for(t.preventDefault(),i=(u=$(t.currentTarget)[0].dataset).galleryId,s=u.index,n=$(".js-gallery[data-gallery-id='"+i+"']"),e=$(".js-gallery-thumbnail[data-gallery-id='"+i+"']"),c=[],o=0,r=(l=_.zip(e,n)).length;o<r;o++)s===(a=l[o])[0].dataset.index?(a[0].classList.add("js-gallery-thumbnail--active"),c.push(Fade.in(a[1]))):(a[0].classList.remove("js-gallery-thumbnail--active"),c.push(Fade.out(a[1])));return c},e}()}).call(window)},CFbt:function(t,e){(function(){var t;t=function(t,e,n){var i,s,o,r,a,u;return null==n&&(n=""),o=(i=$(t.target).parents("form").find("[name=body], .js-bbcode-body")).val(),a=(s=i[0]).selectionStart,r=s.selectionEnd,(u=[o.substring(0,a),o.substring(a,r),o.substring(r)])[0]=u[0]+e,u[2]=n+u[2],a===r?(i.val(u[0]+u[2]),s.selectionStart=u[0].length,s.selectionEnd=s.selectionStart):(i.val(u[0]+u[1]+u[2]),s.selectionStart=a,s.selectionEnd=u[0].length+u[1].length+n.length),i.trigger("bbcode:inserted").trigger("input").focus()},[["bold","[b]","[/b]"],["heading","[heading]","[/heading]"],["image","[img]","[/img]"],["italic","[i]","[/i]"],["link","[url]","[/url]"],["list","[list]\n[*]","[/list]"],["list-numbered","[list=1]\n[*]","[/list]"],["strikethrough","[s]","[/s]"],["underline","[u]","[/u]"],["spoilerbox","[box=]","[/box]"]].forEach(function(e){var n,i,s;return n=e[0],s=e[1],i=e[2],$(document).on("click",".js-bbcode-btn--"+n,function(e){return t(e,s,i)})}),$(document).on("turbolinks:load",function(){return $(".js-bbcode-btn--size").val("")}),$(document).on("change",".js-bbcode-btn--size",function(e){var n,i;return n=$(e.target),i=parseInt(n.val(),10),n.val(""),t(e,"[size="+i+"]","[/size]")})}).call(window)},CliL:function(t,e,n){"use strict";var i,s=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])},function(t,e){function n(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}),o=this&&this.__assign||Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var s in e=arguments[n])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},r=this&&this.__rest||function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&(n[i[s]]=t[i[s]])}return n};e.__esModule=!0;var a=n("cDcd"),u=n("rf6O"),l=n("F0kA"),c=n("+y1S"),h="autosize:update",p="autosize:destroy",d="autosize:resized",m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.state={lineHeight:null},e.dispatchEvent=function(t){switch(t){case h:l.update(e.textarea);break;case p:l.destroy(e.textarea);break;case d:var n=document.createEvent("Event");n.initEvent(d,!0,!1),e.textarea.dispatchEvent(n)}},e.updateLineHeight=function(){e.setState({lineHeight:c(e.textarea)})},e.onChange=function(t){var n=e.props.onChange;e.currentValue=t.currentTarget.value,n&&n(t)},e.saveDOMNodeRef=function(t){var n=e.props.innerRef;n&&n(t),e.textarea=t},e.getLocals=function(){var t=e,n=t.props,i=(n.onResize,n.maxRows),s=(n.onChange,n.style),a=(n.innerRef,r(n,["onResize","maxRows","onChange","style","innerRef"])),u=t.state.lineHeight,l=t.saveDOMNodeRef,c=i&&u?u*i:null;return o({},a,{saveDOMNodeRef:l,style:c?o({},s,{maxHeight:c}):s,onChange:e.onChange})},e}return s(e,t),e.prototype.componentDidMount=function(){var t=this,e=this.props,n=e.onResize,i=e.maxRows,s=e.async;"number"==typeof i&&this.updateLineHeight(),"number"==typeof i||s?setTimeout(function(){return l(t.textarea)}):l(this.textarea),n&&this.textarea.addEventListener(d,n)},e.prototype.componentWillUnmount=function(){var t=this.props.onResize;t&&this.textarea.removeEventListener(d,t),this.dispatchEvent(p)},e.prototype.render=function(){var t=this.getLocals(),e=t.children,n=t.saveDOMNodeRef,i=r(t,["children","saveDOMNodeRef"]);return a.createElement("textarea",o({},i,{ref:n}),e)},e.prototype.componentDidUpdate=function(){this.dispatchEvent(h)},e.defaultProps={rows:1,async:!1},e.propTypes={rows:u.number,maxRows:u.number,onResize:u.func,innerRef:u.func,async:u.bool},e}(a.Component);e.TextareaAutosize=m},De3I:function(t,e){(function(){var t,e;e=React.createElement,t=ReactDOMFactories.div,ReactDOMFactories.img,this.Mods=function(n){var i,s,o,r,a,u,l,c;for(a=null!=(l=n.modifiers)?l:[],u=null!=(c=n.mods)?c:[],i="mods",s=0,o=a.length;s<o;s++)i+=" mods--"+(r=a[s]);return t({className:i},function(){var n,i,s;for(s=[],n=0,i=u.length;n<i;n++)r=u[n],s.push(t({key:r,className:"mods__mod"},t({className:"mods__mod-image"},e(Mod,{mod:r}))));return s}())}}).call(window)},Dzhp:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.UserLogin=function(){function e(){this.showToContinue=t(this.showToContinue,this),this.showOnLoad=t(this.showOnLoad,this),this.showOnError=t(this.showOnError,this),this.showOnClick=t(this.showOnClick,this),this.show=t(this.show,this),this.reset=t(this.reset,this),this.refreshToken=t(this.refreshToken,this),this.loginSuccess=t(this.loginSuccess,this),this.loginError=t(this.loginError,this),this.clickAfterLogin=null,$(document).on("ajax:success",".js-login-form",this.loginSuccess),$(document).on("ajax:error",".js-login-form",this.loginError),$(document).on("submit",".js-login-form",this.clearError),$(document).on("input",".js-login-form-input",this.clearError),$(document).on("click",".js-user-link",this.showOnClick),$(document).on("click",".js-login-required--click",this.showToContinue),$(document).on("ajax:before",".js-login-required--click",function(){return null!=currentUser.id}),$(document).on("ajax:error",this.showOnError),$(document).on("turbolinks:load",this.showOnLoad),$.subscribe("nav:popup:hidden",this.reset)}return e.prototype.clearError=function(t){return $(".js-login-form--error").text("")},e.prototype.loginError=function(t,e){return t.preventDefault(),t.stopPropagation(),$(".js-login-form--error").text(osu.xhrErrorMessage(e))},e.prototype.loginSuccess=function(t,e){var n;return n=this.clickAfterLogin,this.clickAfterLogin=null,this.refreshToken(),$.publish("user:update",e.user),Timeout.set(0,function(){return $(".js-user-login--menu")[0].click(),$(".js-user-header").replaceWith(e.header),$(".js-user-header-popup").html(e.header_popup),osu.executeAction(n)})},e.prototype.refreshToken=function(){var t;return t=Cookies.get("XSRF-TOKEN"),$('[name="_token"]').attr("value",t),$('[name="csrf-token"]').attr("content",t)},e.prototype.reset=function(){return this.clickAfterLogin=null},e.prototype.show=function(t){return this.clickAfterLogin=t,Timeout.set(0,function(){return $(document).trigger("gallery:close"),$(".js-user-login--menu")[0].click()})},e.prototype.showOnClick=function(t){return t.preventDefault(),this.show()},e.prototype.showOnError=function(t,e){var n;if(401===e.status&&"basic"===(null!=(n=e.responseJSON)?n.authentication:void 0))return null!=currentUser.id?osu.reloadPage():this.show(t.target)},e.prototype.showOnLoad=function(){if(null!=window.showLoginModal)return window.showLoginModal=null,this.show()},e.prototype.showToContinue=function(t){var e;if(null==currentUser.id)return t.preventDefault(),Timeout.set(0,(e=this,function(){return e.show(t.target)}))},e}()}).call(window)},"E+Th":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FancyChart=function(){function e(e,n){var i,s,o,r;this.options=null!=n?n:{},this.lookupIndexFromX=t(this.lookupIndexFromX,this),this.hoverRefresh=t(this.hoverRefresh,this),this.hoverEnd=t(this.hoverEnd,this),this.resize=t(this.resize,this),this.recalc=t(this.recalc,this),this.reveal=t(this.reveal,this),this.drawLine=t(this.drawLine,this),this.setWrapperSize=t(this.setWrapperSize,this),this.setSvgSize=t(this.setSvgSize,this),this.setLineSize=t(this.setLineSize,this),this.setScalesRange=t(this.setScalesRange,this),this.setHoverAreaSize=t(this.setHoverAreaSize,this),this.setDimensions=t(this.setDimensions,this),this.loadData=t(this.loadData,this),this.hide=t(this.hide,this),null==(i=this.options).scales&&(i.scales={}),null==(s=this.options.scales).x&&(s.x=d3.scaleLinear()),null==(o=this.options.scales).y&&(o.y=d3.scaleLinear()),this.margins={top:25,right:20,bottom:10,left:0},this.area=d3.select(e),this.svg=this.area.append("svg").classed("fancy-graph",!0),this.svgWrapper=this.svg.append("g"),this.svgLine=this.svgWrapper.append("path").classed("fancy-graph__line",!0).attr("opacity",0),this.line=d3.line().curve(d3.curveMonotoneX),this.svgEndCircle=this.svgWrapper.append("circle").classed("fancy-graph__circle",!0).attr("r",2).attr("opacity",0),this.svgHoverArea=this.svg.append("rect").classed("fancy-graph__hover-area",!0).on("mouseout",this.hoverEnd).on("mousemove",this.hoverRefresh).on("drag",this.hoverRefresh),this.svgHoverMark=this.svgWrapper.append("circle").classed("fancy-graph__circle",!0).attr("data-visibility","hidden").attr("r",2),r=osu.parseJson(e.dataset.src),this.loadData(r)}return e.prototype.hide=function(){return this.svgEndCircle.attr("opacity",0),this.svgLine.attr("opacity",0)},e.prototype.loadData=function(t){if(!_.isEqual(t,this.data))return this.data=null!=t?t:[],this.svgLine.datum(this.data),this.reveal()},e.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},e.prototype.setHoverAreaSize=function(){return this.svgHoverArea.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},e.prototype.setScalesRange=function(){var t,e,n,i;return this.options.scales.x.range([0,this.width]).domain(null!=(t=null!=(e=this.options.domains)?e.x:void 0)?t:d3.extent(this.data,function(t){return t.x})),this.options.scales.y.range([this.height,0]).domain(null!=(n=null!=(i=this.options.domains)?i.y:void 0)?n:d3.extent(this.data,function(t){return t.y}))},e.prototype.setLineSize=function(){var t,e;if(this.line.x((e=this,function(t){return e.options.scales.x(t.x)})).y(function(t){return function(e){return t.options.scales.y(e.y)}}(this)),null!=(t=_.last(this.data)))return this.svgEndCircle.attr("transform","translate("+this.options.scales.x(t.x)+", "+this.options.scales.y(t.y)+")")},e.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},e.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},e.prototype.drawLine=function(){return this.svgLine.attr("stroke-dasharray",0).attr("d",this.line)},e.prototype.reveal=function(){var t;return null==this.data[0]?this.hide():(this.recalc(),this.svgLine.attr("d",this.line),t=this.svgLine.node().getTotalLength(),this.svgEndCircle.attr("opacity",0),this.svgLine.attr("stroke-dasharray",t).attr("stroke-dashoffset",t).transition().delay(400).duration(1e3).ease(d3.easeSinOut).attr("stroke-dashoffset",0).attr("opacity",1),this.svgEndCircle.transition().delay(1300).duration(300).ease(d3.easeSinOut).attr("opacity",1))},e.prototype.recalc=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.setLineSize(),this.setHoverAreaSize()},e.prototype.resize=function(){return this.recalc(),this.drawLine()},e.prototype.hoverEnd=function(){return Fade.out(this.svgHoverMark.node()),$.publish("fancy-chart:hover-"+this.options.hoverId+":end")},e.prototype.hoverRefresh=function(){var t,e,n,i,s;if(null!=this.options.hoverId&&(null!=this.data[0]&&(i=this.options.scales.x.invert(d3.mouse(this.svgHoverArea.node())[0]-this.margins.left),null!=(n=this.lookupIndexFromX(i)))))return Fade.in(this.svgHoverMark.node()),Timeout.clear(this._hoverTimeout),this._hoverTimeout=Timeout.set(3e3,this.hoverEnd),e=0===n?this.data[0]:n>=this.data.length?_.last(this.data):i-this.data[n-1].x<=this.data[n].x-i?this.data[n-1]:this.data[n],t=["x","y"].map((s=this,function(t){return s.options.scales[t](e[t])})),this.svgHoverMark.attr("transform","translate("+t.join(", ")+")"),$.publish("fancy-chart:hover-"+this.options.hoverId+":refresh",{data:e})},e.prototype.lookupIndexFromX=function(t){return d3.bisector(function(t){return t.x}).left(this.data,t)},e}()}).call(window)},"E/7X":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Forum=function(){function e(){this.jumpToSubmit=t(this.jumpToSubmit,this),this.showMore=t(this.showMore,this),this.postUrlClick=t(this.postUrlClick,this),this.initialScrollTo=t(this.initialScrollTo,this),this.scrollTo=t(this.scrollTo,this),this.keyboardNavigation=t(this.keyboardNavigation,this),this.jumpTo=t(this.jumpTo,this),this.refreshCounter=t(this.refreshCounter,this),this.refreshLoadMoreLinks=t(this.refreshLoadMoreLinks,this),this.lastPostLoaded=t(this.lastPostLoaded,this),this.firstPostLoaded=t(this.firstPostLoaded,this),this.endPost=t(this.endPost,this),this.setCounter=t(this.setCounter,this),this.setTotalPosts=t(this.setTotalPosts,this),this.totalPosts=t(this.totalPosts,this),this.postPosition=t(this.postPosition,this),this.boot=t(this.boot,this),this._totalPostsDiv=document.getElementsByClassName("js-forum__total-count"),this._deletedPostsDiv=document.getElementsByClassName("js-forum__deleted-count"),this._firstPostDiv=document.getElementsByClassName("js-forum__topic-first-post-id"),this._userCanModerateDiv=document.getElementsByClassName("js-forum__topic-user-can-moderate"),this._postsCounter=document.getElementsByClassName("js-forum__posts-counter"),this._postsProgress=document.getElementsByClassName("js-forum__posts-progress"),this.posts=document.getElementsByClassName("js-forum-post"),this.loadMoreLinks=document.getElementsByClassName("js-forum-posts-show-more"),this.maxPosts=250,$(document).on("turbolinks:load osu:page:change",this.boot),$(window).on("throttled-scroll",this.refreshCounter),$(document).on("click",".js-forum-posts-show-more",this.showMore),$(document).on("click",".js-post-url",this.postUrlClick),$(document).on("submit",".js-forum-posts-jump-to",this.jumpToSubmit),$(document).on("keyup",this.keyboardNavigation)}return e.prototype.boot=function(){return this.refreshCounter(),this.refreshLoadMoreLinks(),this.initialScrollTo()},e.prototype.userCanModerate=function(){return"1"===this._userCanModerateDiv[0].getAttribute("data-user-can-moderate")},e.prototype.postPosition=function(t){return parseInt(t.getAttribute("data-post-position"),10)},e.prototype.firstPostId=function(){return parseInt(this._firstPostDiv[0].getAttribute("data-first-post-id"),10)},e.prototype.postId=function(t){return parseInt(t.getAttribute("data-post-id"),10)},e.prototype.totalPosts=function(){return 0===this._totalPostsDiv.length?null:parseInt(this._totalPostsDiv[0].dataset.total,10)},e.prototype.setTotalPosts=function(t){return $(this._totalPostsDiv).text(osu.formatNumber(t)).attr("data-total",t)},e.prototype.deletedPosts=function(){return 0===this._deletedPostsDiv.length?null:parseInt(this._deletedPostsDiv[0].dataset.total,10)},e.prototype.setDeletedPosts=function(t){return $(this._deletedPostsDiv).text(osu.formatNumber(t)).attr("data-total",t)},e.prototype.setCounter=function(t){return this.currentPostPosition=this.postPosition(t),this.currentPostPosition>this.totalPosts()&&this.setTotalPosts(this.currentPostPosition),window.reloadUrl=this.postUrlN(this.currentPostPosition),this._postsCounter[0].textContent=osu.formatNumber(this.currentPostPosition),this._postsProgress[0].style.width=100*this.currentPostPosition/this.totalPosts()+"%"},e.prototype.endPost=function(){return this.posts[this.posts.length-1]},e.prototype.firstPostLoaded=function(){return this.postId(this.posts[0])===this.firstPostId()},e.prototype.lastPostLoaded=function(){return this.postPosition(this.endPost())===this.totalPosts()},e.prototype.refreshLoadMoreLinks=function(){var t,e;if(this.loadMoreLinks.length)return t=this.firstPostLoaded(),$(".js-header--main").toggleClass("hidden",!t),$(".js-header--alt").toggleClass("hidden",t),e=this.lastPostLoaded(),$(".js-forum__posts-show-more--next").toggleClass("hidden",e),this.userCanModerate()||$(".js-post-delete-toggle").hide(),e?$(this.endPost()).find(".js-post-delete-toggle").css({display:""}):void 0},e.prototype.refreshCounter=function(){var t,e,n,i,s,o;if(0!==this._postsCounter.length){if(t=null,osu.bottomPage())t=this.posts[this.posts.length-1];else for(e=0,n=(o=this.posts).length;e<n&&(s=(i=o[e]).getBoundingClientRect().top,Math.floor(window.stickyHeader.scrollOffset(s))<=0);e++)t=i;return null==t&&(t=this.posts[0]),this.setCounter(t)}},e.prototype.jumpTo=function(t){var e;return t=parseInt(t,10),!!isFinite(t)&&(t=Math.max(t,1),t=Math.min(t,this.totalPosts()),e=$(".js-forum-post[data-post-position='"+t+"']"),this._postsCounter[0].textContent=osu.formatNumber(t),e.length?this.scrollTo(e.attr("data-post-id")):Turbolinks.visit(this.postUrlN(t)),!0)},e.prototype.keyboardNavigation=function(t){var e;if(!osu.isInputElement(t.target)&&this._postsCounter.length){t.preventDefault(),e=function(){switch(t.which){case 37:return this.currentPostPosition-1;case 39:return this.currentPostPosition+1}}.call(this);try{return this.jumpTo(e)}catch(t){}}},e.prototype.scrollTo=function(t){var e,n;if(e=document.querySelector(".js-forum-post[data-post-id='"+t+"']"))return 0!==(n=1===this.postPosition(e)?0:$(e).offset().top)&&(n=window.stickyHeader.scrollOffset(n)),window.scrollTo(window.pageXOffset,n),this.highlightPost(e)},e.prototype.highlightPost=function(t){return $(".js-forum-post--highlighted").removeClass("js-forum-post--highlighted"),$(t).addClass("js-forum-post--highlighted")},e.prototype.initialScrollTo=function(){if(""===location.hash&&null!=window.postJumpTo&&0!==window.postJumpTo)return this.scrollTo(window.postJumpTo),window.postJumpTo=0},e.prototype.postUrlClick=function(t){var e;return t.preventDefault(),e=$(t.target).closest(".js-forum-post").attr("data-post-id"),this.scrollTo(e)},e.prototype.postUrlN=function(t){return document.location.pathname+"?n="+t},e.prototype.showMore=function(t){var e,n,i,s,o;if(t.preventDefault(),!t.currentTarget.classList.contains("js-disabled"))return e=$(t.currentTarget),s={start:null,end:null,skip_layout:1},"previous"===(i=e.data("mode"))?(n=$(".js-forum-post").first(),s.end=n.data("post-id")-1):(n=$(".js-forum-post").last(),s.start=n.data("post-id")+1),e.addClass("js-disabled"),$.get(window.canonicalUrl,s).done((o=this,function(t){var s,r,a,u,l,c,h,p,d,m,f,g;if(p=(h=n[0]).getBoundingClientRect().top,"previous"===i?(e.after(t),f=o.maxPosts,m=o.posts.length):(e.before(t),f=0,m=o.posts.length-o.maxPosts),f<m)for(u=o.posts[0].parentNode,r=0,a=(c=_.slice(o.posts,f,m)).length;r<a;r++)l=c[r],u.removeChild(l);return o.refreshLoadMoreLinks(),g=window.pageXOffset,s=h.getBoundingClientRect().top,d=window.pageYOffset+s-p,window.scrollTo(g,d),osu.pageChange(),e.attr("data-failed","0")})).always(function(){return e.removeClass("js-disabled")}).fail(function(){return e.attr("data-failed","1")})},e.prototype.jumpToSubmit=function(t){if(t.preventDefault(),LoadingOverlay.hide(),this.jumpTo($(t.target).find('[name="n"]').val()))return $.publish("forum:topic:jumpTo")},e}()}).call(window)},EVQW:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TwitchPlayer=function(){function e(e){this.turbolinksReload=e,this.openPlayer=t(this.openPlayer,this),this.noCookieDiv=t(this.noCookieDiv,this),this.start=t(this.start,this),this.startAll=t(this.startAll,this),this.initializeEmbed=t(this.initializeEmbed,this),this.playerDivs=document.getElementsByClassName("js-twitch-player"),addEventListener("turbolinks:load",this.startAll)}return e.prototype.initializeEmbed=function(){return this.turbolinksReload.load("https://player.twitch.tv/js/embed/v1.js",this.startAll)},e.prototype.startAll=function(){var t,e,n,i,s;if(0!==this.playerDivs.length){if("undefined"==typeof Twitch||null===Twitch)return this.initializeEmbed();for(s=[],e=0,n=(i=this.playerDivs).length;e<n;e++)t=i[e],s.push(this.start(t));return s}},e.prototype.start=function(t){var e,n;if(!t.dataset.twitchPlayerStarted)return t.dataset.twitchPlayerStarted=!0,e={width:"100%",height:"100%",channel:t.dataset.channel},new Twitch.Player(t.id,e).addEventListener(Twitch.Player.PLAY,(n=this,function(){return n.openPlayer(t)}))},e.prototype.noCookieDiv=function(t){return document.querySelector(".js-twitch-player--no-cookie[data-player-id='"+t+"']")},e.prototype.openPlayer=function(t){if(t.classList.contains("hidden"))return t.classList.remove("hidden"),Fade.out(this.noCookieDiv(t.id))},e}()}).call(window)},EaeJ:function(t,e){(function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;t=ReactDOMFactories.a,e=ReactDOMFactories.div,n=ReactDOMFactories.p,React.createElement,this.ChangelogHeaderStreams=function(o){function r(){return this.renderHeaderStream=i(this.renderHeaderStream,this),this.render=i(this.render,this),r.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,React.PureComponent),r.prototype.render=function(){var t;return e({className:osu.classWithModifiers("update-streams-v2",[null!=this.props.currentStreamId?"with-active":void 0])},e({className:"update-streams-v2__container"},function(){var e,n,i,s;for(s=[],e=0,n=(i=this.props.updateStreams).length;e<n;e++)t=i[e],s.push(this.renderHeaderStream({stream:t}));return s}.call(this)))},r.prototype.renderHeaderStream=function(i){var s,o,r;return o=i.stream,r=_.kebabCase(o.display_name),s=osu.classWithModifiers("update-streams-v2__item",[r,o.is_featured?"featured":void 0,this.props.currentStreamId===o.id?"active":void 0]),s+=" t-changelog-stream--"+r,t({href:Url.changelogBuild(o.latest_build),key:o.id,className:s},e({className:"update-streams-v2__bar u-changelog-stream--bg"}),n({className:"update-streams-v2__row update-streams-v2__row--name"},o.display_name),n({className:"update-streams-v2__row update-streams-v2__row--version"},o.latest_build.display_version),o.user_count[0]>0?n({className:"update-streams-v2__row update-streams-v2__row--users"},osu.transChoice("changelog.builds.users_online",o.user_count[0])):void 0)},r}()}).call(window)},Ee0K:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function t(e){return void 0!==e&&e?(e.offsetTop||0)+t(e.offsetParent):0}},EhQP:function(t,e){(function(){this.StoreSupporterTagPrice=function(){function t(t){this._price=t}return t.durationToPrice=function(t){switch(t=+t,!1){case!(t>=12):return Math.ceil(t/12*26);case 10!==t:return 24;case 9!==t:return 22;case 8!==t:return 20;case 6!==t:return 16;case 4!==t:return 12;case 2!==t:return 8;case 1!==t:return 4}},t.prototype.price=function(){return this._price},t.prototype.duration=function(){return null!=this._duration?this._duration:this._duration=function(){switch(!1){case!(this._price>=26):return Math.floor(this._price/26*12);case!(this._price>=24):return 10;case!(this._price>=22):return 9;case!(this._price>=20):return 8;case!(this._price>=16):return 6;case!(this._price>=12):return 4;case!(this._price>=8):return 2;case!(this._price>=4):return 1;default:return 0}}.call(this)},t.prototype.pricePerMonth=function(){return osu.formatNumber(this._price/this.duration(),2)},t.prototype.discount=function(){var t;return this.duration()>=12?46:(t=100*(1-this._price/this.duration()/4),Math.max(0,Math.round(t,0)))},t.prototype.discountText=function(){return osu.trans("store.discount",{percent:this.discount()})},t.prototype.durationInYears=function(){return{years:Math.floor(this.duration()/12),months:Math.floor(this.duration()%12)}},t.prototype.durationText=function(){var t,e;return e=[],(t=this.durationInYears()).years>0&&e.push(osu.transChoice("common.count.years",t.years)),t.months>0&&e.push(osu.transChoice("common.count.months",t.months)),e.join(", ")},t}()}).call(window)},F0kA:function(t,e,n){var i,s,o;s=[t,e],void 0===(o="function"==typeof(i=function(t,e){"use strict";var n,i,s="function"==typeof Map?new Map:(n=[],i=[],{has:function(t){return n.indexOf(t)>-1},get:function(t){return i[n.indexOf(t)]},set:function(t,e){-1===n.indexOf(t)&&(n.push(t),i.push(e))},delete:function(t){var e=n.indexOf(t);e>-1&&(n.splice(e,1),i.splice(e,1))}}),o=function(t){return new Event(t,{bubbles:!0})};try{new Event("test")}catch(t){o=function(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!1),e}}function r(t){if(t&&t.nodeName&&"TEXTAREA"===t.nodeName&&!s.has(t)){var e=null,n=null,i=null,r=function(){t.clientWidth!==n&&h()},a=function(e){window.removeEventListener("resize",r,!1),t.removeEventListener("input",h,!1),t.removeEventListener("keyup",h,!1),t.removeEventListener("autosize:destroy",a,!1),t.removeEventListener("autosize:update",h,!1),Object.keys(e).forEach(function(n){t.style[n]=e[n]}),s.delete(t)}.bind(t,{height:t.style.height,resize:t.style.resize,overflowY:t.style.overflowY,overflowX:t.style.overflowX,wordWrap:t.style.wordWrap});t.addEventListener("autosize:destroy",a,!1),"onpropertychange"in t&&"oninput"in t&&t.addEventListener("keyup",h,!1),window.addEventListener("resize",r,!1),t.addEventListener("input",h,!1),t.addEventListener("autosize:update",h,!1),t.style.overflowX="hidden",t.style.wordWrap="break-word",s.set(t,{destroy:a,update:h}),"vertical"===(u=window.getComputedStyle(t,null)).resize?t.style.resize="none":"both"===u.resize&&(t.style.resize="horizontal"),e="content-box"===u.boxSizing?-(parseFloat(u.paddingTop)+parseFloat(u.paddingBottom)):parseFloat(u.borderTopWidth)+parseFloat(u.borderBottomWidth),isNaN(e)&&(e=0),h()}var u;function l(e){var n=t.style.width;t.style.width="0px",t.offsetWidth,t.style.width=n,t.style.overflowY=e}function c(){if(0!==t.scrollHeight){var i=function(t){for(var e=[];t&&t.parentNode&&t.parentNode instanceof Element;)t.parentNode.scrollTop&&e.push({node:t.parentNode,scrollTop:t.parentNode.scrollTop}),t=t.parentNode;return e}(t),s=document.documentElement&&document.documentElement.scrollTop;t.style.height="",t.style.height=t.scrollHeight+e+"px",n=t.clientWidth,i.forEach(function(t){t.node.scrollTop=t.scrollTop}),s&&(document.documentElement.scrollTop=s)}}function h(){c();var e=Math.round(parseFloat(t.style.height)),n=window.getComputedStyle(t,null),s="content-box"===n.boxSizing?Math.round(parseFloat(n.height)):t.offsetHeight;if(s<e?"hidden"===n.overflowY&&(l("scroll"),c(),s="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight):"hidden"!==n.overflowY&&(l("hidden"),c(),s="content-box"===n.boxSizing?Math.round(parseFloat(window.getComputedStyle(t,null).height)):t.offsetHeight),i!==s){i=s;var r=o("autosize:resized");try{t.dispatchEvent(r)}catch(t){}}}}function a(t){var e=s.get(t);e&&e.destroy()}function u(t){var e=s.get(t);e&&e.update()}var l=null;"undefined"==typeof window||"function"!=typeof window.getComputedStyle?((l=function(t){return t}).destroy=function(t){return t},l.update=function(t){return t}):((l=function(t,e){return t&&Array.prototype.forEach.call(t.length?t:[t],function(t){return r(t)}),t}).destroy=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],a),t},l.update=function(t){return t&&Array.prototype.forEach.call(t.length?t:[t],u),t}),e.default=l,t.exports=e.default})?i.apply(e,s):i)||(t.exports=o)},FLFi:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ChangelogChartLoader=function(){function e(){this.resize=t(this.resize,this),this.initialize=t(this.initialize,this),$(window).on("throttled-resize",this.resize),$(document).on("turbolinks:load",this.initialize)}return e.prototype.container=document.getElementsByClassName("js-changelog-chart"),e.prototype.initialize=function(){if(null!=this.container[0])return this.container[0]._chart=new ChangelogChart(this.container[0]),this.container[0]._chart.loadData()},e.prototype.resize=function(){var t;return null!=(t=this.container[0])?t._chart.resize():void 0},e}()}).call(window)},FP4j:function(t,e){t.exports=function(t,e,n){return((n=window.getComputedStyle)?n(t):t.currentStyle)[e.replace(/-(\w)/gi,function(t,e){return e.toUpperCase()})]}},FVE9:function(t,e){(function(){var t,e,n,i,s,o,r=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;i=React.createElement,e=ReactDOMFactories.button,n=ReactDOMFactories.div,s=ReactDOMFactories.i,o=ReactDOMFactories.span,t="user-action-button",this.FriendButton=function(u){function l(t){var e,n,i;this.isVisible=r(this.isVisible,this),this.followers=r(this.followers,this),this.renderIcon=r(this.renderIcon,this),this.renderCounter=r(this.renderCounter,this),this.render=r(this.render,this),this.componentWillUnmount=r(this.componentWillUnmount,this),this.componentDidMount=r(this.componentDidMount,this),this.refresh=r(this.refresh,this),this.clicked=r(this.clicked,this),this.updateFriends=r(this.updateFriends,this),this.requestDone=r(this.requestDone,this),l.__super__.constructor.call(this,t),this.button=React.createRef(),this.eventId="friendButton-"+this.props.userId+"-"+osu.uuid(),n=_.find(currentUser.friends,{target_id:t.userId}),e=null!=(i=this.props.followers)?i:0,null!=n&&(e-=1),this.state={friend:n,followersWithoutSelf:e}}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(l,React.PureComponent),l.defaultProps={showFollowerCounter:!1,alwaysVisible:!1},l.prototype.requestDone=function(){return this.setState({loading:!1})},l.prototype.updateFriends=function(t){return this.setState({friend:_.find(t,{target_id:this.props.userId})},function(){return currentUser.friends=t,$.publish("user:update",currentUser),$.publish("friendButton:refresh")})},l.prototype.clicked=function(t){return this.setState({loading:!0}),null!=this.state.friend?this.xhr=$.ajax({type:"DELETE",url:laroute.route("friends.destroy",{friend:this.props.userId})}):this.xhr=$.ajax({type:"POST",url:laroute.route("friends.store",{target:this.props.userId})}),this.xhr.done(this.updateFriends).fail(osu.emitAjaxError(this.button.current)).always(this.requestDone)},l.prototype.refresh=function(t){return this.setState({friend:_.find(currentUser.friends,{target_id:this.props.userId})},function(){},this.forceUpdate())},l.prototype.componentDidMount=function(){return $.subscribe("friendButton:refresh."+this.eventId,this.refresh)},l.prototype.componentWillUnmount=function(){var t;return $.unsubscribe("."+this.eventId),null!=(t=this.xhr)?t.abort():void 0},l.prototype.render=function(){var i,s,o,r,a,u,l,c,h;if(r=this.isVisible(),!this.props.alwaysVisible){if(!r)return null!=(u=this.props.container)&&u.classList.add("hidden"),null;null!=(a=this.props.container)&&a.classList.remove("hidden")}return i=osu.classWithModifiers(t,this.props.modifiers),o=(null!=(l=null!=(c=currentUser.friends)?c.length:void 0)?l:0)>=currentUser.max_friends,h=function(){switch(!1){case!!r:return osu.trans("friends.buttons.disabled");case null==this.state.friend:return osu.trans("friends.buttons.remove");case!o:return osu.trans("friends.too_many");default:return osu.trans("friends.buttons.add")}}.call(this),s=!r||this.state.loading||o&&null==this.state.friend,null==this.state.friend||this.state.loading||(this.state.friend.mutual?i+=" "+t+"--mutual":i+=" "+t+"--friend"),n({title:h},e({type:"button",className:i,onClick:this.clicked,ref:this.button,disabled:s},this.renderIcon({isFriendLimit:o,isVisible:r}),this.renderCounter()))},l.prototype.renderCounter=function(){if(this.props.showFollowerCounter&&null!=this.props.followers)return o({className:t+"__counter"},osu.formatNumber(this.followers()))},l.prototype.renderIcon=function(e){var n,r;return n=e.isFriendLimit,r=e.isVisible,o({className:t+"__icon-container"},function(){switch(!1){case!this.state.loading:return i(Spinner);case!!r:return s({className:"fas fa-user"});case null==this.state.friend:return[o({key:"hover",className:t+"__icon "+t+"__icon--hover-visible"},s({className:"fas fa-user-times"})),this.state.friend.mutual?o({key:"normal-mutual",className:t+"__icon "+t+"__icon--hover-hidden"},s({className:"fas fa-user"}),s({className:"fas fa-user"})):o({key:"normal",className:t+"__icon "+t+"__icon--hover-hidden"},s({className:"fas fa-user"}))];default:return s({className:n?"fas fa-user":"fas fa-user-plus"})}}.call(this))},l.prototype.followers=function(){return this.state.followersWithoutSelf+(null!=this.state.friend?1:0)},l.prototype.isVisible=function(){return null!=currentUser.id&&_.isFinite(this.props.userId)&&this.props.userId!==currentUser.id&&!_.find(currentUser.blocks,{target_id:this.props.userId})},l}()}).call(window)},FcZw:function(t,e){(function(){var t,e,n;e=document.getElementsByClassName("js-loading-overlay"),n=function(){if(0!==e.length)return e[0].classList.add("loading-overlay--visible")},n=_.debounce(n,5e3,{maxWait:5e3}),t=function(){if(0!==e.length)return n.cancel(),e[0].classList.remove("loading-overlay--visible")},this.LoadingOverlay={show:n,hide:t}}).call(window)},GJGg:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=n("cDcd"),r=p(o),a=p(n("faye")),u=p(n("rf6O")),l=p(n("U3GY")),c=p(n("6TfI")),h=p(n("qrrn"));function p(t){return t&&t.__esModule?t:{default:t}}e.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:h.default;return function(n){var h,p;return p=h=function(u){function h(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,h);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(h.__proto__||Object.getPrototypeOf(h)).call(this,e));return n._isMounted=!1,n.options=i({container:"undefined"!=typeof window?window:void 0},t),n.state={firstItemIndex:0,lastItemIndex:-1},t&&t.initialState&&(n.state=i({},n.state,t.initialState)),n.refreshState=n.refreshState.bind(n),"undefined"!=typeof window&&"requestAnimationFrame"in window&&(n.refreshState=(0,c.default)(n.refreshState)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(h,o.PureComponent),s(h,[{key:"setStateIfNeeded",value:function(t,e,n,i,s){var o=(0,l.default)(t,e,n,i,s);void 0!==o&&(o.firstItemIndex>o.lastItemIndex||o.firstItemIndex===this.state.firstItemIndex&&o.lastItemIndex===this.state.lastItemIndex||this.setState(o))}},{key:"refreshState",value:function(){if(this._isMounted){var t=this.props,e=t.itemHeight,n=t.items,i=t.itemBuffer;this.setStateIfNeeded(this.domNode,this.options.container,n,e,i)}}},{key:"componentWillMount",value:function(){this._isMounted=!0}},{key:"componentDidMount",value:function(){this.domNode=a.default.findDOMNode(this),this.refreshState(),this.options.container.addEventListener("scroll",this.refreshState),this.options.container.addEventListener("resize",this.refreshState)}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.options.container.removeEventListener("scroll",this.refreshState),this.options.container.removeEventListener("resize",this.refreshState)}},{key:"componentWillReceiveProps",value:function(t){var e=t.itemHeight,n=t.items,i=t.itemBuffer;this.setStateIfNeeded(this.domNode,this.options.container,n,e,i)}},{key:"render",value:function(){return r.default.createElement(n,i({},this.props,e(this.props,this.state)))}}]),h}(),h.propTypes={items:u.default.array.isRequired,itemHeight:u.default.number.isRequired,itemBuffer:u.default.number},h.defaultProps={itemBuffer:0},p}}},GLyB:function(t,e){(function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;e=ReactDOMFactories.div,t=ReactDOMFactories.a,n=ReactDOMFactories.i,React.createElement,this.TrackPreview=function(o){function r(t){this.previewStop=i(this.previewStop,this),this.previewPlay=i(this.previewPlay,this),r.__super__.constructor.call(this,t),this.state={playing:!1}}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,React.Component),r.prototype.componentDidMount=function(){return this.eventId="trackpreview-"+this.props.track.id,$.subscribe("osuAudio:initializing."+this.eventId,this.previewPlay),$.subscribe("osuAudio:ended."+this.eventId,this.previewStop)},r.prototype.componentWillUnmount=function(){return $.unsubscribe("."+this.eventId)},r.prototype.render=function(){var i;return this.props.track.cover_url&&!this.props.track.album_id&&(i={backgroundImage:osu.urlPresence(this.props.track.cover_url)}),e({className:"tracklist__cover",style:i},t({className:"tracklist__preview js-audio--play",href:"#","data-audio-url":this.props.track.preview},n({className:"fas "+(this.state.playing?"fa-pause":"fa-play")})))},r.prototype.previewPlay=function(t,e){return e.url!==this.props.track.preview?this.previewStop():this.setState({playing:!0})},r.prototype.previewStop=function(t){if(this.state.playing)return this.setState({playing:!1})},r}()}).call(window)},GXtz:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.OsuAudio=function(){function e(){var e;this.urlSet=t(this.urlSet,this),this.urlGet=t(this.urlGet,this),this.stop=t(this.stop,this),this.publish=t(this.publish,this),this.playing=t(this.playing,this),this.player=t(this.player,this),this.play=t(this.play,this),this._player=document.getElementsByClassName("js-audio"),$(document).on("click",".js-audio--play",this.play),$(document).on("turbolinks:load",(e=this,function(){return e.player().addEventListener("playing",e.playing),e.player().addEventListener("ended",e.stop),e.player().volume=.45}))}return e.prototype.play=function(t){var e;return t.preventDefault(),(e=t.currentTarget.dataset.audioUrl)===this.urlGet()?this.stop():(this.urlSet(e),this.publish("initializing"),this.player().play())},e.prototype.player=function(){return this._player[0]},e.prototype.playing=function(){return this.publish("playing")},e.prototype.publish=function(t){return $.publish("osuAudio:"+t,{url:this.urlGet(),player:this.player()})},e.prototype.stop=function(){return this.player().pause(),this.player().currentTime=0,this.urlSet(""),this.publish("ended")},e.prototype.urlGet=function(){return this.player().getAttribute("src")},e.prototype.urlSet=function(t){return this.player().setAttribute("src",t)},e}()}).call(window)},"Go/u":function(t,e){(function(){var t,e,n;n=function(){return StoreCart.setEnabled(!1),$("#username-check-price").text("")},t=function(){var t,e;return t=$("#username-check-status"),e=$("#username.form-control").val(),$.post(laroute.route("users.check-username-availability"),{username:e}).done(function(e){if(e.username===$("#username.form-control").val())return e.available?($(".js-store-add-to-cart").attr("disabled",!1),$("#username-check-price").text(e.costString),$("#username-form-price").val(e.cost),$("#product-form").data("disabled",!1)):n(),t.html(e.message),t.toggleClass("green-dark",e.available),t.toggleClass("pink-dark",!e.available)}).fail(function(t){if(401===t.status)return osu.popup(osu.trans("errors.logged_out"),"danger")})},e=_.debounce(t,300),$(document).on("input",".js-username-change #username.form-control",function(){var t,i;return t=$("#username-check-status"),i=$("#username.form-control").val(),t.removeClass("green-dark"),t.removeClass("pink-dark"),n(),0===i.length?t.text(osu.trans("store.username_change.check")):(t.text(osu.trans("store.username_change.checking",{username:i})),e())}),$(document).on("turbolinks:load",function(){if(0!==$(".js-username-change #username.form-control").length)return n()})}).call(window)},GwZD:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.RadarChart=function(){function e(e,n){var i,s;this.options=null!=n?n:{},this.resize=t(this.resize,this),this.loadData=t(this.loadData,this),this.margins={top:30,right:30,bottom:0,left:30},(i=this.options).scale||(i.scale=d3.scaleLinear()),this.area=d3.select(e),this.svg=this.area.append("svg"),this.angleStep=2*Math.PI/this.options.axes,this.svgWrapper=this.svg.append("g"),s=this.svgWrapper.append("g"),this.circles=function(){var t,e,n;for(n=[],t=0,e=this.options.ticks-1;0<=e?t<=e:t>=e;0<=e?++t:--t)n.push(s.append("circle").classed(this.options.className+"__circle",!0));return n}.call(this),this.axes=function(){var t,e,n;for(n=[],t=0,e=this.options.axes-1;0<=e?t<=e:t>=e;0<=e?++t:--t)s=this.svgWrapper.append("g"),n.push({axis:s.append("line").classed(this.options.className+"__axis",!0),dots:function(){var t,e,n;for(n=[],t=0,e=this.options.dots-1;0<=e?t<=e:t>=e;0<=e?++t:--t)n.push(s.append("circle").classed(this.options.className+"__dot",!0));return n}.call(this),label:s.append("text").classed(this.options.className+"__label",!0)});return n}.call(this),this.centerDot=this.svgWrapper.append("circle").classed(this.options.className+"__dot",!0),this.selectedArea=this.svgWrapper.append("path").classed(this.options.className+"__area",!0),this.pointsGroup=this.svgWrapper.append("g")}return e.prototype.loadData=function(t){return this.values=t,this.resize(!0)},e.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect().width,this.options.maxWidth&&t>this.options.maxWidth&&(t=this.options.maxWidth),this.diameter=t-(this.margins.left+this.margins.right),this.radius=this.diameter/2,this.dotRadius=t/200,this.center={x:this.radius,y:this.radius}},e.prototype.setScalesRange=function(){return this.options.scale.range([0,this.radius]).domain(this.options.domain)},e.prototype.setSvgSize=function(){return this.svg.attr("width",this.diameter+(this.margins.left+this.margins.right)).attr("height",this.diameter+(this.margins.top+this.margins.bottom))},e.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},e.prototype.setCirclesSize=function(){var t,e,n,i,s;for(n=this.radius/this.options.ticks,t=e=0,i=(s=this.circles).length;e<i;t=++e)s[t].attr("cx",this.center.x).attr("cy",this.center.y).attr("r",n*(t+1));return this.centerDot.attr("cx",this.center.x).attr("cy",this.center.y).attr("r",this.dotRadius)},e.prototype.setAxesSize=function(){var t,e,n,i,s,o,r,a,u,l,c,h,p,d,m,f,g,v,y,b,_,w;for(this.angleStep=2*Math.PI/this.options.axes,t=Math.PI/2,a=this.radius/this.options.dots,v=this.center.x,_=this.center.y,y=this.center.x,w=this.center.y-this.radius,f=[],i=o=0,u=(c=this.axes).length;o<u;i=++o){for((e=c[i]).axis.attr("x1",v).attr("y1",_).attr("x2",y).attr("y2",w),y=(h=this._rotatePoint(v,_,y,w,this.angleStep))[0],w=h[1],s=r=0,l=(p=e.dots).length;r<l;s=++r)n=p[s],g=(d=this._extendPoint(this.center.x,this.center.y,a*(s+1),t))[0],b=d[1],n.attr("cx",g).attr("cy",b).attr("r",this.dotRadius);g=(m=this._extendPoint(this.center.x,this.center.y,this.radius+10,t))[0],b=m[1],e.label.attr("x",g).attr("y",b).attr("text-anchor",g>this.center.x?"start":g<this.center.x?"end":"middle").text(this.values[i].label),f.push(t+=this.angleStep)}return f},e.prototype.calculatePoints=function(){return this.data=this.values.map((t=this,function(e,n){var i,s,o;return s=t.options.scale(e.value),i=Math.PI/2+t.angleStep*n,{x:(o=t._extendPoint(t.center.x,t.center.y,s,i))[0],y:o[1]}}));var t},e.prototype.drawArea=function(t){var e,n;return n=d3.line().x(function(t){return t.x}).y(function(t){return t.y}).interpolate("linear-closed"),e=this.selectedArea,t&&(e=e.transition()),e.attr("d",n(this.data))},e.prototype._extendPoint=function(t,e,n,i){var s;return s=Math.sin(i),[t+n*Math.cos(i),e-n*s]},e.prototype._rotatePoint=function(t,e,n,i,s){var o,r;return r=Math.sin(s),[t+((n-=t)*(o=Math.cos(s))+(i-=e)*r),e+(i*o-n*r)]},e.prototype.resize=function(t){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.setCirclesSize(),this.setAxesSize(),this.calculatePoints(),this.drawArea(t)},e}()}).call(window)},HRtH:function(t,e){(function(){$(document).on("ajax:success",".js-logout-link",function(){return localStorage.clear(),osu.reloadPage()})}).call(window)},HZVD:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StatusChart=function(){function e(e,n){var i,s,o,r;this.set=t(this.set,this),this.ratio=2*Math.PI,r=$(e).width(),i=$(e).height(),s=(o=Math.min(r,i)/2)/4.7*4,this.defaultArc=d3.arc().innerRadius(s).outerRadius(o).startAngle(0),this.svg=d3.select(e).append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 "+Math.min(r,i)+" "+Math.min(r,i)).attr("preserveAspectRatio","xMinYMin").append("g").attr("transform","translate("+Math.min(r,i)/2+", "+Math.min(r,i)/2+")"),this.text=this.svg.append("text").text(n).attr("dy",-8).classed("status-chart__text",!0),this.percentage=this.svg.append("text").attr("dy",20).classed("status-chart__text status-chart__text--percentage",!0),this.background=this.svg.append("path").datum({endAngle:this.ratio}).classed("status-chart__background",!0).attr("d",this.defaultArc),this.upArc=this.svg.append("path").datum({endAngle:0}).classed("status-chart__up-arc",!0).attr("d",this.defaultArc),this.downArc=this.svg.append("path").datum({endAngle:0}).classed("status-chart__down-arc",!0).attr("d",this.defaultArc)}return e.prototype.parse=function(t){return this.ratio*t/100},e.prototype.set=function(t){var e,n;return n=this,e=function(t,e){return t.attrTween("d",function(t){var i;return i=d3.interpolate(t.endAngle,e),function(e){return t.endAngle=i(e),n.percentage.text(Math.round(t.endAngle/n.ratio*100)+"%"),n.defaultArc(t)}})},this.downArc.transition().duration(750).call(e,-this.parse(t.down)),this.upArc.transition().duration(750).call(e,this.parse(t.up))},e}()}).call(window)},IBdx:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TooltipBeatmap=function(){function e(){this.onMouseOver=t(this.onMouseOver,this),$(document).on("mouseover touchstart",".js-beatmap-tooltip",this.onMouseOver)}return e.prototype.tmpl=_.template('<div class="tooltip-beatmap__text tooltip-beatmap__text--title"><%- beatmapTitle %></div><div class="tooltip-beatmap__text tooltip-beatmap__text--<%- difficulty %>"><%- stars %> <i class="fas fa-star" aria-hidden="true"></i></div>'),e.prototype.onMouseOver=function(t){var e,n,i,s,o;if(null!=(i=t.currentTarget).dataset.beatmapTitle){if(n=this.tmpl(i.dataset),!i._tooltip)return e=null!=(o=i.dataset.tooltipPosition)?o:"top center",s={overwrite:!1,content:n,position:{my:function(){switch(e){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center"}}(),at:e,viewport:$(window)},show:{event:t.type,ready:!0},hide:{event:"click mouseleave"},style:{classes:"qtip tooltip-beatmap",tip:{width:10,height:9}}},"touchstart"===t.type&&(s.hide={inactive:3e3}),$(i).qtip(s,t),i._tooltip=!0;$(i).qtip("set",{"content.text":n})}},e}()}).call(window)},ICEo:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicPostJump=function(){function e(e){this.forum=e,this.start=t(this.start,this),this.keyup=t(this.keyup,this),this.end=t(this.end,this),$(document).on("click",".js-forum-topic-post-jump--cover",this.start),$(document).on("blur",".js-forum-topic-post-jump--input",this.end),$(document).on("keyup",".js-forum-topic-post-jump--input",this.keyup),$.subscribe("forum:topic:jumpTo",this.end)}return e.prototype.end=function(){return $(".js-forum-topic-post-jump--container").removeClass("forum-topic-nav__item--focus"),$(".js-forum-topic-post-jump--cover").show(),$(".js-forum-topic-post-jump--counter").show(),$(".js-forum-topic-post-jump--input").hide()},e.prototype.keyup=function(t){var e,n,i;if(27!==t.keyCode){if(n=(i=(e=t.currentTarget).value).replace(/\D/g,""),i!==n)return e.value=n}else $(t.currentTarget).blur()},e.prototype.start=function(){var t;return $(".js-forum-topic-post-jump--container").addClass("forum-topic-nav__item--focus"),$(".js-forum-topic-post-jump--cover").hide(),$(".js-forum-topic-post-jump--counter").hide(),(t=$(".js-forum-topic-post-jump--input").val(this.forum.currentPostPosition).show().focus())[0].selectionStart=0,t[0].selectionEnd=t.val().length},e}()}).call(window)},If6E:function(t,e){(function(){var t;React.createElement,t=ReactDOMFactories.span,this.FlagCountry=function(e){var n,i,s;return i=e.country,s=e.modifiers,null==(null!=i?i.code:void 0)?null:(n=osu.classWithModifiers("flag-country",s),t({className:n,title:i.name,style:{backgroundImage:"url('/images/flags/"+i.code+".png')"}}))}}).call(window)},Ij1D:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ClickMenu=function(){function e(){this.toggle=t(this.toggle,this),this.show=t(this.show,this),this.saveCurrent=t(this.saveCurrent,this),this.restoreSaved=t(this.restoreSaved,this),this.hide=t(this.hide,this),$(document).on("click",".js-click-menu",this.toggle),$(document).on("click",this.hide),addEventListener("turbolinks:load",this.restoreSaved),addEventListener("turbolinks:before-cache",this.saveCurrent)}return e.prototype.hide=function(t){if(0===t.button&&!(osu.popupShowing()||null==this.current||$(t.target).closest(".js-click-menu").length>0))return this.show()},e.prototype.restoreSaved=function(){return this.show(document.body.dataset.clickMenuCurrent)},e.prototype.saveCurrent=function(){return document.body.dataset.clickMenuCurrent=this.current},e.prototype.show=function(t){var e,n,i,s,o,r,a,u;for(this.current=null,e=0,i=(a=document.querySelectorAll(".js-click-menu[data-click-menu-id]")).length;e<i;e++)(r=a[e]).dataset.clickMenuId===t?(this.current=t,Fade.in(r)):Fade.out(r);for(n=0,s=(u=document.querySelectorAll(".js-click-menu[data-click-menu-target]")).length;n<s;n++)o=u[n],null!=this.current&&o.dataset.clickMenuTarget===this.current?o.classList.add("js-click-menu--active"):o.classList.remove("js-click-menu--active");return $.publish("click-menu:current",this.current)},e.prototype.toggle=function(t){var e,n,i;if(e=t.currentTarget,null==this.current||e.dataset.clickMenuId!==this.current)return i=e.dataset.clickMenuTarget,this.current!==i&&(n=i),t.preventDefault(),this.show(n)},e}()}).call(window)},JER7:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumPostsSeek=function(){function e(e){this.forum=e,this.setPostPosition=t(this.setPostPosition,this),this.reset=t(this.reset,this),this.jump=t(this.jump,this),this.click=t(this.click,this),this.move=t(this.move,this),this.hideTooltip=t(this.hideTooltip,this),this.tooltip=document.getElementsByClassName("js-forum-posts-seek--tooltip"),this.tooltipNumber=document.getElementsByClassName("js-forum-posts-seek-tooltip-number"),this.seekbar=document.getElementsByClassName("js-forum__posts-seek"),$(document).on("mousemove",".js-forum__posts-seek",this.move),$(document).on("mouseleave",".js-forum__posts-seek",this.hideTooltip),$(document).on("click",".js-forum__posts-seek",this.click),$(document).on("click",".js-forum-posts-seek--jump",this.jump),addEventListener("turbolinks:before-cache",this.reset)}return e.prototype.hideTooltip=function(){if(0!==this.tooltip.length)return Fade.out(this.tooltip[0])},e.prototype.move=function(t){return t.preventDefault(),t.stopPropagation(),this.setPostPosition(t.clientX),Fade.in(this.tooltip[0]),Timeout.clear(this._autohide),this._autohide=Timeout.set(1e3,this.hideTooltip)},e.prototype.click=function(){return this.forum.jumpTo(this.postPosition)},e.prototype.jump=function(t){var e,n,i,s,o,r,a,u;return t.preventDefault(),n=this.forum.currentPostPosition,u=this.forum.totalPosts(),e=$(t.currentTarget),s=e.attr("data-jump-target"),a=function(){switch(s){case"first":return 1;case"last":return u;case"previous":return i=n-10,r=this.forum.postPosition(this.forum.posts[0]),Math.max(i,r);case"next":return i=n+10,o=this.forum.postPosition(this.forum.endPost()),Math.min(i,o)}}.call(this),e.blur(),this.forum.jumpTo(a)},e.prototype.reset=function(){return Timeout.clear(this._autohide),this.hideTooltip()},e.prototype.setPostPosition=function(t){var e,n,i;return e=t/this.seekbar[0].offsetWidth,i=this.forum.totalPosts(),n=Math.ceil(e*this.forum.totalPosts()),n=Math.min(n,i),this.postPosition=Math.max(n,1),this.tooltip[0].style.transform="translateX("+t+"px)",this.tooltipNumber[0].textContent=this.postPosition},e}()}).call(window)},JXhK:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StoreSupporterTag=function(){function e(e){var n,i,s;this.updateCostDisplay=t(this.updateCostDisplay,this),this.updateSearchResult=t(this.updateSearchResult,this),this.setUserInteraction=t(this.setUserInteraction,this),this.onInput=t(this.onInput,this),this.onSliderValueChanged=t(this.onSliderValueChanged,this),this.calculate=t(this.calculate,this),this.getUser=t(this.getUser,this),this.initializeUsernameInput=t(this.initializeUsernameInput,this),this.initializeSliderPresets=t(this.initializeSliderPresets,this),this.initializeSlider=t(this.initializeSlider,this),this.debouncedGetUser=_.debounce(this.getUser,300),this.el=e,this.searching=!1,this.priceElement=this.el.querySelector(".js-price"),this.durationElement=this.el.querySelector(".js-duration"),this.discountElement=this.el.querySelector(".js-discount"),this.slider=this.el.querySelector(".js-slider"),this.sliderPresets=this.el.querySelectorAll(".js-slider-preset"),this.targetIdElement=this.el.querySelector('input[name="item[extra_data][target_id]"]'),this.usernameInput=this.el.querySelector(".js-username-input"),this.usercard=this.el.querySelector(".js-avatar"),this.user={userId:this.targetIdElement.value},this.currentUser={userId:this.el.dataset.userId,username:this.el.dataset.username,cardHtml:null!=(n=this.el.dataset.cardHtml)?n:this.usercard.innerHTML},$(document).on("turbolinks:before-cache",(s=this,function(){return s.el.dataset.cardHtml=s.currentUser.cardHtml})),delete this.el.dataset.cardHtml,this.cost=this.calculate(this.initializeSlider().slider("value")),this.initializeSliderPresets(),this.initializeUsernameInput(),this.updateCostDisplay(),this.setUserInteraction(null!=(i=this.user)?i.userId:void 0)}return e.prototype.RESOLUTION=8,e.prototype.MIN_VALUE=4,e.prototype.MAX_VALUE=52,e.initialize=function(){var t,n,i,s,o;for(o=[],n=0,i=(s=document.getElementsByClassName("js-store-supporter-tag")).length;n<i;n++)t=s[n],o.push(new e(t));return o},e.prototype.initializeSlider=function(){var t;return $(this.slider).find(".ui-slider-range").remove(),$(this.slider).slider({range:"min",value:null!=(t=this.slider.dataset.lastValue)?t:this.sliderValue(this.MIN_VALUE),min:this.sliderValue(this.MIN_VALUE),max:this.sliderValue(this.MAX_VALUE),step:1,animate:!0,slide:this.onSliderValueChanged,change:this.onSliderValueChanged})},e.prototype.initializeSliderPresets=function(){return $(this.sliderPresets).on("click",(t=this,function(e){var n,i;if(i=e.currentTarget,n=StoreSupporterTagPrice.durationToPrice(i.dataset.months))return $(t.slider).slider("value",t.sliderValue(n))}));var t},e.prototype.initializeUsernameInput=function(){return $(this.usernameInput).on("input",this.onInput)},e.prototype.getUser=function(t){return t?$.post(laroute.route("users.check-username-exists"),{username:t}).done((e=this,function(t){return e.user={userId:t.user_id,username:t.username,cardHtml:t.card_html}})).fail(function(t){return function(e){if(t.user=null,401===e.status)return osu.popup(osu.trans("errors.logged_out"),"danger")}}(this)).always(function(t){return function(){return t.searching=!1,t.updateSearchResult()}}(this)):(this.user=this.currentUser,this.searching=!1,void this.updateSearchResult());var e},e.prototype.calculate=function(t){return new StoreSupporterTagPrice(Math.floor(t/this.RESOLUTION))},e.prototype.onSliderValueChanged=function(t,e){return this.slider.dataset.lastValue=e.value,this.cost=this.calculate(e.value),this.updateCostDisplay()},e.prototype.onInput=function(t){return this.searching||(this.searching=!0,this.updateSearchResult()),this.debouncedGetUser(t.currentTarget.value)},e.prototype.setUserInteraction=function(t){return StoreCart.setEnabled(t),$(this.el).toggleClass("js-store--disabled",!t),$(".js-slider").slider({disabled:!t})},e.prototype.sliderValue=function(t){return t*this.RESOLUTION},e.prototype.updateSearchResult=function(){var t;return this.searching?(this.usercard.innerHTML=$("#js-usercard__loading-template").html(),this.setUserInteraction(!1)):(this.user?(this.targetIdElement.value=this.user.userId,this.usercard.innerHTML=this.user.cardHtml,reactTurbolinks.boot()):this.targetIdElement.value=null,this.setUserInteraction(null!=(t=this.user)?t.userId:void 0))},e.prototype.updateCostDisplay=function(){var t,e,n,i,s;for(this.el.querySelector('input[name="item[cost]"]').value=this.cost.price(),this.priceElement.textContent="USD "+this.cost.price(),this.durationElement.textContent=this.cost.durationText(),this.discountElement.textContent=this.cost.discountText(),s=[],e=0,n=(i=this.sliderPresets).length;e<n;e++)t=i[e],s.push(this.updateSliderPreset(t,this.cost));return s},e.prototype.updateSliderPreset=function(t,e){return $(t).toggleClass("js-slider-preset--active",e.duration()>=+t.dataset.months)},e}()}).call(window)},JYmG:function(t,e){(function(){this.ThrottledWindowEvents=function(){function t(){this.throttle("resize"),this.throttle("scroll")}return t.prototype.throttle=function(t){var e,n;return n=!1,e=function(){if(!n)return n=!0,requestAnimationFrame(function(){return window.dispatchEvent(new CustomEvent("throttled-"+t)),n=!1})},window.addEventListener(t,e)},t}()}).call(window)},K1Kf:function(t,e){(function(){var t;$(document).on("click","#new-address-switch a",function(t){var e,n;return t.preventDefault(),n=$(t.target),e=$("#new-address-form"),n.is(":visible")?(n.siblings("button").show(),n.hide(),e.find("input").first().focus()):(n.siblings("button").hide(),n.show()),e.slideToggle()}),t=function(){var t,e;return e=(t=$(".js-checkout-confirmation-step")).filter(":checked"),$("#checkout-with-paypal").toggleClass("disabled",e.length<t.length)},$(document).on("turbolinks:load",t),$(document).on("change",".js-checkout-confirmation-step",t),$(document).on("turbolinks:load",function(){if(!(parseInt($(".js-store-item-quantity").val(),10)>0))return $(".js-store-add-to-cart").hide()}),$(document).on("turbolinks:load",function(){return $("#product-form").submit(function(t){return!$(t.target).data("disabled")})})}).call(window)},Kd0U:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty;this.FormError=function(){function n(){this.setOneError=t(this.setOneError,this),this.setError=t(this.setError,this),this.showError=t(this.showError,this),this.flattenData=t(this.flattenData,this),this.clearError=t(this.clearError,this),$(document).on("ajax:error",".js-form-error",this.showError),$(document).on("ajax:success",".js-form-error",this.clearError)}return n.prototype.clearError=function(t){return this.setError(t.target)},n.prototype.flattenData=function(t,n){var i,s,o,r,a,u,l,c;for(a in null==n&&(n=[]),i={},t)if(e.call(t,a))if(c=t[a],Array.isArray(c)){for(s="",o=r=0,u=n.length;r<u;o=++r)l=n[o],s+=0===o?l:"["+l+"]";i[s+=""===s?a:"["+a+"]"]=c}else c instanceof Object&&_.merge(i,this.flattenData(c,n.concat(a)));return i},n.prototype.showError=function(t,e){var n,i;return null==(n=null!=(i=e.responseJSON)?i.form_error:void 0)?osu.ajaxError(e):this.setError(t.target,this.flattenData(n))},n.prototype.setError=function(t,e){return null==e&&(e={}),$(t).find("[name]").each((n=this,function(t,i){return n.setOneError(i,e[i.name])}));var n},n.prototype.setOneError=function(t,e){var n;return null==e&&(e=[]),n=e.length>0?"error":"",$(t).closest("label").attr("data-form-error-state",n).find(".js-form-error--error").text(e.join(" "))},n}()}).call(window)},L6Lm:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.LandingGraph=function(){function e(){this.resize=t(this.resize,this),this.initialize=t(this.initialize,this),$(window).on("throttled-resize",this.resize),$(document).on("turbolinks:load",this.initialize)}return e.prototype.container=document.getElementsByClassName("js-landing-graph"),e.prototype.initialize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0])._chart?t._chart:t._chart=new LandingUserStats},e.prototype.resize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0]._chart)?t.resize():void 0},e}()}).call(window)},LgLm:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Search=function(){function e(){this.restoreFocus=t(this.restoreFocus,this),this.searchingToggle=t(this.searchingToggle,this),this.submit=t(this.submit,this),this.submitForm=t(this.submitForm,this),this.submitInput=t(this.submitInput,this),this.maybeSubmitInput=t(this.maybeSubmitInput,this),this.forumPostReset=t(this.forumPostReset,this),this.debouncedSubmitInput=_.debounce(this.submitInput,500),$(document).on("click",".js-search--forum-options-reset",this.forumPostReset),$(document).on("input",".js-search--input",this.debouncedSubmitInput),$(document).on("keydown",".js-search--input",this.maybeSubmitInput),$(document).on("submit",".js-search",this.submitForm),addEventListener("turbolinks:load",this.restoreFocus)}return e.prototype.forumPostReset=function(){var t;return(t=$(".js-search")).find("[name=username], [name=forum_id]").val(""),t.find("[name=forum_children]").prop("checked",!1)},e.prototype.maybeSubmitInput=function(t){if(13===t.keyCode)return t.preventDefault(),this.submitInput(t)},e.prototype.submitInput=function(t){var e,n,i;if(""!==(i=(e=t.currentTarget).value.trim())&&i!==(null!=(n=e.dataset.searchCurrent)?n.trim():void 0))return e.dataset.searchCurrent=i,this.submit()},e.prototype.submitForm=function(t){return t.preventDefault(),this.submit()},e.prototype.submit=function(){var t,e;return this.searchingToggle(!0),t=$(".js-search").serialize(),$(document).one("turbolinks:before-cache",(e=this,function(){return e.activeElement=document.activeElement,e.searchingToggle(!1)})),Turbolinks.visit("?"+t)},e.prototype.searchingToggle=function(t){return $(".js-search--header").toggleClass("js-search--searching",t)},e.prototype.restoreFocus=function(){var t;return null!=(t=this.activeElement)&&t.focus(),this.activeElement=null},e}()}).call(window)},MRAD:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.PostPreview=function(){function e(){var e;this.loadPreview=t(this.loadPreview,this),this.debouncedLoadPreview=_.debounce(this.loadPreview,500),$(document).on("input",".js-post-preview--auto",(e=this,function(t){return e.debouncedLoadPreview(t.currentTarget)}))}return e.prototype.loadPreview=function(t){var e,n,i,s,o;if(e=$(t).closest("form"),o=laroute.route("bbcode-preview"),s=t.value,n=e.find(".js-post-preview--body"),i=e.find(".js-post-preview--box"),n.attr("data-raw")!==s)return $.post(o,{text:s}).done(function(t){return n.html(t),n.attr("data-raw",s),i.removeClass("hidden"),osu.pageChange()})},e}()}).call(window)},MWnb:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty;this.StackedBarChart=function(){function n(e,n){var i,s,o,r,a,u,l;for(this.options=null!=n?n:{},this.resize=t(this.resize,this),this.margins={top:0,right:0,bottom:0,left:0},null==(i=this.options).scales&&(i.scales={}),null==(s=this.options.scales).x&&(s.x=d3.scaleLinear()),null==(o=this.options.scales).y&&(o.y=d3.scaleLinear()),r="stacked-bar-chart",a=0,u=(l=this.options.modifiers).length;a<u;a++)r+=" stacked-bar-chart--"+l[a];this.area=d3.select(e),this.svg=this.area.append("svg").attr("class",r),this.svgWrapper=this.svg.append("g")}return n.prototype.loadData=function(t){var n,i,s,o,r,a;for(s in this.data=[],t)if(e.call(t,s))for(r in o=t[s])e.call(o,r)&&(a=o[r],null==(n=this.data)[r]&&(n[r]=[]),i=_.last(this.data[r]),this.data[r].push({type:s,value:a,height:null!=i?i.value+i.height:0}));return this.max=d3.max(_.map(this.data,function(t){return _.sumBy(t,"value")})),this.resize()},n.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width-(this.margins.left+this.margins.right),this.height=t.height-(this.margins.top+this.margins.bottom)},n.prototype.setScalesRange=function(){return this.options.scales.x.range([0,this.width]).domain([0,this.data.length]),this.options.scales.y.range([0,this.height]).domain([0,this.max])},n.prototype.setSvgSize=function(){return this.svg.attr("width",this.width+(this.margins.left+this.margins.right)).attr("height",this.height+(this.margins.top+this.margins.bottom))},n.prototype.setWrapperSize=function(){return this.svgWrapper.attr("transform","translate("+this.margins.left+", "+this.margins.top+")")},n.prototype.drawBars=function(){var t,e,n;return(e=this.svgWrapper.selectAll("g").data(this.data)).enter().append("g"),e.attr("transform",(n=this,function(t,e){return"translate("+n.options.scales.x(e)+", 0)"})),(t=e.selectAll(".stacked-bar-chart__bar").data(function(t){return t})).enter().append("rect").attr("class",function(t){return"stacked-bar-chart__bar stacked-bar-chart__bar--"+t.type}),t.transition().attr("y",function(t){return function(e){return t.height-t.options.scales.y(e.value+e.height)}}(this)).attr("height",function(t){return function(e){return t.options.scales.y(e.value)}}(this)).attr("width",this.options.scales.x(1)),t.exit().remove(),e.exit().remove()},n.prototype.resize=function(){return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setWrapperSize(),this.drawBars()},n}()}).call(window)},"NW+U":function(t,e){(function(){this.Img2x=function(t){var e;return e=_.extend(osu.src2x(t.src),t),ReactDOMFactories.img(e,t.children)}}).call(window)},NXHL:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.UserCard=function(){function e(){this.onMouseOver=t(this.onMouseOver,this),$(document).on("mouseover",".js-usercard",this.onMouseOver)}return e.prototype.triggerDelay=200,e.prototype.fadeLength=220,e.prototype.onMouseOver=function(t){var e,n,i,s,o,r,a;if(i=t.currentTarget,(a=i.getAttribute("data-user-id"))&&!_.find(currentUser.blocks,{target_id:parseInt(a)})){if(null!=i._tooltip){if(e=$(i).qtip("api"),i._tooltip===a)return void(osu.isMobile()?(t.preventDefault(),e.disable(),i._disable_card=!0):i._disable_card&&(i._disable_card=!1,e.enable(),$(i).trigger("mouseover")));e.destroy()}var u;if(!osu.isMobile())return i._tooltip=a,n=null!=(r=i.getAttribute("data-tooltip-position"))?r:"right center",s=function(){switch(n){case"top center":return"bottom center";case"left center":return"right center";case"right center":return"left center"}}(),o={style:{def:!1,tip:!1,width:280,height:130},content:{text:(u=this,function(t,e){return $.ajax({url:laroute.route("users.card",{user:a})}).done(function(t){return t?(e.set("content.text",t),e.tooltip.find(".usercard").imagesLoaded().progress(function(t,e){if(e.isLoaded)return $(e.img).fadeTo(u.fadeLength,1)}).always(function(t){return $(t.elements[0]).find(".js-usercard--avatar-loader").fadeTo(this.fadeLength,0)}),reactTurbolinks.boot()):e.hide()}).fail(function(t,n,i){return e.set("content.text",n+": "+i)}),$("#js-usercard__loading-template").children().clone()})},position:{at:n,my:s,viewport:$(window)},show:{delay:this.triggerDelay,ready:!0,effect:function(){return $(this).fadeTo(110,1)}},hide:{fixed:!0,delay:this.triggerDelay,effect:function(){return $(this).fadeTo(110,0)}}},$(i).qtip(o)}},e}()}).call(window)},"Nqw+":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEditAvatar=function(){function e(){this.rollback=t(this.rollback,this),this.overlayStart=t(this.overlayStart,this),this.overlayLeave=t(this.overlayLeave,this),this.overlayHover=t(this.overlayHover,this),this.overlayEnter=t(this.overlayEnter,this),this.overlayEnd=t(this.overlayEnd,this),this.initialize=t(this.initialize,this),$(document).on("turbolinks:load",this.initialize),$(document).on("turbolinks:before-cache",this.rollback),$.subscribe("dragenterGlobal",this.overlayStart),$.subscribe("dragendGlobal",this.overlayEnd),$(document).on("dragenter",".js-account-edit-avatar",this.overlayEnter),$(document).on("dragover",".js-account-edit-avatar",this.overlayHover),this.main=document.getElementsByClassName("js-account-edit-avatar")}return e.prototype.$button=function(){return $(".js-account-edit-avatar__button")},e.prototype.initialize=function(){var t;if(null!=this.main[0])return this.isAvailable=!0,this.$main=$(this.main),this.$button().fileupload({url:laroute.route("account.avatar"),dataType:"json",dropZone:this.$main,submit:(t=this,function(){return t.main[0].classList.add("js-account-edit-avatar--saving"),$.publish("dragendGlobal")}),done:function(t,e){return $.publish("user:update",e.result)},fail:osu.fileuploadFailCallback(this.$button),complete:function(t){return function(){return t.main[0].classList.remove("js-account-edit-avatar--saving")}}(this)})},e.prototype.overlayEnd=function(){if(this.isAvailable)return this.main[0].classList.remove("js-account-edit-avatar--start")},e.prototype.overlayEnter=function(){return null!=this.dragging?this.dragging:this.dragging=!0},e.prototype.overlayHover=function(){if(this.dragging)return this.main[0].classList.add("js-account-edit-avatar--hover"),Timeout.clear(this.overlayLeaveTimeout),this.overlayLeaveTimeout=Timeout.set(100,this.overlayLeave)},e.prototype.overlayLeave=function(){return this.dragging=null,this.main[0].classList.remove("js-account-edit-avatar--hover")},e.prototype.overlayStart=function(){if(this.isAvailable)return this.main[0].classList.add("js-account-edit-avatar--start")},e.prototype.rollback=function(){if(this.isAvailable)return this.isAvailable=!1,this.$button().fileupload("destroy")},e}()}).call(window)},"Ny+b":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TurbolinksUjs=function(){function e(){this.record=t(this.record,this),this.abort=t(this.abort,this),this.xhr=[],$(document).on("ajax:beforeSend",this.record),$(document).on("turbolinks:before-cache",this.abort)}return e.prototype.abort=function(){var t,e;for(t=[];e=this.xhr.pop();)t.push(null!=e?e.abort():void 0);return t},e.prototype.record=function(t,e){return this.xhr.push(e)},e}()}).call(window)},NzAu:function(t,e){t.exports=ReactDOMFactories},O0zI:function(t,e){(function(){var t,e,n,i,s=function(t,e){return function(){return t.apply(e,arguments)}},o={}.hasOwnProperty,r=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e=ReactDOMFactories.button,n=ReactDOMFactories.div,ReactDOMFactories.span,i=React.createElement,t="comment-show-more",this.CommentShowMore=function(a){function u(t){this.load=s(this.load,this),this.render=s(this.render,this),this.componentWillUnmount=s(this.componentWillUnmount,this),u.__super__.constructor.call(this,t),this.state={loading:!1}}return function(t,e){for(var n in e)o.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,React.PureComponent),u.defaultProps={modifiers:[]},u.prototype.componentWillUnmount=function(){var t;return null!=(t=this.xhr)?t.abort():void 0},u.prototype.render=function(){var s,o,a,u,l,c,h;return this.props.comments.length>=this.props.total?null:null==(a=this.props.moreComments[null!=(u=null!=(l=this.props.parent)?l.id:void 0)?u:null])||a?(s=osu.classWithModifiers(t,this.props.modifiers),r.call(this.props.modifiers,"top")>=0?(h=this.props.total-this.props.comments.length,o=["comments"],r.call(this.props.modifiers,"changelog")>=0?o.push("t-dark-purple-darker"):o.push("t-ddd"),i(ShowMoreLink,{loading:this.state.loading,hasMore:!0,callback:this.load,modifiers:o,remaining:h})):n({className:s},this.state.loading?i(Spinner):e({className:t+"__link",onClick:this.load},null!=(c=this.props.label)?c:osu.trans("common.buttons.show_more")))):null},u.prototype.load=function(){var t,e,n,i,s,o,r,a,u;return this.setState({loading:!0}),e={commentable_type:null!=(n=null!=(i=this.props.parent)?i.commentable_type:void 0)?n:this.props.commentableType,commentable_id:null!=(s=null!=(o=this.props.parent)?o.commentable_id:void 0)?s:this.props.commentableId,parent_id:null!=(r=null!=(a=this.props.parent)?a.id:void 0)?r:0,sort:this.props.sort},null!=(t=_.last(this.props.comments))&&(e.cursor={id:t.id,created_at:t.created_at,votes_count:t.votes_count}),this.xhr=$.ajax(laroute.route("comments.index"),{data:e,dataType:"json"}).done(function(t){return $.publish("comments:added",{commentBundle:t})}).always((u=this,function(){return u.setState({loading:!1})}))},u}()}).call(window)},Os89:function(t,e){(function(){$(document).on("click",".js-spoilerbox__link",function(t){return t.preventDefault(),$(t.target).closest(".js-spoilerbox").toggleClass("js-spoilerbox--open"),osu.pageChange()})}).call(window)},PBOi:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}},e={}.hasOwnProperty;this.ChangelogChart=function(){function n(e){var n;this.resize=t(this.resize,this),this.positionTooltip=t(this.positionTooltip,this),this.moveTooltip=t(this.moveTooltip,this),this.hideTooltip=t(this.hideTooltip,this),this.showTooltip=t(this.showTooltip,this),this.options={scales:{x:d3.scaleTime(),y:d3.scaleLinear(),class:d3.scaleOrdinal()}},this.area=d3.select(e),this.area.classed("changelog-chart",!0),this.svg=this.area.append("svg"),this.svgWrapper=this.svg.append("g"),this.areaFunction=d3.area().curve(d3.curveMonotoneX).x((n=this,function(t){return n.options.scales.x(t.data.date)})).y1(function(t){return function(e){return t.options.scales.y(e[1])}}(this)).y0(function(t){return function(e,n){return t.options.scales.y(e[0])}}(this)),this.hoverArea=this.svg.append("rect").classed("changelog-chart__hover-area",!0).on("mouseout",this.hideTooltip).on("mousemove",this.moveTooltip),this.tooltipArea=this.area.append("div").classed("changelog-chart__tooltip-area",!0),this.tooltipContainer=this.tooltipArea.append("div").classed("changelog-chart__tooltip-container",!0).attr("data-visibility","hidden"),this.tooltipContainer.append("div").classed("changelog-chart__tooltip-line",!0),this.tooltip=this.tooltipContainer.append("div").classed("changelog-chart__tooltip",!0),this.tooltipName=this.tooltip.append("div"),this.tooltipUserCount=this.tooltip.append("div").classed("changelog-chart__text changelog-chart__text--user-count",!0),this.tooltipDate=this.tooltip.append("div").classed("changelog-chart__text changelog-chart__text--date",!0),this.tooltipContainer.append("div").classed("changelog-chart__tooltip-line",!0),this.tooltipLine=this.tooltipContainer.selectAll(".changelog-chart__tooltip-line")}return n.prototype.loadData=function(){var t,e,n,i;return this.config=osu.parseJson("json-chart-config"),t=(n=this.normalizeData(this.config.build_history)).data,e=n.hasData,i=d3.stack().keys(this.config.order).value(function(t,e){return null!=t[e]?t[e].normalized:0}),this.data=i(t),this.hasData=null!=this.config.build_history&&this.config.build_history.length>0&&e,this.resize()},n.prototype.setDimensions=function(){var t;return t=this.area.node().getBoundingClientRect(),this.width=t.width,this.height=t.height},n.prototype.setSvgSize=function(){return this.svg.attr("width",this.width).attr("height",this.height)},n.prototype.setHoverAreaSize=function(){return this.hoverArea.attr("width",this.width).attr("height",this.height)},n.prototype.setScalesRange=function(){var t,e,n;return this.options.scales.x.range([0,this.width]).domain([null!=(t=_.first(this.data[0]))?t.data.date:void 0,null!=(e=_.last(this.data[0]))?e.data.date:void 0]),this.options.scales.y.range([0,this.height]).domain([0,1]),this.options.scales.class.range(_.map(this.config.order,(n=this,function(t,e){return null!=n.config.stream_name?n.config.stream_name+"-build-"+e%7:_.kebabCase(t)}))).domain(this.config.order)},n.prototype.drawLines=function(){return this.svgWrapper.selectAll("g").data(this.data).enter().append("path").attr("class",(t=this,function(e){return"changelog-chart__area changelog-chart__area--"+t.options.scales.class(e.key)})).attr("d",this.areaFunction);var t},n.prototype.showTooltip=function(){return Fade.in(this.tooltipContainer.node())},n.prototype.hideTooltip=function(){return Fade.out(this.tooltipContainer.node())},n.prototype.moveTooltip=function(){var t;return t=d3.mouse(this.hoverArea.node()),this.x=this.options.scales.x.invert(t[0]),this.y=t[1]/this.height,this.showTooltip(),Timeout.clear(this._autoHideTooltip),this._autoHideTooltip=Timeout.set(3e3,this.hideTooltip),this.positionTooltip()},n.prototype.positionTooltip=function(){var t,e,n,i,s,o,r,a,u,l,c,h,p,d,m;if(d=this.x,m=this.y,u=d3.bisector(function(t){return t.data.date}).left(this.data[0],d)){for(s=o=0,a=(l=this.data).length;o<a;s=++o)if(m<=(i=l[s])[u][1]&&null!=i[u].data[i.key]){n=s,e=i.key,r=this.options.scales.class(e);break}return t=this.options.scales.x(d),this.tooltipName.attr("class","changelog-chart__text changelog-chart__text--name changelog-chart__text--"+r).text(e),this.tooltipUserCount.text(osu.formatNumber(this.data[n][u].data[e].user_count)),this.tooltipDate.text(this.data[n][u].data.date_formatted),h=(p=t-(c=this.tooltip.node().getBoundingClientRect().width)/2)<0?0:p+c>this.width?this.width-c:p,this.tooltip.style("transform","translateX("+h+"px)"),this.tooltipLine.style("transform","translateX("+t+"px)")}},n.prototype.resize=function(){if(this.area.classed("hidden",!this.hasData),this.hasData)return this.setDimensions(),this.setScalesRange(),this.setSvgSize(),this.setHoverAreaSize(),this.drawLines(),this.positionTooltip()},n.prototype.normalizeData=function(t){var n,i,s,o,r,a,u,l,c;return r=null,i=null,{data:function(){var h,p,d,m;for(u in m=[],d=_.groupBy(t,"created_at"))if(e.call(d,u)){for(c=d[u],0===(a=_.sumBy(c,"user_count"))?(null!=r&&(n=_.find(c,{label:r})),null==n&&(n=_.last(c),r=n.label),n.user_count=1,a=1):null==i&&(i=!0),s=moment(c[0].created_at),o={created_at:u,date:s.toDate(),date_formatted:s.format("YYYY/MM/DD")},h=0,p=c.length;h<p;h++)(l=c[h]).normalized=l.user_count/a,o[l.label]=l;m.push(o)}return m}(),hasData:i}},n}()}).call(window)},PTft:function(t,e){(function(){var t,e,n,i;e=ReactDOMFactories.div,i=ReactDOMFactories.span,t="beatmap-basic-stats",n=function(t){var e,n,i;return i=t%60,n=Math.floor(t/60)%60,(e=Math.floor(t/3600))>0?e+":"+_.padStart(n,2,0)+":"+_.padStart(i,2,0):n+":"+_.padStart(i,2,0)},this.BeatmapBasicStats=function(s){var o,r,a,u;return r=s.beatmapset,o=s.beatmap,e({className:t},function(){var s,l,c,h;for(h=[],s=0,l=(c=["total_length","bpm","count_circles","count_sliders"]).length;s<l;s++)u="bpm"===(a=c[s])?r.bpm:o[a],u="total_length"===a?n(u):osu.formatNumber(u),h.push(e({className:t+"__entry",key:a,title:osu.trans("beatmapsets.show.stats."+a)},e({className:t+"__entry-icon",style:{backgroundImage:"url(/images/layout/beatmapset-page/"+a+".svg)"}}),i(null,u)));return h}())}}).call(window)},Q9e0:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StickyFooter=function(){function e(){this.stickOrUnstick=t(this.stickOrUnstick,this),this.stickMarker=document.getElementsByClassName("js-sticky-footer"),this.permanentFixedFooter=document.getElementsByClassName("js-permanent-fixed-footer"),$(window).on("throttled-scroll throttled-resize",this.stickOrUnstick),$.subscribe("stickyFooter:check",this.stickOrUnstick),$(document).on("turbolinks:load osu:page:change",this.stickOrUnstick)}return e.prototype.stickOrUnstick=function(){var t,e,n,i,s;if(0!==this.stickMarker.length){for(t=window.innerHeight-this.permanentFixedFooter[0].offsetHeight,e=0,n=(s=this.stickMarker).length;e<n;e++)if("1"!==(i=s[e]).getAttribute("data-sticky-footer-disabled")&&i.getBoundingClientRect().top>=t)return void $.publish("stickyFooter",i.getAttribute("data-sticky-footer-target"));return $.publish("stickyFooter")}},e.prototype.markerCheckEnabled=function(t){return"1"===t.getAttribute("data-sticky-footer-disabled")},e.prototype.markerDisable=function(t){return t.setAttribute("data-sticky-footer-disabled","1")},e.prototype.markerEnable=function(t){return t.setAttribute("data-sticky-footer-disabled","")},e}()}).call(window)},R6iF:function(t,e){(function(){var t,e,n,i;e=ReactDOMFactories.button,i=ReactDOMFactories.span,n=React.createElement,t="show-more-link",this.ShowMoreLink=React.forwardRef(function(s,o){var r;return s.hasMore||s.loading?(null==(r=s.callback)&&(r=function(){return $.publish(s.event,s.data)}),e({ref:o,type:"button",onClick:r,disabled:s.loading,className:osu.classWithModifiers(t,s.modifiers)},i({className:t+"__spinner"},n(Spinner)),i({className:t+"__label"},i({className:t+"__label-icon"},i({className:"fas fa-angle-down"})),i({className:t+"__label-text"},osu.trans("common.buttons.show_more"),null!=s.remaining?" ("+s.remaining+")":void 0),i({className:t+"__label-icon"},i({className:"fas fa-angle-down"}))))):null})}).call(window)},RgQJ:function(t,e){(function(){this.BeatmapsetPageHash=function(){function t(){}return t.parse=function(t){var e,n,i;return{playmode:""!==(n=(i=t.slice(1).split("/"))[0])?n:void 0,beatmapId:null!=(e=i[1])?parseInt(e,10):void 0}},t.generate=function(t){var e,n;return e=t.beatmap,n=t.mode,null!=e?"#"+e.mode+"/"+e.id:"#"+n},t}()}).call(window)},S5CA:function(t,e){(function(){var t,e,n,i;e=ReactDOMFactories.div,i=ReactDOMFactories.span,t=ReactDOMFactories.a,React.createElement,n={add:"fas fa-plus",fix:"fas fa-check",misc:"far fa-circle"},this.ChangelogEntry=function(s){var o,r,a,u,l,c;return o=s.entry,e({className:"changelog-entry",key:o.id},e({className:"changelog-entry__row"},e({className:"changelog-entry__title "+(o.major?"changelog-entry__title--major":"")},i({className:"changelog-entry__title-icon"},i({className:"changelog-entry__icon "+n[o.type]})),null!=o.url?t({href:o.url,className:"changelog-entry__link"},o.title):o.title,null!=o.github_url?i(null," (",t({className:"changelog-entry__link",href:o.github_url},o.repository.replace(/^.*\//,"")+"#"+o.github_pull_request_id),")"):void 0,(c=_.escape(o.github_user.display_name),r=null!=(l=null!=(a=o.github_user.github_url)?a:o.github_user.user_url)?"<a data-user-id='"+(null!=(u=o.github_user.user_id)?u:"")+"' class='changelog-entry__user-link js-usercard' href='"+_.escape(l)+"' >"+c+"</a>":c,i({className:"changelog-entry__user",dangerouslySetInnerHTML:{__html:osu.trans("changelog.entry.by",{user:r})}})))),null!=o.message_html?e({className:"changelog-entry__row changelog-entry__row--message",dangerouslySetInnerHTML:{__html:o.message_html}}):void 0)}}).call(window)},SYfz:function(t,e){(function(){var t;t=ReactDOMFactories.div,this.Spinner=function(e){var n;return n=e.modifiers,t({className:osu.classWithModifiers("la-ball-clip-rotate",n)})}}).call(window)},Sc3f:function(t,e,n){"use strict";(function(t){var i=n("f3YG"),s=setTimeout;function o(){}function r(t){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],p(t,this)}function a(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn(function(){var n=1===t._state?e.onFulfilled:e.onRejected;if(null!==n){var i;try{i=n(t._value)}catch(t){return void l(e.promise,t)}u(e.promise,i)}else(1===t._state?u:l)(e.promise,t._value)})):t._deferreds.push(e)}function u(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var n=e.then;if(e instanceof r)return t._state=3,t._value=e,void c(t);if("function"==typeof n)return void p((i=n,s=e,function(){i.apply(s,arguments)}),t)}t._state=1,t._value=e,c(t)}catch(e){l(t,e)}var i,s}function l(t,e){t._state=2,t._value=e,c(t)}function c(t){2===t._state&&0===t._deferreds.length&&r._immediateFn(function(){t._handled||r._unhandledRejectionFn(t._value)});for(var e=0,n=t._deferreds.length;e<n;e++)a(t,t._deferreds[e]);t._deferreds=null}function h(t,e,n){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=n}function p(t,e){var n=!1;try{t(function(t){n||(n=!0,u(e,t))},function(t){n||(n=!0,l(e,t))})}catch(t){if(n)return;n=!0,l(e,t)}}r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var n=new this.constructor(o);return a(this,new h(t,e,n)),n},r.prototype.finally=i.a,r.all=function(t){return new r(function(e,n){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var i=Array.prototype.slice.call(t);if(0===i.length)return e([]);var s=i.length;function o(t,r){try{if(r&&("object"==typeof r||"function"==typeof r)){var a=r.then;if("function"==typeof a)return void a.call(r,function(e){o(t,e)},n)}i[t]=r,0==--s&&e(i)}catch(t){n(t)}}for(var r=0;r<i.length;r++)o(r,i[r])})},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r(function(e){e(t)})},r.reject=function(t){return new r(function(e,n){n(t)})},r.race=function(t){return new r(function(e,n){for(var i=0,s=t.length;i<s;i++)t[i].then(e,n)})},r._immediateFn="function"==typeof t&&function(e){t(e)}||function(t){s(t,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console&&console.warn("Possible Unhandled Promise Rejection:",t)},e.a=r}).call(this,n("drar").setImmediate)},TY2o:function(t,e){(function(){var t;t=ReactDOMFactories.div,this.UserAvatar=function(e){return null!=e.user.id?t({className:osu.classWithModifiers("avatar",e.modifiers),style:{backgroundImage:osu.urlPresence(e.user.avatar_url)}}):t({className:osu.classWithModifiers("avatar",_.concat(e.modifiers,"guest"))})}}).call(window)},TgbU:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEdit=function(){function e(){this.update=t(this.update,this),this.abortUpdate=t(this.abortUpdate,this),this.saving=t(this.saving,this),this.saved=t(this.saved,this),this.clearState=t(this.clearState,this),this.ajaxSaved=t(this.ajaxSaved,this),this.ajaxSaving=t(this.ajaxSaving,this),this.ajaxError=t(this.ajaxError,this),this.initializeUpdate=t(this.initializeUpdate,this),$(document).on("input change",".js-account-edit",this.initializeUpdate),$(document).on("ajax:error",".js-account-edit",this.ajaxError),$(document).on("ajax:send",".js-account-edit",this.ajaxSaving),$(document).on("ajax:success",".js-account-edit",this.ajaxSaved)}return e.prototype.initializeUpdate=function(t){var e;if("1"===(e=t.currentTarget).dataset.accountEditAutoSubmit)return this.abortUpdate(e),this.saving(e),null==e.debouncedUpdate&&(e.debouncedUpdate=_.debounce(this.update,1e3)),e.debouncedUpdate(e)},e.prototype.ajaxError=function(t){return this.clearState(t.currentTarget)},e.prototype.ajaxSaving=function(t){return this.saving(t.currentTarget)},e.prototype.ajaxSaved=function(t){return this.saved(t.currentTarget)},e.prototype.clearState=function(t){return t.dataset.accountEditState=""},e.prototype.saved=function(t){return t.dataset.accountEditState="saved",t.savedTimeout=Timeout.set(3e3,(e=this,function(){return e.clearState(t)}));var e},e.prototype.saving=function(t){return t.dataset.accountEditState="saving"},e.prototype.abortUpdate=function(t){var e;return Timeout.clear(t.savedTimeout),null!=(e=t.updating)&&e.abort(),this.clearState(t)},e.prototype.update=function(t){var e,n,i,s,o;return(s="checkbox"===(e=t.querySelector(".js-account-edit__input")).type?e.checked:e.value.trim())===(i=t.dataset.lastValue)?this.clearState(t):(t.dataset.lastValue=s,t.updating=$.ajax(laroute.route("account.update"),{method:"PUT",data:(n={},n[""+e.name]=s,n)}).done((o=this,function(){return o.saved(t),$(t).trigger("ajax:success")})).fail(function(e){return function(n,s){if("abort"!==s)return t.lastValue=i,e.clearState(t),$(t).trigger("ajax:error",[n,s])}}(this)))},e}()}).call(window)},"U+uL":function(t,e){(function(){var t,e,n,i,s,o,r,a={}.hasOwnProperty;t=ReactDOMFactories.div,n=ReactDOMFactories.table,o=ReactDOMFactories.thead,i=ReactDOMFactories.tbody,r=ReactDOMFactories.tr,s=ReactDOMFactories.th,e=React.createElement,this.Tracklist=function(u){function l(){return l.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(l,React.Component),l.prototype.render=function(){var a;return this.props.tracks.length>0?(a=this.props.tracks.map(function(t){return e(TracklistTrack,{key:t.id,track:t})}),t({className:"tracklist"},n({className:"tracklist__table"},o({},r({className:"tracklist__row--header"},s({className:"tracklist__col tracklist__col--preview"},""),s({className:"tracklist__col tracklist__col--title"},osu.trans("artist.tracklist.title")),s({className:"tracklist__col tracklist__col--length"},osu.trans("artist.tracklist.length")),s({className:"tracklist__col tracklist__col--bpm"},osu.trans("artist.tracklist.bpm")),s({className:"tracklist__col tracklist__col--genre"},osu.trans("artist.tracklist.genre")),s({className:"tracklist__col tracklist__col--dl"}))),i({},a)))):null},l}()}).call(window)},U3GY:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=o(n("Ee0K")),s=o(n("70NH"));function o(t){return t&&t.__esModule?t:{default:t}}e.default=function(t,e,n,o,r){if(e&&o&&n&&0!==n.length){var a=e.innerHeight,u=e.clientHeight,l=a||u;if(l){var c=(0,s.default)(e),h=c+l,p=(0,i.default)(t)-(0,i.default)(e),d=o*n.length,m=Math.max(0,c-p),f=Math.max(0,Math.min(d,h-p));return{firstItemIndex:Math.max(0,Math.floor(m/o)-r),lastItemIndex:Math.min(n.length,Math.ceil(f/o)+r)-1}}}}},U4GN:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Nav2=function(){function e(){this.showMenuBg=t(this.showMenuBg,this),this.loginBoxVisible=t(this.loginBoxVisible,this),this.autoCenterPopup=t(this.autoCenterPopup,this),this.menuBg=document.getElementsByClassName("js-nav2--menu-bg"),$.subscribe("click-menu:current",this.autoCenterPopup),$.subscribe("menu:current",this.showMenuBg)}return e.prototype.autoCenterPopup=function(t,e){var n,i,s,o,r,a,u,l,c;for(this.currentMenu=e,$(window).off("throttled-resize.nav2-center-popup"),s=0,o=(u=document.querySelectorAll(".js-nav2--centered-popup")).length;s<o;s++)(a=u[s]).dataset.clickMenuId===this.currentMenu?(a.classList.remove("hidden"),n=a,r=document.querySelector(".js-click-menu[data-click-menu-target='"+this.currentMenu+"']")):a.classList.add("hidden");if(null!=n)return c=this,i=function(){return c.centerPopup(n,r)},$(window).on("throttled-resize.nav2-center-popup",i),this.loginBoxVisible()&&osu.pageChangeImmediate(),i(),null!=(l=n.querySelector(".js-nav2--autofocus"))?l.focus():void 0},e.prototype.centerPopup=function(t,e){var n,i,s,o,r,a,u,l,c,h,p,d;return l=t.getBoundingClientRect(),s=t.parentElement.getBoundingClientRect(),d=e.getBoundingClientRect(),n=document.body.getBoundingClientRect().width-5,p=d.width/2,o=l.width/2,i=(u=(r=s.left)+(a=d.left+p-r-o))<0?-1*d.left:(h=u+l.width,(c=Math.round(h-n))>0?a-c:a),i=Math.floor(i),t.style.transform="translateX("+i+"px)"},e.prototype.loginBoxVisible=function(){return"nav2-login-box"===this.currentMenu},e.prototype.showMenuBg=function(t,e){var n;return n=_.startsWith(e,"nav2-menu-popup-"),Fade.toggle(this.menuBg[0],n)},e}()}).call(window)},UVl7:function(t,e){(function(){var t,e,n,i,s,o,r=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty;t=ReactDOMFactories.a,e=ReactDOMFactories.button,i=ReactDOMFactories.div,o=ReactDOMFactories.span,ReactDOMFactories.textarea,s=React.createElement,n={username:osu.trans("users.deleted")},this.Comment=function(u){var l,c;function h(t){this.toggleReplies=r(this.toggleReplies,this),this.closeNewReply=r(this.closeNewReply,this),this.voteToggle=r(this.voteToggle,this),this.toggleNewReply=r(this.toggleNewReply,this),this.restore=r(this.restore,this),this.userFor=r(this.userFor,this),this.parentLink=r(this.parentLink,this),this.isDeleted=r(this.isDeleted,this),this.closeEdit=r(this.closeEdit,this),this.toggleEdit=r(this.toggleEdit,this),this.delete=r(this.delete,this),this.hasVoted=r(this.hasVoted,this),this.isOwner=r(this.isOwner,this),this.commentableMeta=r(this.commentableMeta,this),this.canVote=r(this.canVote,this),this.canRestore=r(this.canRestore,this),this.canReport=r(this.canReport,this),this.canModerate=r(this.canModerate,this),this.canHaveVote=r(this.canHaveVote,this),this.canEdit=r(this.canEdit,this),this.canDelete=r(this.canDelete,this),this.renderVoteText=r(this.renderVoteText,this),this.renderVoteButton=r(this.renderVoteButton,this),this.render=r(this.render,this),this.componentWillUnmount=r(this.componentWillUnmount,this),h.__super__.constructor.call(this,t),this.xhr={},this.state={postingVote:!1,editing:!1,showNewReply:!1,expandReplies:!this.isDeleted()}}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(h,React.PureComponent),3,c=document.createElement("div"),l=function(t){return null!=t.deleted_at?osu.trans("comments.deleted"):(c.innerHTML=t.message_html,_.truncate(c.textContent,{length:100}))},h.defaultProps={showReplies:!0},h.prototype.componentWillUnmount=function(){var t,e,n,i;for(t in n=[],e=this.xhr)a.call(e,t)&&(i=e[t],n.push(null!=i?i.abort():void 0));return n},h.prototype.render=function(){var r,a,u,l,c,p,d,m,f,g,v,y,b;return r=null!=(p=null!=(d=this.props.commentsByParentId)?d[this.props.comment.id]:void 0)?p:[],b=this.userFor(this.props.comment),c=null!=(m=this.props.comment.parent)?m:this.props.parent,l=null!=(f=null!=(g=this.props.modifiers)?g.slice(0):void 0)?f:[],0===this.props.depth&&l.push("top"),y="comment__replies",this.props.depth<3&&(y+=" comment__replies--indented"),this.state.expandReplies||(y+=" comment__replies--hidden"),i({className:osu.classWithModifiers("comment",l)},this.canHaveVote()?i({className:"comment__float-container comment__float-container--left hidden-xs"},this.renderVoteButton()):void 0,0===this.props.depth&&r.length>0?i({className:"comment__float-container comment__float-container--right"},e({className:"comment__top-show-replies",type:"button",onClick:this.toggleReplies},o({className:"fas "+(this.state.expandReplies?"fa-angle-up":"fa-angle-down")}))):void 0,i({className:"comment__main "+(this.isDeleted()?"comment__main--deleted":"")},null!=b.id?t({className:"comment__avatar js-usercard","data-user-id":b.id,href:laroute.route("users.show",{user:b.id})},s(UserAvatar,{user:b,modifiers:["full-circle"]})):o({className:"comment__avatar"},s(UserAvatar,{user:b,modifiers:["full-circle"]})),i({className:"comment__container"},this.props.showCommentableMeta?i({className:"comment__row comment__row--header"},o({className:"comment__row-item comment__row-item--commentable-meta"},this.commentableMeta())):void 0,i({className:"comment__row comment__row--header"},null!=b.id?t({"data-user-id":b.id,href:laroute.route("users.show",{user:b.id}),className:"js-usercard comment__row-item comment__row-item--username comment__row-item--username-link"},b.username):o({className:"comment__row-item comment__row-item--username"},b.username),null!=c?o({className:"comment__row-item comment__row-item--parent"},this.parentLink(c)):void 0,this.isDeleted()?o({className:"comment__row-item comment__row-item--deleted"},osu.trans("comments.deleted")):void 0),this.state.editing?i({className:"comment__editor"},s(CommentEditor,{id:this.props.comment.id,message:this.props.comment.message,modifiers:this.props.modifiers,close:this.closeEdit})):null!=this.props.comment.message_html?i({className:"comment__message",dangerouslySetInnerHTML:{__html:this.props.comment.message_html}}):void 0,i({className:"comment__row comment__row--footer"},this.canHaveVote()?i({className:"comment__row-item visible-xs"},this.renderVoteText()):void 0,i({className:"comment__row-item comment__row-item--info",dangerouslySetInnerHTML:{__html:osu.timeago(this.props.comment.created_at)}}),this.canModerate()?i({className:"comment__row-item"},t({href:laroute.route("comments.show",{comment:this.props.comment.id}),className:"comment__action comment__action--permalink"},osu.trans("common.buttons.permalink"))):void 0,this.props.showReplies&&!this.isDeleted()?i({className:"comment__row-item"},e({type:"button",className:"comment__action "+(this.state.showNewReply?"comment__action--active":""),onClick:this.toggleNewReply},osu.trans("common.buttons.reply"))):void 0,this.canEdit()?i({className:"comment__row-item"},e({type:"button",className:"comment__action "+(this.state.editing?"comment__action--active":""),onClick:this.toggleEdit},osu.trans("common.buttons.edit"))):void 0,this.isDeleted()&&this.canRestore()?i({className:"comment__row-item"},e({type:"button",className:"comment__action",onClick:this.restore},osu.trans("common.buttons.restore"))):void 0,!this.isDeleted()&&this.canDelete()?i({className:"comment__row-item"},e({type:"button",className:"comment__action",onClick:this.delete},osu.trans("common.buttons.delete"))):void 0,this.canReport()?i({className:"comment__row-item"},s(_exported.ReportComment,{className:"comment__action",comment:this.props.comment,user:this.userFor(this.props.comment)})):void 0,this.props.comment.replies_count>0?i({className:"comment__row-item"},this.props.showReplies?e({type:"button",className:"comment__action",onClick:this.toggleReplies},"["+(this.state.expandReplies?"-":"+")+"] ",osu.trans("comments.replies")," ("+osu.formatNumber(this.props.comment.replies_count)+")"):o(null,osu.trans("comments.replies"),": ",osu.formatNumber(this.props.comment.replies_count))):void 0,this.isDeleted()||null==this.props.comment.edited_at?void 0:(u=null!=(v=this.props.usersById[this.props.comment.edited_by_id])?v:n,i({className:"comment__row-item comment__row-item--info",dangerouslySetInnerHTML:{__html:osu.trans("comments.edited",{timeago:osu.timeago(this.props.comment.edited_at),user:null!=u.id?osu.link(laroute.route("users.show",{user:u.id}),u.username,{classNames:["comment__link"]}):_.escape(u.username)})}}))),this.state.showNewReply?i({className:"comment__reply-box"},s(CommentEditor,{parent:this.props.comment,close:this.closeNewReply,modifiers:this.props.modifiers})):void 0)),this.props.showReplies&&this.props.comment.replies_count>0?i({className:y},function(){var t,e,n;for(n=[],t=0,e=r.length;t<e;t++)a=r[t],n.push(s(h,{key:a.id,comment:a,commentsByParentId:this.props.commentsByParentId,usersById:this.props.usersById,userVotesByCommentId:this.props.userVotesByCommentId,commentableMetaById:this.props.commentableMetaById,depth:this.props.depth+1,parent:this.props.comment,modifiers:this.props.modifiers,currentSort:this.props.currentSort,moreComments:this.props.moreComments}));return n}.call(this),s(CommentShowMore,{parent:this.props.comment,sort:this.props.currentSort,comments:r,moreComments:this.props.moreComments,total:this.props.comment.replies_count,modifiers:this.props.modifiers,label:0===r.length?osu.trans("comments.show_replies"):void 0})):void 0)},h.prototype.renderVoteButton=function(){var t,n;return t=osu.classWithModifiers("comment-vote",this.props.modifiers),this.state.postingVote&&(t+=" comment-vote--posting"),this.hasVoted()?(t+=" comment-vote--on",n=null):(t+=" comment-vote--off",n=i({className:"comment-vote__hover"},"+1")),e({className:t,type:"button",onClick:this.voteToggle,disabled:this.state.postingVote||!this.canVote()},o({className:"comment-vote__text"},"+"+osu.formatNumberSuffixed(this.props.comment.votes_count,null,{maximumFractionDigits:1})),this.state.postingVote?o({className:"comment-vote__spinner"},s(Spinner)):void 0,n)},h.prototype.renderVoteText=function(){var t;return t="comment__action",this.hasVoted()&&(t+=" comment__action--active"),e({className:t,type:"button",onClick:this.voteToggle,disabled:this.state.postingVote},"+"+osu.formatNumberSuffixed(this.props.comment.votes_count,null,{maximumFractionDigits:1}))},h.prototype.canDelete=function(){return this.canModerate()||this.isOwner()},h.prototype.canEdit=function(){return this.canModerate()||this.isOwner()&&!this.isDeleted()},h.prototype.canHaveVote=function(){return!this.isDeleted()},h.prototype.canModerate=function(){return currentUser.is_admin||currentUser.is_gmt||currentUser.is_qat},h.prototype.canReport=function(){return null!=currentUser.id&&this.props.comment.user_id!==currentUser.id},h.prototype.canRestore=function(){return this.canModerate()},h.prototype.canVote=function(){return!this.isOwner()},h.prototype.commentableMeta=function(){var e,n,i;return null==(n=this.props.commentableMetaById[this.props.comment.commentable_type+"-"+this.props.comment.commentable_id])&&(n=this.props.commentableMetaById["-"]),n.url?(e=t,i={href:n.url}):(e=o,i=null),e(i,o({className:"fas fa-comment-alt"})," ",n.title)},h.prototype.isOwner=function(){return null!=this.props.comment.user_id&&this.props.comment.user_id===currentUser.id},h.prototype.hasVoted=function(){return null!=this.props.userVotesByCommentId[this.props.comment.id]},h.prototype.delete=function(){var t;if(confirm(osu.trans("common.confirmation")))return null!=(t=this.xhr.delete)&&t.abort(),this.xhr.delete=$.ajax(laroute.route("comments.destroy",{comment:this.props.comment.id}),{method:"DELETE"}).done(function(t){return $.publish("comment:updated",{comment:t})}).fail(function(t,e){if("abort"!==e)return osu.ajaxError(t)})},h.prototype.toggleEdit=function(){return this.setState({editing:!this.state.editing})},h.prototype.closeEdit=function(){return this.setState({editing:!1})},h.prototype.isDeleted=function(){return null!=this.props.comment.deleted_at},h.prototype.parentLink=function(e){var n,i;return i={title:l(e)},this.props.linkParent?(n=t,i.href=laroute.route("comments.show",{comment:e.id})):n=o,n(i,o({className:"fas fa-reply"})," ",this.userFor(e).username)},h.prototype.userFor=function(t){var e;return null!=(e=this.props.usersById[t.user_id])?e:null!=t.legacy_name?{username:t.legacy_name}:n},h.prototype.restore=function(){var t;return null!=(t=this.xhr.restore)&&t.abort(),this.xhr.restore=$.ajax(laroute.route("comments.restore",{comment:this.props.comment.id}),{method:"POST"}).done(function(t){return $.publish("comment:updated",{comment:t})}).fail(function(t,e){if("abort"!==e)return osu.ajaxError(t)})},h.prototype.toggleNewReply=function(){return this.setState({showNewReply:!this.state.showNewReply})},h.prototype.voteToggle=function(){var t,e,n,i;return this.setState({postingVote:!0}),this.hasVoted()?(t="DELETE",n="removed"):(t="POST",n="added"),null!=(e=this.xhr.vote)&&e.abort(),this.xhr.vote=$.ajax(laroute.route("comments.vote",{comment:this.props.comment.id}),{method:t}).always((i=this,function(){return i.setState({postingVote:!1})})).done(function(t){return function(e){return $.publish("comment:updated",{comment:e}),$.publish("commentVote:"+n,{id:t.props.comment.id})}}(this)).fail(function(t,e){if("abort"!==e)return osu.ajaxError(t)})},h.prototype.closeNewReply=function(){return this.setState({showNewReply:!1})},h.prototype.toggleReplies=function(){return this.setState({expandReplies:!this.state.expandReplies})},h}()}).call(window)},UaOV:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.NavButton=function(){function e(){this.hideOrShow=t(this.hideOrShow,this),this.load=t(this.load,this),this.containers=document.getElementsByClassName("js-nav-button--container"),this.items=document.getElementsByClassName("js-nav-button--item"),this.main=document.getElementsByClassName("js-nav-button"),addEventListener("turbolinks:load",this.load)}return e.prototype.load=function(){var t,e,n,i;if(this.listening||(this.listening=!0,$(window).on("throttled-resize",this.hideOrShow)),0!==this.main.length){for(this.itemWidth=this.items[0].offsetWidth,this.defaultWidth=0,e=0,n=(i=this.containers).length;e<n;e++)t=i[e],this.defaultWidth+=t.offsetWidth;return this.hideOrShow()}},e.prototype.hideOrShow=function(){var t,e,n,i,s,o,r,a,u;if(0!==this.main.length){for(t=this.main[0].offsetWidth,e=this.defaultWidth,i=0,o=(a=this.items).length;i<o;i++)a[i].classList.remove("hidden");if(t<e)for(s=0,r=(u=this.items).length;s<r;s++)if(n=u[s],e-=this.itemWidth,n.classList.add("hidden"),t>=e)return}},e}()}).call(window)},VAqo:function(t,e){(function(){var t,e={}.hasOwnProperty;t=function(t){var e;return e=parseInt(t,10),_.isFinite(e)?e:null},this.BeatmapsetFilter=function(){function n(){}return n.castFromString={mode:t,status:t,genre:t,language:t},n.charToKey={c:"general",m:"mode",s:"status",g:"genre",l:"language",e:"extra",r:"rank",played:"played",q:"query",sort:"sort"},n.keyToChar=function(){return null!=this._keyToChar?this._keyToChar:this._keyToChar=_.invert(this.charToKey)},n.defaults={general:"",extra:"",genre:null,language:null,mode:null,played:null,query:"",rank:"",status:0},n.expand=["genre","language","extra","rank","played"],n.fillDefaults=function(t){var e,i,s,o,r,a;for(a={},e=0,s=(o=n.keys).length;e<s;e++)a[i=o[e]]=null!=(r=t[i])?r:n.getDefault(t,i);return a},n.getDefault=function(t,e){var i,s;return n.defaults.hasOwnProperty(e)?n.defaults[e]:"sort"===e?(null!=(i=t.query)?i.trim().length:void 0)>0?"relevance_desc":4===(s=t.status)||5===s||6===s?"updated_desc":"ranked_desc":void 0},n.getDefaults=function(t){var e,i,s,o,r;for(r={},e=0,s=(o=n.keys).length;e<s;e++)r[i=o[e]]=n.getDefault(t,i);return r},n.keys=["general","extra","genre","language","mode","played","query","rank","sort","status"],n.queryParamsFromFilters=function(t){var n,i,s;if(null==currentUser.id)return{};for(i in n={},t)e.call(t,i)&&null!=(s=t[i])&&this.getDefault(t,i)!==s&&(n[this.keyToChar()[i]]=s);return n},n}()}).call(window)},"VrS/":function(t,e){var n,i,s=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{i="function"==typeof clearTimeout?clearTimeout:r}catch(t){i=r}}();var u,l=[],c=!1,h=-1;function p(){c&&u&&(c=!1,u.length?l=u.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=a(p);c=!0;for(var e=l.length;e;){for(u=l,l=[];++h<e;)u&&u[h].run();h=-1,e=l.length}u=null,c=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===r||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function m(t,e){this.fun=t,this.array=e}function f(){}s.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new m(t,e)),1!==l.length||c||a(d)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=f,s.addListener=f,s.once=f,s.off=f,s.removeListener=f,s.removeAllListeners=f,s.emit=f,s.prependListener=f,s.prependOnceListener=f,s.listeners=function(t){return[]},s.binding=function(t){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(t){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}},WHzX:function(t,e){(function(){this.Timeout=function(){function t(){}return t.clear=function(t){return clearTimeout(t)},t.set=function(t,e){return setTimeout(e,t)},t}()}).call(window)},WK7C:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.LandingUserStats=function(){function e(){var e;this.resize=t(this.resize,this),this.loadData=t(this.loadData,this),this.margin={top:40,right:0,bottom:0,left:0},this.peakR=5,this.svgContainerOuter=d3.select(".js-landing-graph"),this.svgContainerOuter.selectAll("svg").remove(),this.svgContainerInner=this.svgContainerOuter.append("svg").attr("class","landing-graph"),this.svg=this.svgContainerInner.append("g").attr("transform","translate("+this.margin.left+", "+(this.margin.top+1)+")"),this.svgArea=this.svg.append("path").attr("class","landing-graph__area"),this.svgPeakText=this.svg.append("text").attr("class","landing-graph__text").attr("y",2*-this.peakR),this.svgPeakCircle=this.svg.append("circle").attr("class","landing-graph__circle").attr("cy",0).attr("r",this.peakR),this.scaleX=d3.scaleLinear(),this.scaleY=d3.scaleTime(),this.area=d3.area().curve(d3.curveBasis).x((e=this,function(t){return e.scaleX(t.x)})).y0(function(t){return function(){return t.height}}(this)).y1(function(t){return function(e){return t.scaleY(e.y)}}(this)),this.loadData(),this.resize()}return e.prototype.loadData=function(){if(this.data=osu.parseJson("json-stats"),!_.isEmpty(this.data))return this.maxElem=_.maxBy(this.data,function(t){return t.y}),this.scaleX.domain(d3.extent(this.data,function(t){return t.x})),this.scaleY.domain([0,d3.max(this.data,function(t){return t.y})]),this.svgPeakText.text(osu.trans("home.landing.peak",{count:osu.formatNumber(this.maxElem.y)})),this.peakTextLength=this.svgPeakText.node().getComputedTextLength()},e.prototype.resize=function(){var t;if(!_.isEmpty(this.data))return this.width=parseInt(this.svgContainerOuter.style("width"))-this.margin.left-this.margin.right,this.height=parseInt(this.svgContainerOuter.style("height"))-this.margin.top-this.margin.bottom,this.scaleX.range([0,this.width]),this.scaleY.range([this.height,0]),this.svgContainerInner.attr("width",this.width+this.margin.left+this.margin.right).attr("height",this.height+this.margin.top+this.margin.bottom),this.svgArea.datum(this.data).attr("d",this.area),this.svgPeakCircle.attr("cx",this.scaleX(this.maxElem.x)),this.svgPeakText.attr("x",(t=this,function(){var e;return e=t.scaleX(t.maxElem.x)+2*t.peakR,t.peakTextLength+e>t.width?t.scaleX(t.maxElem.x)-(t.peakTextLength+2*t.peakR):e}))},e}()}).call(window)},XZkR:function(t,e){(function(){$.ajaxPrefilter(function(t){if(t.crossDomain)return t.contents.script=!1})}).call(window)},Y4VH:function(t,e){(function(){this.Hits=function(){function t(){}return t.generate=function(t){var e,n;return n=t.score,{header:(e="mania"===t.playmode?["count_geki","count_300","count_katu","count_100","count_50"]:["count_300","count_100","count_50"]).map(function(t){return osu.trans("common.score_count."+t)}).join("/"),values:e.map(function(t){return osu.formatNumber(n.statistics[t])}).join("/")}},t}()}).call(window)},YEnZ:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.BeatmapPack=function(){function e(e){var n;this.slideDown=t(this.slideDown,this),this.close=t(this.close,this),this.open=t(this.open,this),this.onClick=t(this.onClick,this),this.el=e,this.packId=e.dataset.packId,this.packBody=this.el.querySelector(".js-accordion__item-body"),this.expander=this.el.querySelector(".js-accordion__item-header"),this.busy=!1,this.isCurrent=this.el.classList.contains("js-accordion__item--expanded"),$(".js-accordion").on("beatmappack:clicked",this.onClick),$(this.expander).on("click",(n=this,function(t){return $(n.el).trigger("beatmappack:clicked",n.packId)}))}return e.initialize=function(){var t,n,i,s,o;for(o=[],n=0,i=(s=document.querySelectorAll(".js-beatmap-pack")).length;n<i;n++)t=s[n],o.push(new e(t));return o},e.prototype.onClick=function(t,e){return t.stopPropagation(),this.isCurrent||this.packId!==e?this.close():this.open()},e.prototype.open=function(){var t,e;if(this.isCurrent=!0,!this.busy)return this.nextFrame((e=this,function(){return $(e.el).addClass("js-accordion__item--expanded")})),null!=(t=this.packBody.innerHTML)&&t.length?this.isCurrent?this.slideDown():void 0:(this.busy=!0,this.getBeatmapPackItem(this.packId).done(function(t){return function(e){return t.nextFrame(function(){if(t.packBody.innerHTML=e,t.isCurrent)return t.slideDown()})}}(this)).fail(osu.ajaxError).always(function(t){return function(){return t.busy=!1}}(this)))},e.prototype.close=function(){var t;if(this.isCurrent)return this.isCurrent=!1,this.nextFrame((t=this,function(){return t.packBody.style.height="0",$(t.el).removeClass("js-accordion__item--expanded")}))},e.prototype.getBeatmapPackItem=function(t){return $.get(laroute.route("packs.show",{pack:t}))},e.prototype.slideDown=function(){var t,e;return this.packBody.style.height="",t=this.packBody.getBoundingClientRect(),this.packBody.style.height="0",this.nextFrame((e=this,function(){return e.packBody.style.height=t.height+"px"}))},e.prototype.nextFrame=function(t){return window.requestAnimationFrame(t)},e}()}).call(window)},YVos:function(t,e){(function(){this.Admin={},this.Admin.Contest={},this.BeatmapDiscussions={},this.Beatmaps={},this.BeatmapsetPage={},this.ChangelogIndex={},this.ChangelogBuild={},this.CommentsIndex={},this.CommentsShow={},this.Contest={},this.Contest.Entry={},this.Contest.Voting={},this.MPHistory={},this.ProfilePage={},this.Ranking={},this.Status={}}).call(window)},ZbN1:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.TurbolinksReload=function(){function e(){this.unload=t(this.unload,this),this.load=t(this.load,this),this.loaded={},addEventListener("turbolinks:before-cache",this.unload)}return"js-extra-script",e.prototype.load=function(t,e){var n;if(null==this.loaded[t])return(n=document.createElement("script")).classList.add("js-extra-script"),n.onload=function(){if(null!=n.parentElement)return n.parentElement.removeChild(n),"function"==typeof e?e():void 0},n.src=t,document.body.appendChild(n),this.loaded[t]=!0},e.prototype.unload=function(){var t,e,n,i,s;for(s=[],e=0,n=(i=document.querySelectorAll(".js-extra-script")).length;e<n;e++)t=i[e],s.push(document.body.removeChild(t));return s},e}()}).call(window)},aP1p:function(t,e){(function(){var t={}.hasOwnProperty;this.BeatmapHelper=function(){function e(){}return e.default=function(t){var n,i,s,o,r,a,u,l;if(i=t.group,s=t.items,a=t.mode,null!=s)return null!=(l=_.findLast(s,function(t){return null==t.deleted_at&&!t.convert}))?l:_.last(s);if(null!=i)for(o=0,r=(u=null!=a?[a]:e.modes).length;o<r;o++)if(a=u[o],null!=(n=e.default({items:i[a]})))return n},e.find=function(t){var n,i,s,o,r,a,u;for(n=t.group,i=t.id,o=0,r=(u=null!=(a=t.mode)?[a]:e.modes).length;o<r;o++)if(a=u[o],null!=(s=_.find(n[a],{id:i})))return s},e.getDiffRating=function(t){return t<1.5?"easy":t<2.25?"normal":t<3.75?"hard":t<5.25?"insane":t<6.75?"expert":"expert-plus"},e.group=function(n){var i,s,o;for(o in i=_.groupBy(n,"mode"))t.call(i,o)&&(s=i[o],i[o]=e.sort(s));return i},e.modes=["osu","taiko","fruits","mania"],e.sort=function(t){return"mania"===t[0].mode?_.orderBy(t,["convert","cs","difficulty_rating"],["desc","asc","asc"]):_.orderBy(t,["convert","difficulty_rating"],["desc","asc"])},e}()}).call(window)},auMk:function(t,e){(function(){this.Polyfills=function(){function t(){this.customEvent(),this.localStorage(),this.mathTrunc()}return t.prototype.customEvent=function(){var t;if("function"!=typeof CustomEvent)return(t=function(t,e){var n;return null==e&&(e={bubbles:!1,cancelable:!1,detail:void 0}),(n=document.createEvent("CustomEvent")).initCustomEvent(t,e.bubbles,e.cancelable,e.detail),n}).prototype=window.Event.prototype,window.CustomEvent=t},t.prototype.localStorage=function(){var t;try{return window.localStorage.setItem("_test","1"),window.localStorage.removeItem("_test")}catch(e){return t=new DumbStorage,window.localStorage=t,window.localStorage.__proto__=t}},t.prototype.mathTrunc=function(){return null!=Math.trunc?Math.trunc:Math.trunc=function(t){return t-t%1}},t}()}).call(window)},bDmD:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ReplyPreview=function(){function e(){this.resetPreview=t(this.resetPreview,this),this.hidePreview=t(this.hidePreview,this),this.showPreview=t(this.showPreview,this),this.fetchPreview=t(this.fetchPreview,this),this.input=".js-forum-topic-reply--input",this.writeButton=".js-forum-reply-preview--hide",this.previewButton=".js-forum-reply-preview--show",this.editBox=".js-forum-reply-write",this.previewBox=".js-forum-reply-preview",this.lastBody=null,$(document).on("click",".js-forum-reply-preview--show",this.fetchPreview),$(document).on("click",".js-forum-reply-preview--hide",this.hidePreview),$(document).on("turbolinks:load",this.resetPreview)}return e.prototype.fetchPreview=function(t){var e,n,i;if(t.preventDefault(),e=$(this.previewBox).find(".js-forum-reply-preview--content"),i=laroute.route("bbcode-preview"),n=$(this.input).val(),!$(this.previewButton).hasClass("active")){var s;if(n!==this.lastBody)return $.ajax({url:i,method:"POST",data:{text:n}}).done((s=this,function(t){return s.lastBody=n,e.html(t),s.showPreview()}));this.showPreview()}},e.prototype.showPreview=function(){return $(this.editBox).addClass("hidden"),$(this.previewBox).removeClass("hidden"),$(this.previewButton).addClass("js-is-active"),$(this.writeButton).removeClass("js-is-active"),osu.pageChange()},e.prototype.hidePreview=function(t){return null!=t&&t.preventDefault(),$(this.editBox).removeClass("hidden"),$(this.previewBox).addClass("hidden"),$(this.previewButton).removeClass("js-is-active"),$(this.writeButton).addClass("js-is-active"),osu.pageChange()},e.prototype.resetPreview=function(){return this.lastBody=null},e}()}).call(window)},byFe:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumAutoClick=function(){function e(){var e;this.previousClick=t(this.previousClick,this),this.onScroll=t(this.onScroll,this),this.nextClick=t(this.nextClick,this),this._triggerDistance=1200,this.nextLink=document.getElementsByClassName("js-forum__posts-show-more--next"),this.previousLink=document.getElementsByClassName("js-forum__posts-show-more--previous"),$(window).on("throttled-scroll",_.throttle(this.onScroll,1e3)),$(document).on("turbolinks:load osu:page:change",(e=this,function(){return Timeout.set(1e3,e.onScroll)}))}return e.prototype.commonClick=function(t){if(0!==t.getBoundingClientRect().height&&"1"!==t.getAttribute("data-failed"))return t.click()},e.prototype.nextClick=function(){if(0!==this.nextLink.length&&!(this.nextLink[0].getBoundingClientRect().top>document.documentElement.clientHeight+this._triggerDistance))return this.commonClick(this.nextLink[0])},e.prototype.onScroll=function(){return this.previousClick(),this.nextClick()},e.prototype.previousClick=function(){if(0!==this.previousLink.length&&!(this.previousLink[0].getBoundingClientRect().top<-this._triggerDistance))return this.commonClick(this.previousLink[0])},e}()}).call(window)},cDcd:function(t,e){t.exports=React},dKZ2:function(t,e){(function(){var t,e,n;n=ReactDOMFactories.span,e=ReactDOMFactories.i,React.createElement,t=function(t){var i,s;return s=t.position,i=t.icon,n({key:s,className:"icon-stack__icon icon-stack__icon--"+s},e({className:"fas fa-fw fa-"+i}))},this.IconExpand=function(i){var s,o,r,a;return s=null==(r=i.expand)||r,o=null!=(a=i.parentClass)?a:"",n({className:"icon-stack "+o},n({className:"icon-stack__base"},e({className:"fas fa-fw fa-angle-down"})),s?[t({position:"top",icon:"angle-up"}),t({position:"bottom",icon:"angle-down"})]:[t({position:"top",icon:"angle-down"}),t({position:"bottom",icon:"angle-up"})])}}).call(window)},dbKQ:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StatusMap=function(){function e(e){this.update=t(this.update,this),this.circleSize=8,this.svg=d3.select(e).append("svg").attr("width","100%").attr("height","100%").attr("viewBox","0 0 1350 637").attr("preserveAspectRatio","xMinYMin"),this.svg.append("svg:image").attr("xlink:href","/images/backgrounds/world_map.svg").attr("width",1350).attr("height",597).attr("x",0).attr("y",20)}return e.prototype.update=function(t){var e,n,i,s;for(this.svg.selectAll("circle").remove(),this.svg.selectAll("text").remove(),i=[],e=0,n=t.length;e<n;e++)s=t[e],this.svg.append("circle").attr("r",this.circleSize).attr("cx",s.x).attr("cy",s.y).classed("status-map__circle status-map__circle--"+s.state,!0),this.svg.append("circle").attr("r",this.circleSize).attr("cx",s.x).attr("cy",s.y).classed("status-map__circle status-map__circle--"+s.state,!0).on("mouseover",function(t){return function(){var e;return(e=d3.select(d3.event.target)).transition().duration(1e3).attr("r",t.circleSize+20).style("opacity",0).on("end",function(){return e.attr("r",t.circleSize).style("opacity",1)})}}(this)),this.svg.append("text").text(s.name).attr("x",s.x).attr("y",s.y-40).classed("status-map__text",!0),i.push(this.svg.append("text").text(s.players+" players "+("down"===s.state?"offline":"online")).attr("x",s.x).attr("y",s.y-20).classed("status-map__text",!0));return i},e}()}).call(window)},dcvb:function(t,e){(function(){var t;t=ReactDOMFactories.div,this.Mod=function(e){var n,i,s,o,r,a;for(r=null!=(a=e.modifiers)?a:[],o=e.mod,n="mod",i=0,s=r.length;i<s;i++)n+=" mod--"+r[i];return t({className:n+=" mod--"+o,title:osu.trans("beatmaps.mods."+o)})}}).call(window)},dqUM:function(t,e){(function(){var t,e,n,i=function(t,e){return function(){return t.apply(e,arguments)}},s={}.hasOwnProperty;React.createElement,e=ReactDOMFactories.div,t="notification-banner-v2",n=document.getElementsByClassName("js-notification-banners"),this.NotificationBanner=function(o){function r(t){this.createPortalContainer=i(this.createPortalContainer,this),this.removePortalContainer=i(this.removePortalContainer,this),this.render=i(this.render,this),this.componentWillUnmount=i(this.componentWillUnmount,this),this.componentDidMount=i(this.componentDidMount,this),r.__super__.constructor.call(this,t),this.eventId="notification-banner-"+osu.uuid(),this.createPortalContainer()}return function(t,e){for(var n in e)s.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(r,React.PureComponent),r.prototype.componentDidMount=function(){return $(document).on("turbolinks:before-cache."+this.eventId,this.removePortalContainer)},r.prototype.componentWillUnmount=function(){return $(document).off("."+this.eventId),this.removePortalContainer()},r.prototype.render=function(){var n;return n=e({className:t+" "+t+"--"+this.props.type},e({className:t+"__col "+t+"__col--icon"}),e({className:t+"__col "+t+"__col--label"},e({className:t+"__type"},this.props.type),e({className:t+"__text"},this.props.title)),e({className:t+"__col"},e({className:t+"__text"},this.props.message))),ReactDOM.createPortal(n,this.portalContainer)},r.prototype.removePortalContainer=function(){return n[0].removeChild(this.portalContainer)},r.prototype.createPortalContainer=function(){return this.portalContainer=document.createElement("div"),n[0].appendChild(this.portalContainer)},r}()}).call(window)},drar:function(t,e,n){(function(t){var i=void 0!==t&&t||"undefined"!=typeof self&&self||window,s=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(s.call(setTimeout,i,arguments),clearTimeout)},e.setInterval=function(){return new o(s.call(setInterval,i,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n("7nD5"),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n("BemA"))},ecRA:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumSearchModal=function(){function e(e){this.forum=e,this.reposition=t(this.reposition,this),this.deactivate=t(this.deactivate,this),this.activate=t(this.activate,this),this.hideModal=t(this.hideModal,this),this.box=document.getElementsByClassName("js-forum-search-box"),this.activeBox=document.getElementsByClassName("js-forum-search-box--active"),this.button=document.getElementsByClassName("js-forum-search-button"),$(window).on("throttled-resize throttled-scroll",this.reposition),$(document).on("show.bs.modal","#forum-search-modal",this.activate),$(document).on("hidden.bs.modal","#forum-search-modal",this.deactivate),$.subscribe("forum:topic:jumpTo",this.hideModal)}return e.prototype.hideModal=function(){return $("#forum-search-modal").modal("hide")},e.prototype.activate=function(t){var e;return this.button[0].style.opacity=0,this.box[0].classList.add("js-forum-search-box--active"),this.reposition(),(e=$(t.target).find('.js-forum-posts-jump-to [name="n"]').val(this.forum.currentPostPosition))[0].selectionStart=0,e[0].selectionEnd=e.val().length},e.prototype.deactivate=function(){return this.button[0].style.opacity=1,this.box[0].classList.remove("js-forum-search-box--active")},e.prototype.reposition=function(){var t,e;if(0!==this.activeBox.length)return t=window.innerHeight-this.button[0].getBoundingClientRect().bottom,e=window.innerWidth-this.button[0].getBoundingClientRect().right,this.box[0].style.bottom=t+"px",this.box[0].style.right=e+"px"},e}()}).call(window)},exjS:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.DumbStorage=function(){function e(){this.setItem=t(this.setItem,this),this.removeItem=t(this.removeItem,this),this.getItem=t(this.getItem,this),this.clear=t(this.clear,this),this._data={}}return e.prototype.clear=function(){return this._data={}},e.prototype.getItem=function(t){return this._data.hasOwnProperty(t)?this._data[t]:null},e.prototype.removeItem=function(t){return delete this._data[t]},e.prototype.setItem=function(t,e){return this._data[t]=String(e)},e}()}).call(window)},f3YG:function(t,e,n){"use strict";e.a=function(t){var e=this.constructor;return this.then(function(n){return e.resolve(t()).then(function(){return n})},function(n){return e.resolve(t()).then(function(){return e.reject(n)})})}},f9wg:function(t,e,n){"use strict";e.__esModule=!0;var i=n("CliL");e.default=i.TextareaAutosize},faye:function(t,e){t.exports=ReactDOM},gfK4:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.SyncHeight=function(){function e(){this.sync=t(this.sync,this),this.onResize=t(this.onResize,this),this.observe=t(this.observe,this),this.targets=document.getElementsByClassName("js-sync-height--target"),this.references=document.getElementsByClassName("js-sync-height--reference"),$(document).on("turbolinks:load osu:page:change",this.sync),$(window).on("throttled-resize",this.sync),this.observe()}return e.prototype.observe=function(){var t;return t={attributes:!0,subtree:!0},this.observer=new MutationObserver(this.onResize),this.observer.observe(document,t)},e.prototype.onResize=function(t){var e,n;for(e=0,n=t.length;e<n;e++)if("TEXTAREA"===t[e].target.tagName)return this.sync()},e.prototype.sync=function(){var t,e,n,i,s,o,r,a,u,l,c;for(e={},n=0,s=(r=this.references).length;n<s;n++)e[(u=r[n]).getAttribute("data-sync-height-target")]=u.offsetHeight;for(l=[],i=0,o=(a=this.targets).length;i<o;i++)null!=(t=e[(c=a[i]).getAttribute("data-sync-height-id")])?l.push(c.style.minHeight=t+"px"):l.push(void 0);return l},e}()}).call(window)},hTA1:function(t,e){(function(){var t;null==this.polyfills&&(this.polyfills=new Polyfills),Turbolinks.setProgressBarDelay(0),Lang.setLocale(currentLocale),jQuery.timeago.settings.allowFuture=!0,$(document).on("turbolinks:request-start",LoadingOverlay.show),$(document).on("turbolinks:request-end",LoadingOverlay.hide),$(document).on("submit","form",function(t){if("0"!==t.currentTarget.dataset.loadingOverlay)return LoadingOverlay.show()}),$(document).on("turbolinks:load",function(){return BeatmapPack.initialize(),StoreSupporterTag.initialize(),StoreCheckout.initialize()}),null==this.currentUserObserver&&(this.currentUserObserver=new CurrentUserObserver),null==this.throttledWindowEvents&&(this.throttledWindowEvents=new ThrottledWindowEvents),null==this.syncHeight&&(this.syncHeight=new SyncHeight),null==this.stickyHeader&&(this.stickyHeader=new StickyHeader),null==this.accountEdit&&(this.accountEdit=new AccountEdit),null==this.accountEditAvatar&&(this.accountEditAvatar=new AccountEditAvatar),null==this.accountEditPlaystyle&&(this.accountEditPlaystyle=new AccountEditPlaystyle),null==this.accountEditBlocklist&&(this.accountEditBlocklist=new AccountEditBlocklist),null==this.beatmapsetDownloadObserver&&(this.beatmapsetDownloadObserver=new BeatmapsetDownloadObserver),null==this.changelogChartLoader&&(this.changelogChartLoader=new ChangelogChartLoader),null==this.checkboxValidation&&(this.checkboxValidation=new CheckboxValidation),null==this.clickMenu&&(this.clickMenu=new ClickMenu),null==this.fancyGraph&&(this.fancyGraph=new FancyGraph),null==this.formClear&&(this.formClear=new FormClear),null==this.formError&&(this.formError=new FormError),null==this.formPlaceholderHide&&(this.formPlaceholderHide=new FormPlaceholderHide),null==this.formToggle&&(this.formToggle=new FormToggle),null==this.forum&&(this.forum=new Forum),null==this.forumAutoClick&&(this.forumAutoClick=new ForumAutoClick),null==this.forumCover&&(this.forumCover=new ForumCover),null==this.forumTopicTitle&&(this.forumTopicTitle=new ForumTopicTitle),null==this.forumTopicWatchAjax&&(this.forumTopicWatchAjax=new ForumTopicWatchAjax),null==this.gallery&&(this.gallery=new Gallery),null==this.globalDrag&&(this.globalDrag=new GlobalDrag),null==this.landingGraph&&(this.landingGraph=new LandingGraph),null==this.menu&&(this.menu=new Menu),null==this.nav2&&(this.nav2=new Nav2),null==this.navButton&&(this.navButton=new NavButton),null==this.osuAudio&&(this.osuAudio=new OsuAudio),null==this.osuLayzr&&(this.osuLayzr=new OsuLayzr),null==this.postPreview&&(this.postPreview=new PostPreview),null==this.reactTurbolinks&&(this.reactTurbolinks=new ReactTurbolinks),null==this.replyPreview&&(this.replyPreview=new ReplyPreview),null==this.scale&&(this.scale=new Scale),null==this.search&&(this.search=new Search),null==this.stickyFooter&&(this.stickyFooter=new StickyFooter),null==this.timeago&&(this.timeago=new Timeago),null==this.tooltipBeatmap&&(this.tooltipBeatmap=new TooltipBeatmap),null==this.tooltipDefault&&(this.tooltipDefault=new TooltipDefault),null==this.turbolinksReload&&(this.turbolinksReload=new TurbolinksReload),null==this.userCard&&(this.userCard=new UserCard),null==this.userLogin&&(this.userLogin=new UserLogin),null==this.userVerification&&(this.userVerification=new UserVerification),null==this.formConfirmation&&(this.formConfirmation=new FormConfirmation(this.formError)),null==this.forumPostsSeek&&(this.forumPostsSeek=new ForumPostsSeek(this.forum)),null==this.forumSearchModal&&(this.forumSearchModal=new ForumSearchModal(this.forum)),null==this.forumTopicPostJump&&(this.forumTopicPostJump=new ForumTopicPostJump(this.forum)),null==this.forumTopicReply&&(this.forumTopicReply=new ForumTopicReply(this.forum,this.stickyFooter)),null==this.twitchPlayer&&(this.twitchPlayer=new TwitchPlayer(this.turbolinksReload)),_exported.WindowVHPatcher.init(window),$(document).on("change",".js-url-selector",function(t){return osu.navigate(t.target.value,"1"===t.target.dataset.keepScroll)}),$(document).on("keydown",function(t){if(27===t.keyCode)return $.publish("key:esc")}),reactTurbolinks.register("countdownTimer",CountdownTimer,function(t){return{deadline:t.dataset.deadline}}),reactTurbolinks.register("friendButton",FriendButton,function(t){return{container:t,userId:parseInt(t.dataset.target)}}),reactTurbolinks.register("blockButton",BlockButton,function(t){return{container:t,userId:parseInt(t.dataset.target)}}),reactTurbolinks.register("beatmapset-panel",BeatmapsetPanel,function(t){return JSON.parse(t.dataset.beatmapsetPanel)}),reactTurbolinks.register("spotlight-select-options",_exported.SpotlightSelectOptions,function(){return osu.parseJson("json-spotlight-select-options")}),reactTurbolinks.register("comments",CommentsManager,function(t){var e;return(e=JSON.parse(t.dataset.props)).component=Comments,e}),t=document.location.protocol+"//"+document.location.host,document.location.port&&(t+=":"+document.location.port),t+="/",$.expr[":"].internal=function(e,n,i,s){var o;return(o=$(e).attr("href")||"").substring(0,t.length)===t||-1===o.indexOf(":")}}).call(window)},hjjs:function(t,e,n){"use strict";n.r(e);n("XZkR"),n("Nqw+"),n("vqYE"),n("0356"),n("TgbU"),n("y0Iw"),n("0Sjo"),n("aP1p"),n("YEnZ"),n("0tzJ"),n("VAqo"),n("RgQJ"),n("oWhP"),n("FLFi"),n("PBOi"),n("6FbF"),n("Ij1D"),n("wuZa"),n("exjS"),n("s7MB"),n("E+Th"),n("pAZq"),n("xHv7"),n("sWOL"),n("Kd0U"),n("pVrk"),n("t+h0"),n("byFe"),n("jepR"),n("JER7"),n("ecRA"),n("ICEo"),n("6TQG"),n("pt+B"),n("o5lo"),n("E/7X"),n("BzC5"),n("tTWz"),n("Y4VH"),n("+3o9"),n("L6Lm"),n("WK7C"),n("2uEk"),n("FcZw"),n("icRW"),n("UaOV"),n("U4GN"),n("GXtz"),n("6Laf"),n("auMk"),n("MRAD"),n("GwZD"),n("52Ca"),n("bDmD"),n("upGs"),n("LgLm"),n("MWnb"),n("HZVD"),n("dbKQ"),n("Q9e0"),n("lPUA"),n("5ASV"),n("EhQP"),n("JXhK"),n("gfK4"),n("JYmG"),n("7mzp"),n("WHzX"),n("IBdx"),n("9put"),n("ZbN1"),n("Ny+b"),n("EVQW"),n("ulBq"),n("NXHL"),n("Dzhp"),n("+U5f"),n("6Z8S"),n("yP+D"),n("YVos"),n("0EjP"),n("PTft"),n("j236"),n("mQSo"),n("q3z+"),n("6nUW"),n("jbZF"),n("7dd3"),n("S5CA"),n("EaeJ"),n("rIpw"),n("2b+G"),n("O0zI"),n("UVl7"),n("w9NC"),n("stCr"),n("2LKk"),n("zaxE"),n("If6E"),n("FVE9"),n("dKZ2"),n("NW+U"),n("dcvb"),n("De3I"),n("dqUM"),n("0KrW"),n("R6iF"),n("SYfz"),n("/BGJ"),n("GLyB"),n("y/Gi"),n("U+uL"),n("TY2o"),n("+FrL"),n("kAex"),n("Os89"),n("K1Kf"),n("Go/u"),n("CFbt"),n("rEDz"),n("8DVv"),n("38ot"),n("HRtH"),n("5hXa"),n("snad");var i,s=n("cDcd"),o=n("NzAu"),r=function(t,e){return function(){return t.apply(e,arguments)}},a={}.hasOwnProperty,u=function(t){function e(t){this.reset=r(this.reset,this),this.render=r(this.render,this),this.mountObserver=r(this.mountObserver,this),this.onScroll=r(this.onScroll,this),this.onClick=r(this.onClick,this),this.componentWillUnmount=r(this.componentWillUnmount,this),e.__super__.constructor.call(this,t),this.state={lastScrollY:null}}return function(t,e){for(var n in e)a.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.prototype.componentWillUnmount=function(){if(document.removeEventListener("scroll",this.onScroll),null!=this.observer)return this.observer.disconnect(),this.observer=null},e.prototype.onClick=function(t){var e,n;return null!=this.state.lastScrollY?(window.scrollTo(window.pageXOffset,this.state.lastScrollY),this.setState({lastScrollY:null})):(n=null!=(null!=(e=this.props.anchor)?e.current:void 0)?$(this.props.anchor.current).offset().top:0,window.pageYOffset>n?(this.setState({lastScrollY:window.pageYOffset}),window.scrollTo(window.pageXOffset,n),this.mountObserver()):void 0)},e.prototype.onScroll=function(t){if(this.setState({lastScrollY:null}),document.removeEventListener("scroll",this.onScroll),null!=this.observer)return this.observer.disconnect(),this.observer=null},e.prototype.mountObserver=function(){var t,e,n,i;return null!=window.IntersectionObserver?(n=null!=(t=null!=(e=this.props.anchor)?e.current:void 0)?t:document.body,this.observer=new IntersectionObserver((i=this,function(t){var e,s,o,r;for(r=[],s=0,o=t.length;s<o;s++){if((e=t[s]).target===n&&0===e.boundingClientRect.top){document.addEventListener("scroll",i.onScroll);break}r.push(void 0)}return r})),this.observer.observe(n)):Timeout.set(0,function(t){return function(){return document.addEventListener("scroll",t.onScroll)}}(this))},e.prototype.render=function(){return Object(o.button)({className:"back-to-top","data-tooltip-float":"fixed",onClick:this.onClick,title:null!=this.state.lastScrollY?osu.trans("common.buttons.back_to_previous"):osu.trans("common.buttons.back_to_top")},Object(o.i)({className:null!=this.state.lastScrollY?"fas fa-angle-down":"fas fa-angle-up"}))},e.prototype.reset=function(){return this.setState({lastScrollY:null})},e}(),l=n("faye"),c=function(t,e){return function(){return t.apply(e,arguments)}},h={}.hasOwnProperty,p=function(t){function e(){this.renderPortalContent=c(this.renderPortalContent,this),this.render=c(this.render,this),this.hideModal=c(this.hideModal,this),this.handleEsc=c(this.handleEsc,this),this.componentWillUnmount=c(this.componentWillUnmount,this),this.componentDidUpdate=c(this.componentDidUpdate,this),this.componentDidMount=c(this.componentDidMount,this),this.ref=Object(s.createRef)()}return function(t,e){for(var n in e)h.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.isOpen=function(){return document.body.classList.contains("js-react-modal---is-open")},e.prototype.close=function(){return document.body.classList.remove("js-react-modal---is-open"),Blackout.toggle(!1,.5)},e.prototype.componentDidMount=function(){var t;return document.body.appendChild(this.portal),document.addEventListener("keydown",this.handleEsc),$(document).on("turbolinks:before-cache.modal",(t=this,function(){return t.close(),document.body.removeChild(t.portal)})),this.props.visible?this.open():this.close()},e.prototype.componentDidUpdate=function(t){if(t.visible!==this.props.visible)return this.props.visible?this.open():this.close()},e.prototype.componentWillUnmount=function(){return this.close(),document.removeEventListener("keydown",this.handleEsc),$(document).off(".modal")},e.prototype.handleEsc=function(t){var e;if(27===t.keyCode)return"function"==typeof(e=this.props).onClose?e.onClose():void 0},e.prototype.hideModal=function(t){var e;if(0===t.button&&t.target===this.ref.current)return"function"==typeof(e=this.props).onClose?e.onClose():void 0},e.prototype.open=function(){return document.body.classList.add("js-react-modal---is-open"),Blackout.toggle(!0,.5)},e.prototype.render=function(){return null==this.portal&&(this.portal=document.createElement("div")),Object(l.createPortal)(this.renderPortalContent(),this.portal)},e.prototype.renderPortalContent=function(){return Object(o.div)({className:"js-react-modal",onClick:this.hideModal,ref:this.ref},this.props.children)},e}(),d=function(t,e){return function(){return t.apply(e,arguments)}},m={}.hasOwnProperty,f=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},g=function(t){function e(t){var n;this.toggleSelector=d(this.toggleSelector,this),this.hideSelector=d(this.hideSelector,this),this.renderOption=d(this.renderOption,this),this.render=d(this.render,this),this.componentDidUpdate=d(this.componentDidUpdate,this),this.componentDidMount=d(this.componentDidMount,this),e.__super__.constructor.call(this,t),this.bn=null!=(n=this.props.bn)?n:"select-options",this.hasBlackout=this.props.blackout||void 0===this.props.blackout,this.ref=Object(s.createRef)(),this.state={showingSelector:!1}}return function(t,e){for(var n in e)m.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.prototype.componentDidMount=function(){return document.addEventListener("click",this.hideSelector)},e.prototype.componentDidUpdate=function(t,e){if(this.hasBlackout&&e.showingSelector!==this.state.showingSelector)return Blackout.toggle(this.state.showingSelector,.5)},e.prototype.componentWillUnmount=function(){return document.removeEventListener("click",this.hideSelector)},e.prototype.render=function(){var t,e,n;return t=""+this.bn,this.state.showingSelector&&(t+=" "+this.bn+"--selecting"),Object(o.div)({className:t,ref:this.ref},Object(o.div)({className:this.bn+"__select"},this.renderItem({children:[Object(o.div)({className:"u-ellipsis-overflow",key:"current"},null!=(n=this.props.selected)?n.text:void 0),Object(o.div)({key:"decoration",className:this.bn+"__decoration"},Object(o.i)({className:"fas fa-chevron-down"}))],item:this.props.selected,onClick:this.toggleSelector})),Object(o.div)({className:this.bn+"__selector"},function(){var t,n,i,s;for(s=[],t=0,n=(i=this.props.options).length;t<n;t++)e=i[t],s.push(this.renderOption(e));return s}.call(this)))},e.prototype.renderOption=function(t){var e,n;return this.renderItem({children:[Object(o.div)({className:"u-ellipsis-overflow",key:t.id},t.text)],item:t,selected:(null!=(e=this.props.selected)?e.id:void 0)===t.id,onClick:(n=this,function(e){return n.itemSelected(e,t)})})},e.prototype.renderItem=function(t){var e,n,i,s,r,a;return e=t.children,i=t.item,s=t.onClick,a=null!=(r=t.selected)&&r,n=this.bn+"__item",a&&(n+=" "+this.bn+"__item--selected"),null!=this.props.renderItem?this.props.renderItem({children:e,item:i,onClick:s,cssClasses:n}):Object(o.a)({className:n,href:"#",key:i.id,onClick:s},e)},e.prototype.hideSelector=function(t){var e;if(0===t.button&&(e=this.ref.current,!(f.call(t.composedPath(),e)>=0)))return this.setState({showingSelector:!1})},e.prototype.itemSelected=function(t,e){var n;if(0===t.button)return t.preventDefault(),this.setState({showingSelector:!1}),"function"==typeof(n=this.props).onItemSelected?n.onItemSelected(e):void 0},e.prototype.toggleSelector=function(t){if(0===t.button)return t.preventDefault(),this.setState({showingSelector:!this.state.showingSelector})},e}(),v=function(t,e){return function(){return t.apply(e,arguments)}},y={}.hasOwnProperty;i="report-form";var b,w=function(t){function e(t){this.sendReport=v(this.sendReport,this),this.renderFormContent=v(this.renderFormContent,this),this.renderForm=v(this.renderForm,this),this.render=v(this.render,this),this.onItemSelected=v(this.onItemSelected,this),e.__super__.constructor.call(this,t),this.options=[{id:"Cheating",text:osu.trans("users.report.options.cheating")},{id:"Insults",text:osu.trans("users.report.options.insults")},{id:"Spam",text:osu.trans("users.report.options.spam")},{id:"UnwantedContent",text:osu.trans("users.report.options.unwanted_content")},{id:"Nonsense",text:osu.trans("users.report.options.nonsense")},{id:"Other",text:osu.trans("users.report.options.other")}],this.textarea=Object(s.createRef)(),this.state={selectedReason:this.options[0]}}return function(t,e){for(var n in e)y.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.defaultProps={allowOptions:!0},e.prototype.onItemSelected=function(t){return this.setState({selectedReason:t})},e.prototype.render=function(){return this.props.visible?this.renderForm():null},e.prototype.renderForm=function(){var t;return t=this.props.completed?osu.trans("users.report.thanks"):this.props.title,Object(s.createElement)(p,{onClose:this.props.onClose,visible:this.props.visible},Object(o.div)({className:i},Object(o.div)({className:i+"__header"},Object(o.div)({className:i+"__row "+i+"__row--exclamation"},Object(o.i)({className:"fas fa-exclamation-triangle"})),Object(o.div)({className:i+"__row",dangerouslySetInnerHTML:{__html:"<span>"+t+"</span>"}})),this.props.completed?void 0:this.renderFormContent()))},e.prototype.renderFormContent=function(){return Object(o.div)(null,this.props.allowOptions?[Object(o.div)({key:"label",className:i+"__row"},osu.trans("users.report.reason")),Object(o.div)({key:"options",className:i+"__row"},Object(s.createElement)(g,{blackout:!1,bn:i+"-select-options",onItemSelected:this.onItemSelected,options:this.options,selected:this.state.selectedReason}))]:void 0,Object(o.div)({className:i+"__row"},osu.trans("users.report.comments")),Object(o.div)({className:i+"__row"},Object(o.textarea)({className:i+"__textarea",placeholder:osu.trans("users.report.placeholder"),ref:this.textarea})),Object(o.div)({className:i+"__row "+i+"__row--buttons"},[Object(o.button)({className:i+"__button "+i+"__button--report",disabled:this.props.disabled,key:"report",type:"button",onClick:this.sendReport},osu.trans("users.report.actions.send")),Object(o.button)({className:i+"__button",disabled:this.props.disabled,key:"cancel",type:"button",onClick:this.props.onClose},osu.trans("users.report.actions.cancel"))]))},e.prototype.sendReport=function(t){var e,n;return n={reason:this.state.selectedReason.id,comments:this.textarea.current.value},"function"==typeof(e=this.props).onSubmit?e.onSubmit(n):void 0},e}(),k=function(t,e){return function(){return t.apply(e,arguments)}},x={}.hasOwnProperty,S=function(t){function e(t){this.onSubmit=k(this.onSubmit,this),this.showForm=k(this.showForm,this),this.onFormClose=k(this.onFormClose,this),this.render=k(this.render,this),e.__super__.constructor.call(this,t),this.state={completed:!1,disabled:!1,showingForm:!1}}return function(t,e){for(var n in e)x.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.prototype.render=function(){return[Object(o.button)({className:"simple-menu__item",key:"button",onClick:this.showForm},osu.trans("report.scores.button")),Object(s.createElement)(w,{allowOptions:!1,completed:this.state.completed,disabled:this.state.disabled,key:"form",onClose:this.onFormClose,onSubmit:this.onSubmit,title:osu.trans("report.scores.title",{username:"<strong>"+this.props.score.user.username+"</strong>"}),visible:this.state.showingForm})]},e.prototype.onFormClose=function(){return this.setState({disabled:!1,showingForm:!1})},e.prototype.showForm=function(t){if(0===t.button)return t.preventDefault(),Timeout.clear(this.timeout),this.setState({completed:!1,showingForm:!0})},e.prototype.onSubmit=function(t){var e,n;return e=t.comments,this.setState({disabled:!0}),$.ajax({type:"POST",url:laroute.route("scores.report",{score:this.props.score.id,mode:this.props.score.beatmap.mode}),data:{comments:e},dataType:"json"}).done((n=this,function(){return n.timeout=Timeout.set(1e3,n.onFormClose),n.setState({completed:!0})})).fail(function(t){return function(e){return osu.ajaxError(e),t.setState({disabled:!1})}}(this))},e}(),C=function(t,e){return function(){return t.apply(e,arguments)}},j={}.hasOwnProperty,T=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1},E=function(t){function e(t){this.renderMenu=C(this.renderMenu,this),this.render=C(this.render,this),this.removePortal=C(this.removePortal,this),this.addPortal=C(this.addPortal,this),this.toggle=C(this.toggle,this),this.isMenuInPath=C(this.isMenuInPath,this),this.hide=C(this.hide,this),this.componentWillUnmount=C(this.componentWillUnmount,this),this.componentDidUpdate=C(this.componentDidUpdate,this),this.resize=C(this.resize,this),this.componentDidMount=C(this.componentDidMount,this),e.__super__.constructor.call(this,t),this.uuid=osu.uuid(),this.menu=Object(s.createRef)(),this.state={active:!1}}return function(t,e){for(var n in e)j.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.prototype.componentDidMount=function(){return $(window).on("throttled-resize.#{@uuid}",this.resize),$(document).on("turbolinks:before-cache."+this.uuid,(t=this,function(){return t.removePortal()}));var t},e.prototype.resize=function(){var t,e,n,i;if(this.state.active){if(null!=this.menu.current.offsetParent)return i=(n=(t=$(this.menu.current)).offset()).top,e=n.left,this.portal.style.display="block",this.portal.style.position="absolute",this.portal.style.top=Math.floor(i+t.height()/2)+"px",this.portal.style.left=Math.floor(e+t.width())+"px";this.portal.style.display="none"}},e.prototype.componentDidUpdate=function(t,e){var n,i;if(e.active!==this.state.active)return this.state.active?(this.resize(),this.addPortal(),$(document).on("click."+this.uuid+" keydown."+this.uuid,this.hide),"function"==typeof(n=this.props).onShow?n.onShow():void 0):(this.removePortal(),$(document).off("click."+this.uuid+" keydown."+this.uuid,this.hide),"function"==typeof(i=this.props).onHide?i.onHide():void 0)},e.prototype.componentWillUnmount=function(){return $(document).off("."+this.uuid)},e.prototype.hide=function(t){var e;if(this.state.active&&!p.isOpen()&&null!=(e=t.originalEvent))return 27===e.keyCode||0===e.button&&!this.isMenuInPath(e.composedPath())?this.setState({active:!1}):void 0},e.prototype.isMenuInPath=function(t){var e,n;return e=this.menu.current,T.call(t,e)>=0||(n=this.portal,T.call(t,n)>=0)},e.prototype.toggle=function(){return this.setState({active:!this.state.active})},e.prototype.addPortal=function(){if(null==this.portal.parentElement)return document.body.appendChild(this.portal)},e.prototype.removePortal=function(){if(null!=this.portal.parentElement)return document.body.removeChild(this.portal)},e.prototype.render=function(){return null==this.portal&&(this.portal=document.createElement("div")),Object(o.div)({className:"play-detail-menu",ref:this.menu},Object(o.button)({className:"play-detail-menu__button",type:"button",onClick:this.toggle},Object(o.i)({className:"fas fa-ellipsis-v"})),Object(l.createPortal)(this.renderMenu(),this.portal))},e.prototype.renderMenu=function(){var t;return this.state.active?Object(o.div)({className:"play-detail-menu__menu"},Object(o.div)({className:"simple-menu simple-menu--play-detail-menu"},this.props.score.replay?Object(o.a)({className:"simple-menu__item js-login-required--click",href:laroute.route("scores.download",{mode:this.props.score.mode,score:this.props.score.id}),"data-turbolinks":!1,onClick:this.toggle},osu.trans("users.show.extra.top_ranks.download_replay")):void 0,null!=currentUser.id&&this.props.score.user_id!==currentUser.id?Object(s.createElement)(S,((t=this.props).score,t)):void 0)):null},e}(),M=function(){function t(){}return t.hasMenu=function(t){return t.replay||null!=currentUser.id&&t.user_id!==currentUser.id},t}(),N=function(t,e){return function(){return t.apply(e,arguments)}},O={}.hasOwnProperty;b=window.osu;var P,D=function(t){function e(t){this.toggleCompact=N(this.toggleCompact,this),this.show=N(this.show,this),this.hide=N(this.hide,this),this.render=N(this.render,this),e.__super__.constructor.call(this,t),this.state={compact:!0}}return function(t,e){for(var n in e)O.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.prototype.render=function(){var t,e,n,i,r,a;return e=null!=(n=null!=(i=(a=this.props.score).best)?i.pp:void 0)?n:a.pp,t="play-detail",this.props.activated?t+=" play-detail--active":t+=" play-detail--highlightable",this.state.compact&&(t+=" play-detail--compact"),Object(o.div)({className:t},Object(o.div)({className:"play-detail__group play-detail__group--top"},Object(o.div)({className:"play-detail__icon play-detail__icon--main"},Object(o.div)({className:"score-rank-v2 score-rank-v2--full score-rank-v2--"+a.rank})),Object(o.div)({className:"play-detail__detail"},Object(o.a)({href:a.beatmap.url,className:"play-detail__title u-ellipsis-overflow"},a.beatmapset.title," ",Object(o.small)({className:"play-detail__artist"},b.trans("users.show.extra.beatmaps.by_artist",{artist:a.beatmapset.artist}))),Object(o.div)({className:"play-detail__beatmap-and-time"},Object(o.span)({className:"play-detail__beatmap"},a.beatmap.version),Object(o.span)({className:"play-detail__time",dangerouslySetInnerHTML:{__html:b.timeago(a.created_at)}}))),Object(o.button)({className:"play-detail__compact-toggle",onClick:this.toggleCompact},Object(o.span)({className:"fas "+(this.state.compact?"fa-chevron-down":"fa-chevron-up")}))),Object(o.div)({className:"play-detail__group play-detail__group--bottom"},Object(o.div)({className:"play-detail__score-detail play-detail__score-detail--score"},Object(o.div)({className:"play-detail__icon play-detail__icon--extra"},Object(o.div)({className:"score-rank-v2 score-rank-v2--full score-rank-v2--"+a.rank})),Object(o.div)({className:"play-detail__score-detail-top-right"},Object(o.div)({className:"play-detail__accuracy-and-weighted-pp"},Object(o.span)({className:"play-detail__accuracy"},b.formatNumber(100*a.accuracy,2)+"%"),null!=a.weight?Object(o.span)({className:"play-detail__weighted-pp"},b.formatNumber(Math.round(a.weight.pp)),"pp"):void 0),null!=a.weight?Object(o.div)({className:"play-detail__pp-weight"},b.trans("users.show.extra.top_ranks.pp_weight",{percentage:b.formatNumber(Math.round(a.weight.percentage))+"%"})):void 0)),Object(o.div)({className:"play-detail__score-detail play-detail__score-detail--mods"},Object(s.createElement)(Mods,{mods:a.mods,modifiers:["profile-page"]})),Object(o.div)({className:"play-detail__pp"},e>0?Object(o.span)(null,b.formatNumber(Math.round(e)),Object(o.span)({className:"play-detail__pp-unit"},"pp")):Object(o.span)({title:"ranked"!==(r=a.beatmapset.status)&&"approved"!==r?b.trans("users.show.extra.top_ranks.not_ranked"):void 0},"-")),Object(o.div)({className:"play-detail__more"},M.hasMenu(a)?Object(s.createElement)(E,{onHide:this.hide,onShow:this.show,score:a}):void 0)))},e.prototype.hide=function(){var t;return"function"==typeof(t=this.props).onMenuActive?t.onMenuActive({active:!1,index:this.props.index}):void 0},e.prototype.show=function(){var t;return"function"==typeof(t=this.props).onMenuActive?t.onMenuActive({active:!0,index:this.props.index}):void 0},e.prototype.toggleCompact=function(){return this.setState({compact:!this.state.compact})},e}(),I=function(t,e){return function(){return t.apply(e,arguments)}},B={}.hasOwnProperty;P=window.osu;var R=function(t){function e(t){this.render=I(this.render,this),this.onMenuActive=I(this.onMenuActive,this),e.__super__.constructor.call(this,t),this.state={}}return function(t,e){for(var n in e)B.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.prototype.onMenuActive=function(t){var e,n;return n=t.index,t.active&&(e=n),this.setState({activeMenu:e})},e.prototype.render=function(){var t,e;return null!=this.state.activeMenu&&(t=["menu-active"]),Object(o.div)({className:P.classWithModifiers("play-detail-list",t)},this.props.scores.map((e=this,function(t,n){return Object(s.createElement)(D,{activated:e.state.activeMenu===n,index:n,key:n,onMenuActive:e.onMenuActive,score:t})})))},e}(),L=function(t,e){var n={};for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.indexOf(i)<0&&(n[i]=t[i]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(i=Object.getOwnPropertySymbols(t);s<i.length;s++)e.indexOf(i[s])<0&&(n[i[s]]=t[i[s]])}return n};var F=function(t,e){return function(){return t.apply(e,arguments)}},A={}.hasOwnProperty;var z=function(t){function e(t){this.onSubmit=F(this.onSubmit,this),this.showForm=F(this.showForm,this),this.onFormClose=F(this.onFormClose,this),this.render=F(this.render,this),e.__super__.constructor.call(this,t),this.state={completed:!1,disabled:!1,showingForm:!1}}return function(t,e){for(var n in e)A.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.prototype.render=function(){var t,e,n,i;return null==currentUser.id||(null!=(n=this.props.user)?n.id:void 0)===currentUser.id?null:(t=osu.classWithModifiers("textual-button",this.props.modifiers),null!=this.props.wrapperClass?(i=this.props.wrapperClass,e=t):(i=t,e=null),[Object(o.button)({className:i,key:"button",onClick:this.showForm,type:"button"},Object(o.span)({className:e},Object(o.i)({className:"textual-button__icon fas fa-exclamation-triangle"})," ",osu.trans("users.report.button_text"))),Object(s.createElement)(w,{completed:this.state.completed,disabled:this.state.disabled,key:"form",onClose:this.onFormClose,onSubmit:this.onSubmit,title:osu.trans("users.report.title",{username:"<strong>"+this.props.user.username+"</strong>"}),visible:this.state.showingForm})])},e.prototype.onFormClose=function(){return this.setState({disabled:!1,showingForm:!1})},e.prototype.showForm=function(t){if(0===t.button)return t.preventDefault(),Timeout.clear(this.timeout),this.setState({completed:!1,showingForm:!0})},e.prototype.onSubmit=function(t){return this.setState({disabled:!0}),$.ajax({type:"POST",url:laroute.route("users.report",{user:this.props.user.id}),data:t,dataType:"json"}).done((e=this,function(){return e.timeout=Timeout.set(1e3,e.onFormClose),e.setState({completed:!0})})).fail(function(t){return function(e){return osu.ajaxError(e),t.setState({disabled:!1})}}(this));var e},e}(),U=function(t,e){return function(){return t.apply(e,arguments)}},W={}.hasOwnProperty,H=function(t){function e(){return this.onItemSelected=U(this.onItemSelected,this),this.renderItem=U(this.renderItem,this),this.render=U(this.render,this),e.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)W.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(e,s["PureComponent"]),e.prototype.render=function(){return Object(s.createElement)(g,{bn:"spotlight-select-options",renderItem:this.renderItem,onItemSelected:this.onItemSelected,options:this.props.options,selected:this.props.selected})},e.prototype.renderItem=function(t){var e,n,i,s;return n=t.cssClasses,e=t.children,i=t.item,s=t.onClick,Object(o.a)({children:e,className:n,href:this.href(null!=i?i.id:void 0),key:null!=i?i.id:void 0,onClick:s})},e.prototype.href=function(t){return window.osu.updateQueryString(null,{spotlight:t})},e.prototype.onItemSelected=function(t){return Turbolinks.visit(this.href(t.id))},e}(),V=function(){function t(){}return t.fetchApprovalLink=function(t){return new Promise(function(e,n){return $.post(laroute.route("payments.paypal.create"),{order_id:t}).done(e).fail(function(t){return n({xhr:t})})})},t}(),q=function(){function t(){}return t.promiseInit=function(e){return Promise.all([t.fetchToken(e),t.fetchScript()]).then(function(n){var i,s;return s=n[0],i=t.optionsWithToken(s),t.onXsollaReady(e),XPayStationWidget.init(i)})},t.fetchScript=function(){return new Promise(function(t,e){if(!window.turbolinksReload.load("https://static.xsolla.com/embed/paystation/1.0.7/widget.min.js",t))return t()})},t.fetchToken=function(t){return new Promise(function(e,n){return $.post(laroute.route("payments.xsolla.token"),{orderNumber:t}).done(function(t){return 32!==t.length?n({message:"wrong token length"}):e(t)}).fail(function(t){return n({xhr:t})})})},t.optionsWithToken=function(t){return{access_token:t,sandbox:Object({NODE_ENV:"production"}).PAYMENT_SANDBOX}},t.onXsollaReady=function(t){var e;return e=!1,XPayStationWidget.on(XPayStationWidget.eventTypes.STATUS_DONE,function(){return e=!0}),XPayStationWidget.on(XPayStationWidget.eventTypes.CLOSE,function(){if(e)return LoadingOverlay.show(),LoadingOverlay.show.flush(),window.location=laroute.route("payments.xsolla.completed",{foreignInvoice:t})})},t}(),X=function(){function t(){}return t.CHECKOUT_SELECTOR=".js-store-checkout-button",t.initialize=function(){var e,n,i,s,o,r,a;for(i={},n=0,s=(a=document.querySelectorAll(t.CHECKOUT_SELECTOR)).length;n<s;n++)switch(e=a[n],r=e.dataset.provider,o=e.dataset.orderNumber,r){case"centili":i.centili=Promise.resolve();break;case"free":i.free=Promise.resolve();break;case"paypal":i.paypal=Promise.resolve();break;case"xsolla":i.xsolla=q.promiseInit(o)}return $(t.CHECKOUT_SELECTOR).on("click.checkout",function(e){var n,s;if(r=e.target.dataset.provider,n=e.target.dataset.orderId,null!=r)return LoadingOverlay.show(),LoadingOverlay.show.flush(),null!=(s=i[r])?s.then(function(){return window.osu.promisify($.post(laroute.route("store.checkout.store"),{provider:r,orderId:n}))}).then(function(){return t.startPayment(e.target.dataset)}).catch(t.handleError):void 0})},t.startPayment=function(t){switch(t.provider){case"centili":return new Promise(function(e){return window.location=t.url});case"free":return window.osu.promisify($.post(laroute.route("store.checkout.store",{orderId:t.orderId,completed:"1"})));case"paypal":return V.fetchApprovalLink(t.orderId).then(function(t){return window.location=t});case"xsolla":return new Promise(function(t){return XPayStationWidget.open(),LoadingOverlay.hide(),t()})}},t.handleError=function(t){var e;if(LoadingOverlay.hide(),!t.getResponseHeader||(e=t.getResponseHeader("Content-Type"),!_.startsWith(e,"application/javascript")))return osu.ajaxError(null!=t?t.xhr:void 0)},t}(),G=n("Sc3f"),Y=n("f9wg"),K=n.n(Y),J=n("GJGg"),Z=n.n(J);class Q extends s.PureComponent{constructor(t){super(t),this.eventId=`gallery-contest-${osu.uuid()}`,this.mainRef=s.createRef(),this.buttonState=(()=>{const t=this.button();return null!=t&&null!=t.dataset.contestVoteMeta?JSON.parse(t.dataset.contestVoteMeta):{}}),this.buttonTitle=(()=>{if(!this.state.isLoading&&!this.state.button.votingOver)return this.state.button.isSelected?osu.trans("contest.voting.button.remove"):this.state.button.hasVote?osu.trans("contest.voting.button.add"):osu.trans("contest.voting.button.used_up")}),this.isDisabled=(()=>this.state.isLoading||this.state.button.votingOver||!this.state.button.isSelected&&!this.state.button.hasVote),this.loadingEnd=(()=>{this.setState({isLoading:!1}),this.syncState()}),this.loadingStart=(()=>{this.setState({isLoading:!0})}),this.mainClass=(()=>{let t="pswp__button pswp__button--contest-vote js-gallery-extra";return this.state.button.isSelected&&(t+=" pswp__button--contest-vote-active"),this.isDisabled()&&(t+=" pswp__button--disabled"),t}),this.resetTooltip=(()=>{const t=this.mainRef.current;null!=t&&tooltipDefault.remove(t)}),this.syncState=(()=>{this.setState({button:this.buttonState()})}),this.vote=(()=>{if(this.isDisabled())return;const t=this.button();null!=t&&t.click()}),this.state={button:this.buttonState(),isLoading:!1}}componentDidMount(){$.subscribe(`contest:vote:click.${this.eventId}`,this.loadingStart),$.subscribe(`contest:vote:end.${this.eventId}`,this.loadingEnd),this.props.pswp.listen("afterChange",this.syncState)}componentDidUpdate(){this.resetTooltip()}componentWillUnmount(){$.unsubscribe(`.${this.eventId}`)}render(){return s.createElement("button",{ref:this.mainRef,className:this.mainClass(),onClick:this.vote,title:this.buttonTitle()},s.createElement("span",{className:this.iconClass()}))}button(){if(null==this.props.pswp.currItem)return;const t=this.props.pswp.currItem.element.dataset.buttonId;return document.querySelector(`.js-contest-vote-button[data-button-id='${t}']`)}iconClass(){return this.state.isLoading?"fas fa-sync fa-spin":"fas fa-star"}}class tt{constructor(t){this.window=t,$(this.window).on("throttled-resize.windowVHPatch",this.handleResize),this.handleResize()}static init(t){return null!=this.instance?this.instance:(this.instance=new tt(t),this.instance)}handleResize(){const t=.01*this.window.innerHeight;null!==this.window.document.documentElement&&this.window.document.documentElement.style.setProperty("--vh",`${t}px`)}}null==window.Promise&&(window.Promise=G.a),window._exported={BackToTop:u,PlayDetailList:R,PlayDetailMenu:E,ReportComment:class extends s.PureComponent{constructor(t){super(t),this.onFormClose=(()=>{this.setState({disabled:!1,showingForm:!1})}),this.onSubmit=(({comments:t})=>{this.setState({disabled:!0});const e={data:{comments:t},dataType:"json",type:"POST",url:laroute.route("comments.report",{comment:this.props.comment.id})};$.ajax(e).done(()=>{this.timeout=Timeout.set(1e3,this.onFormClose),this.setState({completed:!0})}).fail(t=>{osu.ajaxError(t),this.setState({disabled:!1})})}),this.showForm=(t=>{0===t.button&&(t.preventDefault(),Timeout.clear(this.timeout),this.setState({disabled:!1,showingForm:!0}))}),this.state={completed:!1,disabled:!1,showingForm:!1}}render(){const t=this.props,{user:e,comment:n}=t,i=L(t,["user","comment"]);return s.createElement(s.Fragment,null,s.createElement("button",Object.assign({key:"button",onClick:this.showForm},i),osu.trans("report.comment.button")),s.createElement(w,{allowOptions:!1,completed:this.state.completed,disabled:this.state.disabled,key:"form",onClose:this.onFormClose,onSubmit:this.onSubmit,title:osu.trans("report.comment.title",{username:`<strong>${e.username}</strong>`}),visible:this.state.showingForm}))}},ReportUser:z,ScoreHelper:M,SelectOptions:g,SpotlightSelectOptions:H,GalleryContest:class{constructor(t,e){this.destroy=(()=>{Object(l.unmountComponentAtNode)(this.root),$(document).off(`.${this.eventId}`)}),this.root=t.querySelector(".js-pswp-buttons"),Object(l.render)(Object(s.createElement)(Q,{pswp:e}),this.root),this.eventId=`gallery-contest-${osu.uuid()}`,$(document).on(`turbolinks:before-cache.${this.eventId}`,this.destroy),e.listen("destroy",this.destroy)}},WindowVHPatcher:tt},window._styles={header:{height:90,heightSticky:50,heightMobile:60}},window.StoreCheckout=X,window.TextareaAutosize=K.a,window.VirtualList=Z.a;n("hTA1")},icRW:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Menu=function(){function e(){this.refresh=t(this.refresh,this),this.hideMenu=t(this.hideMenu,this),this.onMouseLeave=t(this.onMouseLeave,this),this.onMouseEnter=t(this.onMouseEnter,this),this.onTouchStart=t(this.onTouchStart,this),this.onGlobalTouchstart=t(this.onGlobalTouchstart,this),this.currentTree=t(this.currentTree,this),this.defaultMenu=t(this.defaultMenu,this),this.menuTimeout=150,$(document).on("touchstart",".js-menu",this.onTouchStart),$(document).on("mouseenter",".js-menu",this.onMouseEnter),$(document).on("mouseleave",".js-menu",this.onMouseLeave),$(document).on("touchstart",this.onGlobalTouchstart),$(document).on("turbolinks:load",this.refresh)}return e.prototype.$menuLink=function(t){return $(".js-menu[data-menu-target"+(t?"='"+t+"'":"")+"]")},e.prototype.closestMenuId=function(t){return t.closest("[data-menu-id]").attr("data-menu-id")},e.prototype.defaultMenu=function(){var t,e;return null!=(t=document.querySelector('.js-menu[data-menu-default="1"]'))&&null!=(e=t.dataset)?e.menuTarget:void 0},e.prototype.parentsMenuId=function(t){return t.parents("[data-menu-id]").attr("data-menu-id")},e.prototype.currentTree=function(){var t,e;if(!this.currentMenu)return[];for(t=[e=this.currentMenu];e=this.closestMenuId(this.$menuLink(e));)t.push(e);return t},e.prototype.onGlobalTouchstart=function(t){var e;if(this.currentMenu){for(e=t.target;e;){if(e.classList.contains("js-menu"))return;e=e.parentElement}return this.hideMenu()}},e.prototype.onTouchStart=function(t){var e,n,i,s,o,r;if(n=t.currentTarget,null!=(s=n.dataset.menuTarget))return e=$(s),t.preventDefault(),o=parseInt(null!=(i=n.dataset.menuShowDelay)?i:this.menuTimeout,10),Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(o,(r=this,function(){return r.currentMenu=r.currentMenu===s?r.closestMenuId(e):s,r.refresh()}))},e.prototype.onMouseEnter=function(t){var e,n,i,s;return e=t.currentTarget,i=parseInt(null!=(n=e.dataset.menuShowDelay)?n:this.menuTimeout,10),Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(i,(s=this,function(){return s.currentMenu=e.dataset.menuTarget,null==s.currentMenu&&(s.currentMenu=s.closestMenuId($(e))),s.refresh()}))},e.prototype.onMouseLeave=function(t){var e,n;return e=$(t.currentTarget),Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(this.menuTimeout,(n=this,function(){return n.currentMenu=n.parentsMenuId(e),n.refresh()}))},e.prototype.hideMenu=function(){return Timeout.clear(this.refreshTimeout),this.refreshTimeout=Timeout.set(this.menuTimeout,(t=this,function(){return t.currentMenu=null,t.refresh()}));var t},e.prototype.refresh=function(){var t,e,n,i,s,o,r;for(null==this.currentMenu&&(this.currentMenu=this.defaultMenu()),o=document.querySelectorAll(".js-menu[data-menu-id]"),t=this.currentTree(),$.publish("menu:current",this.currentMenu),r=[],e=0,n=o.length;e<n;e++)s=(i=o[e]).getAttribute("data-menu-id"),-1===t.indexOf(s)?(Fade.out(i),r.push(this.$menuLink(s).removeClass("js-menu--active"))):(Fade.in(i),this.$menuLink(s).addClass("js-menu--active"),r.push($(i).trigger("menu:showing")));return r},e}()}).call(window)},j236:function(t,e){(function(){var t,e;t=ReactDOMFactories.div,e=ReactDOMFactories.i,React.createElement,this.BeatmapIcon=function(n){var i,s,o,r,a,u,l;return i=n.beatmap,o=null!=(a=n.overrideVersion)?a:BeatmapHelper.getDiffRating(i.difficulty_rating),l=(null==(u=n.showTitle)||u)&&null==n.overrideVersion,r=i.convert?"osu":i.mode,s="beatmap-icon beatmap-icon--"+o+" beatmap-icon--"+n.modifier,l&&(s+=" beatmap-icon--with-hover js-beatmap-tooltip"),t({className:s,"data-beatmap-title":l?i.version:void 0,"data-stars":_.round(i.difficulty_rating,2),"data-difficulty":o},t({className:"beatmap-icon__shadow"}),e({className:"fal fa-extra-mode-"+r}))}}).call(window)},jbZF:function(t,e){(function(){var t,e,n,i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;n=React.createElement,e=ReactDOMFactories.button,ReactDOMFactories.div,i=ReactDOMFactories.i,s=ReactDOMFactories.span,t="textual-button",this.BlockButton=function(a){function u(t){this.isVisible=o(this.isVisible,this),this.render=o(this.render,this),this.componentWillUnmount=o(this.componentWillUnmount,this),this.componentDidMount=o(this.componentDidMount,this),this.clicked=o(this.clicked,this),this.refresh=o(this.refresh,this),this.updateBlocks=o(this.updateBlocks,this),u.__super__.constructor.call(this,t),this.button=React.createRef(),this.eventId="blockButton-"+this.props.userId+"-"+osu.uuid(),this.state={block:_.find(currentUser.blocks,{target_id:t.userId})}}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,React.PureComponent),u.prototype.updateBlocks=function(t){return this.setState({block:_.find(t,{target_id:this.props.userId})},function(){return currentUser.blocks=_.filter(t,{relation_type:"block"}),currentUser.friends=_.filter(t,{relation_type:"friend"}),$.publish("user:update",currentUser),$.publish("blockButton:refresh"),$.publish("friendButton:refresh")})},u.prototype.refresh=function(t){return this.setState({block:_.find(currentUser.blocks,{target_id:this.props.userId})})},u.prototype.clicked=function(t){var e;if(confirm(osu.trans("common.confirmation")))return this.setState({loading:!0},(e=this,function(){return e.state.block?e.xhr=$.ajax({type:"DELETE",url:laroute.route("blocks.destroy",{block:e.props.userId})}):e.xhr=$.ajax({type:"POST",url:laroute.route("blocks.store",{target:e.props.userId})}),e.xhr.always(function(){return e.setState({loading:!1})}).fail(osu.emitAjaxError(e.button.current)).done(e.updateBlocks)}))},u.prototype.componentDidMount=function(){return $.subscribe("blockButton:refresh."+this.eventId,this.refresh)},u.prototype.componentWillUnmount=function(){var t;return $.unsubscribe("."+this.eventId),null!=(t=this.xhr)?t.abort():void 0},u.prototype.render=function(){var o,r,a;return this.isVisible()?(o=osu.classWithModifiers(t,["block"].concat(this.props.modifiers)),null!=this.props.wrapperClass?(a=this.props.wrapperClass,r=o):(a=o,r=null),e({type:"button",className:a,onClick:this.clicked,ref:this.button,disabled:this.state.loading},s({className:r},this.state.loading?s({className:t+"__icon fa-fw"},n(Spinner)):i({className:t+"__icon fas fa-ban fa-fw"})," ",this.state.block?osu.trans("users.blocks.button.unblock"):osu.trans("users.blocks.button.block")))):null},u.prototype.isVisible=function(){return null!=currentUser.id&&_.isFinite(this.props.userId)&&this.props.userId!==currentUser.id},u}()}).call(window)},jepR:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumCover=function(){function e(){var e;this.refresh=t(this.refresh,this),this.remove=t(this.remove,this),this.updateOptions=t(this.updateOptions,this),this.update=t(this.update,this),this.setOverlay=t(this.setOverlay,this),this.openModal=t(this.openModal,this),this.toggleModal=t(this.toggleModal,this),this.initFileupload=t(this.initFileupload,this),this.isModalOpen=t(this.isModalOpen,this),this.hasCoverEditor=t(this.hasCoverEditor,this),this.hasCover=t(this.hasCover,this),this.closeModal=t(this.closeModal,this),this.$uploadButton=t(this.$uploadButton,this),this.header=document.getElementsByClassName("js-forum-cover--header"),this.uploadButton=document.getElementsByClassName("js-forum-cover--upload-button"),this.overlay=document.getElementsByClassName("js-forum-cover--overlay"),this.loading=document.getElementsByClassName("js-forum-cover--loading"),$(document).on("click",".js-forum-cover--open-modal",this.toggleModal),$(document).on("click",".js-forum-cover--remove",this.remove),$(document).on("click",this.closeModal),$.subscribe("dragenterGlobal",(e=this,function(){return e.setOverlay("active")})),$.subscribe("dragendGlobal",function(t){return function(){return t.setOverlay("hidden")}}(this)),$(document).on("dragenter",".js-forum-cover--overlay",function(t){return function(){return t.setOverlay("hover")}}(this)),$(document).on("dragleave",".js-forum-cover--overlay",function(t){return function(){return t.setOverlay("active")}}(this)),$.subscribe("key:esc",this.closeModal),$(document).on("turbolinks:load",this.refresh)}return e.prototype.$uploadButton=function(){return $(this.uploadButton[0])},e.prototype.closeModal=function(t){if(this.hasCoverEditor()&&this.isModalOpen()){if(t){if($(t.target).closest(".js-forum-cover--open-modal").length)return;if($(t.target).closest(".js-forum-cover--modal").length)return}if(!$("#overlay").is(":visible"))return Blackout.hide(),this.header[0].classList.remove("js-forum-cover--is-open"),this.isModalOpen(!1)}},e.prototype.hasCover=function(){return"post"!==this.uploadButton[0].dataset.customMethod},e.prototype.hasCoverEditor=function(){return this.uploadButton.length>0},e.prototype.isModalOpen=function(t){return!!this.hasCoverEditor()&&(null!=t&&(this.header[0].dataset.isModalOpen=t?"1":""),"1"===this.header[0].dataset.isModalOpen)},e.prototype.initFileupload=function(){var t,e;if(this.isModalOpen()&&!this.uploadButton[0]._initialized)return this.uploadButton[0]._initialized=!0,t=$(".js-forum-cover--modal"),this.$uploadButton().fileupload({method:"POST",paramName:"cover_file",dataType:"json",dropZone:t,submit:(e=this,function(){return e.loading[0].dataset.state="enabled"}),done:function(t){return function(e,n){return t.update(n.result)}}(this),fail:osu.fileuploadFailCallback(this.$uploadButton),complete:function(t){return function(e,n){return t.loading[0].dataset.state=""}}(this)}),this.updateOptions()},e.prototype.toggleModal=function(t){return t.preventDefault(),this.isModalOpen()?this.closeModal():this.openModal()},e.prototype.openModal=function(){return Blackout.show(),this.isModalOpen(!0),this.header[0].classList.add("js-forum-cover--is-open"),this.initFileupload()},e.prototype.setOverlay=function(t){if(this.hasCoverEditor()&&t!==this.overlay[0].getAttribute("data-state"))return this.overlay[0].setAttribute("data-state",t)},e.prototype.update=function(t){return $(".js-forum-cover--input").val(t.id),this.uploadButton[0].dataset.url=t.url,this.uploadButton[0].dataset.customMethod=t.method,this.uploadButton[0].dataset.fileUrl=t.fileUrl||"",this.updateOptions(),this.refresh()},e.prototype.updateOptions=function(){if(this.uploadButton[0]._initialized)return this.$uploadButton().fileupload("option",{url:this.uploadButton[0].dataset.url,formData:{_method:this.uploadButton[0].dataset.customMethod}})},e.prototype.remove=function(t){var e;if((t.preventDefault(),this.hasCover())&&confirm(t.currentTarget.dataset.destroyConfirm))return this.loading[0].dataset.state="enabled",$.ajax({url:this.uploadButton[0].dataset.url,method:"delete"}).done((e=this,function(t){return e.update(t)})).always(function(t){return function(){return t.loading[0].dataset.state=""}}(this))},e.prototype.refresh=function(){var t;if(this.hasCoverEditor())return t=this.uploadButton[0].dataset.fileUrl||this.uploadButton[0].dataset.defaultFileUrl||null,this.header[0].style.backgroundImage=osu.urlPresence(t),$(".js-forum-cover--remove").toggleClass("js-disabled",!this.hasCover()),this.initFileupload()},e}()}).call(window)},kAex:function(t,e){(function(){var t;t=document.getElementsByClassName("js-navbar-mobile--top-icon"),$(document).on("show.bs.collapse",".js-navbar-mobile--menu",function(){return Fade.out(t[0])}),$(document).on("hide.bs.collapse",".js-navbar-mobile--menu",function(){return Fade.in(t[0])})}).call(window)},lPUA:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.StickyHeader=function(){function e(){var e;this.stickOrUnstick=t(this.stickOrUnstick,this),this.shouldStick=t(this.shouldStick,this),this.shouldPin=t(this.shouldPin,this),this.setVisible=t(this.setVisible,this),this.pin=t(this.pin,this),this.onScroll=t(this.onScroll,this),this.header=document.getElementsByClassName("js-pinned-header"),this.marker=document.getElementsByClassName("js-sticky-header"),this.pinnedSticky=document.getElementsByClassName("js-pinned-header-sticky"),this.stickyBreadcrumbs=document.getElementsByClassName("js-sticky-header-breadcrumbs"),this.stickyContent=document.getElementsByClassName("js-sticky-header-content"),$(window).on("throttled-scroll",this.onScroll),$(document).on("turbolinks:load osu:page:change",(e=this,function(){return Timeout.set(0,e.onScroll)})),$(window).on("throttled-resize",this.stickOrUnstick)}return e.prototype.breadcrumbsElement=function(){return this.stickyBreadcrumbs[0]},e.prototype.contentElement=function(){return this.stickyContent[0]},e.prototype.headerHeight=function(){var t;return t=window._styles.header,osu.isMobile()?t.heightMobile:t.heightSticky},e.prototype.onScroll=function(){return this.pin(),this.stickOrUnstick()},e.prototype.pin=function(){if(null!=this.header[0])return this.shouldPin()?document.body.classList.add("js-header-is-pinned"):document.body.classList.remove("js-header-is-pinned")},e.prototype.scrollOffset=function(t){var e;return e=null!=this.pinnedSticky[0]?this.pinnedSticky[0].getBoundingClientRect().height:0,Math.max(0,t-this.headerHeight()-e)},e.prototype.setVisible=function(t){return Fade.toggle(this.pinnedSticky[0],t),$(document).trigger("sticky-header:sticking",[t])},e.prototype.shouldPin=function(t){return null==t&&(t=window.pageYOffset),t>window._styles.header.height||this.shouldStick()},e.prototype.shouldStick=function(){if(this.marker.length>0&&null!=this.pinnedSticky[0])return this.marker[0].getBoundingClientRect().top<this.headerHeight()+this.pinnedSticky[0].getBoundingClientRect().height},e.prototype.stickOrUnstick=function(){var t;if(null!=(t=this.shouldStick()))return this.setVisible(t)},e}()}).call(window)},mQSo:function(t,e){(function(){var t,e,n,i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;n=ReactDOMFactories.div,i=ReactDOMFactories.span,t=ReactDOMFactories.a,s=ReactDOMFactories.time,React.createElement,e="beatmapset-mapping",this.BeatmapsetMapping=function(a){function u(){return this.renderDate=o(this.renderDate,this),this.render=o(this.render,this),u.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,React.PureComponent),u.prototype.render=function(){var s,o;return o=null!=(s=this.props.user)?s:this.props.beatmapset.user,n({className:e},null!=o.id?t({href:laroute.route("users.show",{user:o.id}),className:"avatar avatar--beatmapset",style:{backgroundImage:osu.urlPresence(o.avatar_url)}}):i({className:"avatar avatar--beatmapset avatar--guest"}),n({className:e+"__content"},n({className:e+"__mapper",dangerouslySetInnerHTML:{__html:osu.trans("beatmapsets.show.details.mapped_by",{mapper:this.userLink(o)})}}),this.renderDate("submitted","submitted_date"),this.props.beatmapset.ranked>0?this.renderDate(this.props.beatmapset.status,"ranked_date"):this.renderDate("updated","last_updated")))},u.prototype.renderDate=function(t,i){return n(null,osu.trans("beatmapsets.show.details."+t),s({className:e+"__date js-tooltip-time",dateTime:this.props.beatmapset[i],title:this.props.beatmapset[i]},moment(this.props.beatmapset[i]).format("LL")))},u.prototype.userLink=function(t){var n;return null!=t.id?laroute.link_to_route("users.show",t.username,{user:t.id},{class:e+"__user js-usercard","data-user-id":t.id}):"<span class='"+e+"__user'>"+_.escape(null!=(n=t.username)?n:osu.trans("users.deleted"))+"</span>"},u}()}).call(window)},o5lo:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicWatchAjax=function(){function e(){this.shouldContinue=t(this.shouldContinue,this),this.loading=t(this.loading,this),this.fail=t(this.fail,this),this.done=t(this.done,this),this.abortAll=t(this.abortAll,this),$(document).on("ajax:before",".js-forum-topic-watch-ajax",this.shouldContinue),$(document).on("ajax:send",".js-forum-topic-watch-ajax",this.loading),$(document).on("ajax:error",".js-forum-topic-watch-ajax",this.fail),$(document).on("ajax:success",".js-forum-topic-watch-ajax",this.done),this.xhr=[],this.unknownState=!1}return e.prototype.abortAll=function(){var t,e;for(t=[];null!=(e=this.xhr.pop());)t.push(e.abort());return t},e.prototype.done=function(){return this.unknownState=!1},e.prototype.fail=function(t,e,n){var i;i=t.currentTarget,"abort"===n&&(i.dataset.skipAjaxErrorPopup="1"),i.classList.remove("js-forum-topic-watch-ajax--loading"),i.disabled=!1},e.prototype.loading=function(t,e){var n;this.unknownState=!0,this.abortAll(),this.xhr.push(e),LoadingOverlay.hide(),(n=t.currentTarget).dataset.skipAjaxErrorPopup="0",n.classList.add("js-forum-topic-watch-ajax--loading"),n.disabled=!0},e.prototype.shouldContinue=function(t){return this.unknownState||"1"!==t.currentTarget.dataset.forumTopicWatchAjaxIsActive},e}()}).call(window)},oWhP:function(t,e){(function(){this.Blackout=function(){function t(){}return t.el=document.getElementsByClassName("js-blackout"),t.hide=function(){return t.toggle(!1)},t.show=function(){return t.toggle(!0)},t.toggle=function(e,n){var i;if(null!=(i=t.el[0]))return e&&null!=n||(n=null),i.style.opacity=n,Fade.toggle(i,e)},t}()}).call(window)},pAZq:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FancyGraph=function(){function e(){this.resize=t(this.resize,this),this.initialize=t(this.initialize,this),$(window).on("throttled-resize",this.resize),$(document).on("turbolinks:load",this.initialize)}return e.prototype.container=document.getElementsByClassName("js-fancy-graph"),e.prototype.initialize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0])._chart?t._chart:t._chart=new FancyChart(this.container[0])},e.prototype.resize=function(){var t;if(null!=this.container[0])return null!=(t=this.container[0]._chart)?t.resize():void 0},e}()}).call(window)},pVrk:function(t,e){(function(){this.FormPlaceholderHide=function(){function t(){$(document).on("focus",".js-form-placeholder-hide",this.onFocus),$(document).on("blur",".js-form-placeholder-hide",this.onBlur)}return t.prototype.onBlur=function(t){if(t.target._origPlaceholder)return t.target.setAttribute("placeholder",t.target._origPlaceholder),t.target._origPlaceholder=null},t.prototype.onFocus=function(t){return t.target._origPlaceholder=t.target.getAttribute("placeholder"),t.target.setAttribute("placeholder","")},t}()}).call(window)},"pt+B":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.ForumTopicTitle=function(){function e(){this.syncPadding=t(this.syncPadding,this),this.save=t(this.save,this),this.onKeyup=t(this.onKeyup,this),this.onInput=t(this.onInput,this),this.editHide=t(this.editHide,this),this.editShow=t(this.editShow,this),this.current=t(this.current,this),this.cancel=t(this.cancel,this),this.abort=t(this.abort,this),this.buttons=document.getElementsByClassName("js-forum-topic-title--buttons"),this.editor=document.getElementsByClassName("js-forum-topic-title--editor"),this.input=document.getElementsByClassName("js-forum-topic-title--input"),this.main=document.getElementsByClassName("js-forum-topic-title--main"),this.padding=document.getElementsByClassName("js-forum-topic-title--padding"),this.saveButton=document.getElementsByClassName("js-forum-topic-title--save"),this.title=document.getElementsByClassName("js-forum-topic-title--title"),addEventListener("turbolinks:before-cache",this.abort),$(document).on("click",".js-forum-topic-title--edit-start",this.editShow),$(document).on("click",".js-forum-topic-title--save",this.save),$(document).on("keyup",".js-forum-topic-title--input",this.onKeyup),$(document).on("click",".js-forum-topic-title--cancel",this.cancel),$(document).on("input",".js-forum-topic-title--input",this.onInput)}return e.prototype.abort=function(){var t;return null!=(t=this.xhr)?t.abort():void 0},e.prototype.cancel=function(){return this.abort(),this.editHide(),this.input[0].value=this.current()},e.prototype.current=function(){return this.title[0].textContent.trim()},e.prototype.editShow=function(){return this.editor[0].classList.remove("hidden"),this.main[0].classList.add("hidden"),this.input[0].style.paddingRight=this.buttons[0].getBoundingClientRect().width+"px",this.input[0].value=this.current(),this.syncPadding(),this.input[0].selectionStart=this.input[0].value.length,this.input[0].focus()},e.prototype.editHide=function(){return this.editor[0].classList.add("hidden"),this.main[0].classList.remove("hidden")},e.prototype.onInput=function(){return this.saveButton[0].disabled=null==osu.presence(this.input[0].value),this.syncPadding()},e.prototype.onKeyup=function(t){switch(t.keyCode){case 13:return this.save();case 27:return this.cancel()}},e.prototype.save=function(){var t,e,n,i;if(e=(t=this.input[0]).value,null!=osu.presence(e))return e===this.current()?this.cancel():(t.disabled=!0,this.saveButton[0].disabled=!0,this.abort(),this.xhr=$.ajax(t.dataset.url,{method:"PUT",data:(n={},n[""+t.name]=e,n)}).done(function(){return osu.reloadPage()}).fail((i=this,function(e){return t.disabled=!1,i.saveButton[0].disabled=!1,osu.emitAjaxError()(e)})))},e.prototype.syncPadding=function(){return this.padding[0].textContent=this.input[0].value},e}()}).call(window)},"q3z+":function(t,e){(function(){var t,e,n,i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;e=ReactDOMFactories.div,t=ReactDOMFactories.a,i=ReactDOMFactories.i,s=ReactDOMFactories.span,n=React.createElement,this.BeatmapsetPanel=function(a){function u(t){this.previewStop=o(this.previewStop,this),this.previewStart=o(this.previewStart,this),this.previewInitializing=o(this.previewInitializing,this),this.render=o(this.render,this),this.componentWillUnmount=o(this.componentWillUnmount,this),this.componentDidMount=o(this.componentDidMount,this),u.__super__.constructor.call(this,t),this.eventId="beatmapsetPanel-"+t.beatmap.beatmapset_id+"-"+osu.uuid(),this.state={preview:"ended",previewDuration:0}}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,React.PureComponent),u.prototype.componentDidMount=function(){return $.subscribe("osuAudio:initializing."+this.eventId,this.previewInitializing),$.subscribe("osuAudio:playing."+this.eventId,this.previewStart),$.subscribe("osuAudio:ended."+this.eventId,this.previewStop),$(document).on("turbolinks:before-cache."+this.eventId,this.componentWillUnmount)},u.prototype.componentWillUnmount=function(){return this.previewStop(),$.unsubscribe("."+this.eventId),$(document).off("."+this.eventId)},u.prototype.hideImage=function(t){return t.currentTarget.style.display="none"},u.prototype.render=function(){var o,r,a,u,l,c,h,p,d,m,f,g,v,y,b;return a=this.props.beatmap,(b=_.includes(["wip","pending","graveyard"],a.status))&&(l=osu.formatNumber(a.hype.current),v=osu.formatNumber(a.hype.required),c=osu.formatNumber(a.nominations.current),y=osu.formatNumber(a.nominations.required)),f=osu.formatNumber(a.play_count),p=osu.formatNumber(a.favourite_count),10,u=a.beatmaps.length>10,d=BeatmapHelper.group(a.beatmaps),h=function(){var t,i,a,l;for(l=[],t=0,i=(a=BeatmapHelper.modes).length;t<i;t++)m=a[t],null!=(r=d[m])&&(u?l.push([n(BeatmapIcon,{key:m+"-icon",beatmap:_.last(r),showTitle:!1}),s({className:"beatmapset-panel__difficulty-count",key:m+"-count"},r.length)]):l.push(function(){var t,i,s;for(s=[],t=0,i=r.length;t<i;t++)o=r[t],s.push(e({className:"beatmapset-panel__difficulty-icon",key:o.id},n(BeatmapIcon,{beatmap:o})));return s}()));return l}(),e({className:"beatmapset-panel"+("ended"!==this.state.preview?" beatmapset-panel--previewing":"")},e({className:"beatmapset-panel__panel"},t({href:laroute.route("beatmapsets.show",{beatmapset:a.id}),className:"beatmapset-panel__header"},n(Img2x,{className:"beatmapset-panel__image",onError:this.hideImage,src:a.covers.card}),e({className:"beatmapset-panel__image-overlay"}),e({className:"beatmapset-panel__status-container"},a.video||a.storyboard?e({className:"beatmapset-panel__video-icon"},i({className:"fas fa-film fa-fw"})):void 0,e({className:"beatmapset-status"},a.status)),e({className:"beatmapset-panel__title-artist-box"},e({className:"u-ellipsis-overflow beatmapset-panel__header-text beatmapset-panel__header-text--title"},a.title),e({className:"beatmapset-panel__header-text"},a.artist)),e({className:"beatmapset-panel__counts-box"},b?e(null,e({className:"beatmapset-panel__count",title:osu.trans("beatmaps.hype.required_text",{current:l,required:v})},s({className:"beatmapset-panel__count-number"},l),i({className:"fas fa-bullhorn fa-fw"})),e({className:"beatmapset-panel__count",title:osu.trans("beatmaps.nominations.required_text",{current:c,required:y})},s({className:"beatmapset-panel__count-number"},c),i({className:"fas fa-thumbs-up fa-fw"}))):e({className:"beatmapset-panel__count",title:osu.trans("beatmaps.panel.playcount",{count:f})},s({className:"beatmapset-panel__count-number"},f),i({className:"fas fa-fw fa-play-circle"})),e({className:"beatmapset-panel__count",title:osu.trans("beatmaps.panel.favourites",{count:p})},s({className:"beatmapset-panel__count-number"},p),i({className:"fas fa-fw fa-heart"}))),e({className:"beatmapset-panel__preview-bar",style:{transitionDuration:this.state.previewDuration+"s",width:""+("playing"===this.state.preview?"100%":0)}})),e({className:"beatmapset-panel__content"},e({className:"beatmapset-panel__row"},e({className:"beatmapset-panel__mapper-source-box"},e({className:"u-ellipsis-overflow",dangerouslySetInnerHTML:{__html:osu.trans("beatmapsets.show.details.mapped_by",{mapper:laroute.link_to_route("users.show",a.creator,{user:a.user_id},{class:"js-usercard","data-user-id":a.user_id})})}}),e({className:"u-ellipsis-overflow"},"graveyard"===(g=a.status)||"wip"===g||"pending"===g?s({dangerouslySetInnerHTML:{__html:osu.trans("beatmapsets.show.details.updated_timeago",{timeago:osu.timeago(a.last_updated)})}}):a.source)),e({className:"beatmapset-panel__icons-box"},("undefined"!=typeof currentUser&&null!==currentUser?currentUser.id:void 0)?t({href:laroute.route("beatmapsets.download",{beatmapset:a.id}),title:osu.trans("beatmapsets.show.details.download._"),className:"beatmapset-panel__icon js-beatmapset-download-link","data-turbolinks":"false"},i({className:"fas fa-download"})):void 0)),e({className:"beatmapset-panel__difficulties"},h))),t({href:"#",className:"beatmapset-panel__play js-audio--play","data-audio-url":a.preview_url},i({className:"fas fa-"+("ended"===this.state.preview?"play":"stop")})),e({className:"beatmapset-panel__shadow"}))},u.prototype.previewInitializing=function(t,e){var n;return n=e.url,e.player,n!==this.props.beatmap.preview_url?this.previewStop():this.setState({preview:"initializing",previewDuration:0})},u.prototype.previewStart=function(t,e){var n,i;return i=e.url,n=e.player,i!==this.props.beatmap.preview_url?this.previewStop():this.setState({preview:"playing",previewDuration:n.duration})},u.prototype.previewStop=function(){if("ended"!==this.state.preview)return this.setState({preview:"ended",previewDuration:0})},u}()}).call(window)},qrrn:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.default=function(t,e){var n=t.items,i=t.itemHeight,s=e.firstItemIndex,o=e.lastItemIndex;return{virtual:{items:o>-1?n.slice(s,o+1):[],style:{height:n.length*i,paddingTop:s*i,boxSizing:"border-box"}}}}},rEDz:function(t,e){(function(){$(document).on("ajax:success",".js-forum-poll-edit",function(t,e,n,i){var s;return $(t.target).trigger("ajax:complete",[i,n]),(s=$(".js-forum-poll")).attr("data-original-poll",s.html()).html(e),osu.pageChange()}),$(document).on("click",".js-forum-poll-edit-cancel",function(){var t;return(t=$(".js-forum-poll")).html(t.attr("data-original-poll")).attr("data-original-poll",null),osu.pageChange()}),$(document).on("ajax:success",".js-forum-poll-edit-save",function(t,e,n,i){return $(t.target).trigger("ajax:complete",[i,n]),$(".js-forum-poll").html($(e).html()).attr("data-original-poll",null),osu.pageChange()}),$(document).on("ajax:success",".edit-post-link",function(t,e,n,i){var s;return $(t.target).trigger("ajax:complete",[i,n]),(s=$(t.target).parents(".js-forum-post")).attr("data-original-post",s.html()).html(e).find("[name=body]").focus(),osu.pageChange()}),$(document).on("click",".js-edit-post-cancel",function(t){var e;return t.preventDefault(),(e=$(t.target).parents(".js-forum-post")).html(e.attr("data-original-post")).attr("data-original-post",null),osu.pageChange()}),$(document).on("ajax:success",".js-forum-post-edit",function(t,e,n,i){return $(t.target).trigger("ajax:complete",[i,n]).parents(".js-forum-post").replaceWith(e),osu.pageChange()})}).call(window)},rIpw:function(t,e){(function(){var t,e,n,i,s,o=function(t,e){return function(){return t.apply(e,arguments)}},r={}.hasOwnProperty;n=React.createElement,s=ReactDOMFactories.span,i=ReactDOMFactories.i,t=ReactDOMFactories.a,e="click-to-copy",this.ClickToCopy=function(a){function u(){return this.render=o(this.render,this),this.click=o(this.click,this),this.restoreTooltipText=o(this.restoreTooltipText,this),this.componentWillUnmount=o(this.componentWillUnmount,this),u.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,React.PureComponent),u.prototype.componentWillUnmount=function(){return this.restoreTooltipText()},u.prototype.restoreTooltipText=function(){return this.title&&this.api.set("content.text",this.title),Timeout.clear(this.timer),this.timer=null},u.prototype.click=function(t){return t.preventDefault(),n=t.currentTarget,null==this.api&&(this.api=$(n).qtip("api")),clipboard.writeText(this.props.value),this.api.set("content.text",osu.trans("common.buttons.click_to_copy_copied")),Timeout.clear(this.timer),this.timer=Timeout.set(1e3,this.restoreTooltipText),null!=this.title?this.title:this.title=n.getAttribute("title")||n.dataset.origTitle},u.prototype.render=function(){var n,o;return this.props.value?t({className:osu.classWithModifiers(e,null!=(n=this.props.modifiers)?n:[]),"data-tooltip-pin-position":!0,"data-tooltip-position":"bottom center",href:"#",onClick:this.click,title:osu.trans("common.buttons.click_to_copy")},null!=(o=this.props.label)?o:this.props.value,i({className:"fas fa-paste "+e+"__icon"})):s()},u}()}).call(window)},rf6O:function(t,e){t.exports=PropTypes},s7MB:function(t,e){(function(){this.Fade=function(){function t(){}return t.isVisible=function(t){return"hidden"!==(null!=t?t.getAttribute("data-visibility"):void 0)},t.out=function(t){return null!=t?t.setAttribute("data-visibility","hidden"):void 0},t.in=function(t){return null!=t?t.setAttribute("data-visibility","visible"):void 0},t.toggle=function(e,n){if(null!=e)return null==n&&(n=!t.isVisible(e)),n?t.in(e):t.out(e)},t}()}).call(window)},sWOL:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FormConfirmation=function(){function e(e){this.formError=e,this.onInput=t(this.onInput,this),this.boot=t(this.boot,this),$(document).on("input",".js-form-confirmation",this.onInput)}return e.prototype.boot=function(t){var e,n,i;if(null==t.formConfirmation)return n={},_.endsWith(t.name,"_confirmation")||_.endsWith(t.name,"_confirmation]")?(i=t.name.replace(/_confirmation(]?)$/,"$1"),n.confirmation=t,n.main=$(t).closest("form").find("[name='"+i+"']")[0]):(e=t.name.replace(/(]?)$/,"_confirmation$1"),n.main=t,n.confirmation=$(t).closest("form").find("[name='"+e+"']")[0]),n.main.formConfirmation=n,n.confirmation.formConfirmation=n},e.prototype.onInput=function(t){var e,n,i,s;return e=t.currentTarget,this.boot(e),s=(n=e.formConfirmation).main.value,i=n.confirmation.value,0===s.length||0===i.length?this.formError.setOneError(n.confirmation,[]):s===i?this.formError.setOneError(n.confirmation,[]):this.formError.setOneError(n.confirmation,[osu.trans("model_validation.wrong_confirmation")])},e}()}).call(window)},snad:function(t,e){(function(){$(document).on("click",'a[href^="#"]',function(t){var e,n,i;if(e=t.currentTarget.href,""!==(i=decodeURIComponent(e.slice(e.indexOf("#")+1)))&&null!=(n=document.getElementById(i)))return t.preventDefault(),location.href!==e&&Turbolinks.controller.advanceHistory(e),n.scrollIntoView()}),Turbolinks.HttpRequest.prototype.requestLoaded=function(){return this.endRequest((t=this,function(){var e,n;return 200<=(e=t.xhr.status)&&e<300||403===(n=t.xhr.status)||404===n||500===n?t.delegate.requestCompletedWithResponse(t.xhr.responseText,t.xhr.getResponseHeader("Turbolinks-Location")):(t.failed=!0,t.delegate.requestFailedWithStatusCode(t.xhr.status,t.xhr.responseText))}));var t},Turbolinks.Controller.prototype.advanceHistory=function(t){if(t!==document.location.href)return this.cacheSnapshot(),this.lastRenderedLocation=Turbolinks.Location.wrap(t),this.pushHistoryWithLocationAndRestorationIdentifier(t,Turbolinks.uuid())},Turbolinks.Snapshot.prototype.hasAnchor=function(){return!0},Turbolinks.Controller.prototype.locationIsVisitable=function(t){return t.isPrefixedBy(this.view.getRootLocation())&&Url.isInternal(t)&&Url.isHTML(t)}}).call(window)},stCr:function(t,e){(function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty;t=ReactDOMFactories.button,e=ReactDOMFactories.div,this.CommentsSort=function(s){function o(){return this.setSort=n(this.setSort,this),this.renderButton=n(this.renderButton,this),this.render=n(this.render,this),o.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function s(){this.constructor=t}s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype}(o,React.PureComponent),o.prototype.render=function(){return e({className:osu.classWithModifiers("sort",this.props.modifiers)},e({className:"sort__items"},e({className:"sort__item sort__item--title"},osu.trans("sort._")),this.renderButton("new"),this.renderButton("old"),this.renderButton("top")))},o.prototype.renderButton=function(e){var n,i;return n="sort__item sort__item--button",e===(null!=(i=this.props.loadingSort)?i:this.props.currentSort)&&(n+=" sort__item--active"),t({className:n,"data-sort":e,onClick:this.setSort},osu.trans("sort."+e))},o.prototype.setSort=function(t){return $.publish("comments:sort",{sort:t.target.dataset.sort})},o}()}).call(window)},"t+h0":function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.FormToggle=function(){function e(){this.sync=t(this.sync,this),this.onChange=t(this.onChange,this),addEventListener("turbolinks:load",this.sync),$(document).on("change",".js-form-toggle--input",this.onChange)}return e.prototype.onChange=function(t){return this.toggle(t.currentTarget)},e.prototype.sync=function(){var t,e,n,i,s;for(s=[],t=0,i=(n=document.getElementsByClassName("js-form-toggle--input")).length;t<i;t++)e=n[t],s.push(this.toggle(e));return s},e.prototype.toggle=function(t){var e,n;return n=t.dataset.formToggleId,e=t.checked?"Down":"Up",$(".js-form-toggle--form[data-form-toggle-id='"+n+"']").stop()["slide"+e]()},e}()}).call(window)},tTWz:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.GlobalDrag=function(){function e(){this.dragend=t(this.dragend,this),this.dragenter=t(this.dragenter,this),$(document).on("dragenter",this.dragenter),$(document).on("dragover",this.dragend)}return e.prototype.dragenter=function(){if(!this.dragging)return this.dragging=!0,$.publish("dragenterGlobal")},e.prototype.dragend=function(t){var e,n;if(this.dragging)return n=this,e=function(){return n.dragging=!1,$.publish("dragendGlobal")},Timeout.clear(this.dragendTimer),this.dragendTimer=Timeout.set(100,e)},e}()}).call(window)},ulBq:function(t,e){(function(){this.Url=function(){var t;function e(){}return t=["admin","api/v2","beatmaps","beatmapsets","comments","community","help","home","legal","oauth","rankings","session","store","users"].join("|"),e.beatmapDownloadDirect=function(t){return"osu://dl/"+t},e.changelogBuild=function(t){return laroute.route("changelog.build",{stream:t.update_stream.name,build:t.version})},e.openBeatmapEditor=function(t){return"osu://edit/"+t},e.isHTML=function(t){return t.isHTML()||_.startsWith(t.getPath(),"/home/changelog/")},e.isInternal=function(e){return RegExp("^/(?:"+t+")(?:$|/|#)").test(e.getPath())},e}()}).call(window)},upGs:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.Scale=function(){function e(){this.resizeAll=t(this.resizeAll,this),this.resize=t(this.resize,this),this.readParentSize=t(this.readParentSize,this),this.els=document.getElementsByClassName("js-scale"),$(document).on("turbolinks:load",this.resizeAll),$(window).on("throttled-resize",this.resizeAll)}return e.prototype.readParentSize=function(t){return t.parentSize=t.parentElement.getBoundingClientRect()},e.prototype.resize=function(t){var e,n,i;switch(n=t.parentSize,t.dataset.scale){case"ws":n.width/n.height>16/9?e=9/16*(i=n.width):i=16/9*(e=n.height)}if(null!=e&&null!=i)return t.style.height=e+"px",t.style.width=i+"px"},e.prototype.resizeAll=function(){var t,e,n,i,s,o,r,a;for(e=0,i=(o=this.els).length;e<i;e++)t=o[e],this.readParentSize(t);for(a=[],n=0,s=(r=this.els).length;n<s;n++)t=r[n],a.push(this.resize(t));return a},e}()}).call(window)},vqYE:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.AccountEditBlocklist=function(){function e(){this.toggle=t(this.toggle,this),this.updateBlockCount=t(this.updateBlockCount,this),$(document).on("click",this.jsClass,this.toggle),$.subscribe("user:update",this.updateBlockCount)}return e.prototype.element="user-list__content",e.prototype.jsClass=".js-account-edit-blocklist",e.prototype.updateBlockCount=function(){if(null!=currentUser.id)return $(this.jsClass+"-count").text(osu.trans("users.blocks.blocked_count",{count:currentUser.blocks.length}))},e.prototype.toggle=function(t){var e;return t.preventDefault(),$("."+this.element).toggleClass("hidden"),e=$("."+this.element).hasClass("hidden")?osu.trans("common.buttons.show"):osu.trans("common.buttons.hide"),$(this.jsClass).text(e)},e}()}).call(window)},w9NC:function(t,e){(function(){var t,e=function(t,e){return function(){return t.apply(e,arguments)}},n={}.hasOwnProperty,i=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};t=React.createElement,this.CommentsManager=function(s){function o(t){var n,i,s,r,a;this.updateSort=e(this.updateSort,this),this.saveState=e(this.saveState,this),this.jsonStorageId=e(this.jsonStorageId,this),this.removeVote=e(this.removeVote,this),this.addVote=e(this.addVote,this),this.mergeCollection=e(this.mergeCollection,this),this.update=e(this.update,this),this.appendBundle=e(this.appendBundle,this),this.render=e(this.render,this),this.componentWillUnmount=e(this.componentWillUnmount,this),this.componentDidMount=e(this.componentDidMount,this),o.__super__.constructor.call(this,t),this.id="comments-"+osu.uuid(),this.state=osu.parseJson(this.jsonStorageId()),null==this.state&&(n=null!=(i=osu.jsonClone(this.props.commentBundle))?i:osu.parseJson("json-comments-"+this.props.commentableType+"-"+this.props.commentableId),this.state={comments:null!=(s=n.comments)?s:[],userVotes:n.user_votes,users:null!=(r=n.users)?r:[],topLevelCount:n.top_level_count,total:n.total,commentableMeta:null!=(a=n.commentable_meta)?a:[],loadingSort:null,currentSort:"new",moreComments:{}})}return function(t,e){for(var i in e)n.call(e,i)&&(t[i]=e[i]);function s(){this.constructor=t}s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype}(o,React.PureComponent),o.prototype.SORTS=["new","old","top"],o.prototype.componentDidMount=function(){return $.subscribe("comments:added."+this.id,this.appendBundle),$.subscribe("comments:sort."+this.id,this.updateSort),$.subscribe("comment:updated."+this.id,this.update),$.subscribe("commentVote:added."+this.id,this.addVote),$.subscribe("commentVote:removed."+this.id,this.removeVote),$(document).on("turbolinks:before-cache."+this.id,this.saveState)},o.prototype.componentWillUnmount=function(){return $.unsubscribe("."+this.id)},o.prototype.render=function(){var e,n,i;return(e=_.assign({},this.props.componentProps,this.state)).commentableId=this.props.commentableId,e.commentableType=this.props.commentableType,e.userVotesByCommentId=_.keyBy(this.state.userVotes),e.usersById=_.keyBy(null!=(n=this.state.users)?n:[],"id"),e.commentableMetaById=_(null!=(i=this.state.commentableMeta)?i:[]).filter(function(t){return null!=t}).keyBy(function(t){var e,n;return(null!=(e=t.type)?e:"")+"-"+(null!=(n=t.id)?n:"")}).value(),t(this.props.component,e)},o.prototype.appendBundle=function(t,e){var n,i,s,o;return n=e.commentBundle,s=e.prepend,(i=osu.jsonClone(this.state.moreComments))[n.has_more_id]=n.has_more,this.setState({comments:this.mergeCollection(this.state.comments,n.comments,s),users:this.mergeCollection(this.state.users,n.users),commentableMeta:_.concat(this.state.commentableMeta,n.commentable_meta),moreComments:i,total:null!=(o=n.total)?o:this.state.total})},o.prototype.update=function(t,e){var n;return n=e.comment,this.setState({comments:this.mergeCollection(this.state.comments,[n]),users:this.mergeCollection(this.state.users,[n.user,n.editor]),commentableMeta:_.concat(this.state.commentableMeta,n.commentable_meta)})},o.prototype.mergeCollection=function(t,e,n){var i,s,o,r,a,u;for(u=osu.jsonClone(t),null==n&&(n=!1),r=n?"unshift":"push",s=0,o=e.length;s<o;s++)null!=(i=e[s])&&(-1===(a=_.findIndex(u,function(t){return t.id===i.id}))?u[r](i):u[a]=i);return u},o.prototype.addVote=function(t,e){var n;return n=e.id,this.setState({userVotes:_.concat(this.state.userVotes,n)})},o.prototype.removeVote=function(t,e){var n;return n=e.id,this.setState({userVotes:_.filter(this.state.userVotes,function(t){return t!==n})})},o.prototype.jsonStorageId=function(){return"json-comments-manager-state-"+this.props.commentableType+"-"+this.props.commentableId},o.prototype.saveState=function(){return osu.storeJson(this.jsonStorageId(),this.state)},o.prototype.updateSort=function(t,e){var n,s,o;if((s=e.sort,this.props.commentableType&&this.props.commentableId)&&!(i.call(this.SORTS,s)<0))return this.setState({loadingSort:s}),n={commentable_type:this.props.commentableType,commentable_id:this.props.commentableId,sort:s,parent_id:0},$.ajax(laroute.route("comments.index"),{data:n,dataType:"json"}).done((o=this,function(t){var e,n,i,r,a;return o.setState({comments:null!=(e=t.comments)?e:[],users:null!=(n=t.users)?n:[],commentableMeta:null!=(i=t.commentable_meta)?i:[],userVotes:null!=(r=t.user_votes)?r:[],topLevelCount:t.top_level_count,total:null!=(a=t.total)?a:o.state.total,currentSort:s,moreComments:{}})})).always(function(t){return function(){return t.setState({loadingSort:null})}}(this))},o}()}).call(window)},wuZa:function(t,e){(function(){var t=function(t,e){return function(){return t.apply(e,arguments)}};this.CurrentUserObserver=function(){function e(){this.setData=t(this.setData,this),this.setCovers=t(this.setCovers,this),this.setAvatars=t(this.setAvatars,this),this.reinit=t(this.reinit,this),this.covers=document.getElementsByClassName("js-current-user-cover"),this.avatars=document.getElementsByClassName("js-current-user-avatar"),$.subscribe("user:update",this.setData),$(document).on("turbolinks:load",this.reinit),$.subscribe("osu:page:change",this.reinit)}return e.prototype.reinit=function(){return this.setAvatars(),this.setCovers()},e.prototype.setAvatars=function(t){var e,n,i,s,o;for(null==t&&(t=this.avatars),null!=currentUser.id&&(e=osu.urlPresence(currentUser.avatar_url)),o=[],i=0,s=t.length;i<s;i++)n=t[i],o.push(n.style.backgroundImage=e);return o},e.prototype.setCovers=function(t){var e,n,i,s,o;for(null==t&&(t=this.covers),null!=currentUser.id&&(e=osu.urlPresence(currentUser.cover_url)),o=[],i=0,s=t.length;i<s;i++)n=t[i],o.push(n.style.backgroundImage=e);return o},e.prototype.setData=function(t,e){return window.currentUser=e,this.reinit()},e}()}).call(window)},xHv7:function(t,e){(function(){this.FormClear=function(){function t(){$(document).on("ajax:success",".js-form-clear",this.clear)}return t.prototype.clear=function(t){return t.currentTarget.reset()},t}()}).call(window)},"y/Gi":function(t,e){(function(){var t,e,n,i,s,o,r={}.hasOwnProperty;t=ReactDOMFactories.a,n=ReactDOMFactories.i,i=ReactDOMFactories.span,o=ReactDOMFactories.tr,s=ReactDOMFactories.td,e=React.createElement,this.TracklistTrack=function(a){function u(){return u.__super__.constructor.apply(this,arguments)}return function(t,e){for(var n in e)r.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype}(u,React.Component),u.prototype.render=function(){return o({className:"tracklist__row"+(this.props.track.selected?" tracklist__row--selected":"")},s({},e(TrackPreview,{track:this.props.track})),s({className:"tracklist__title"+(this.props.track.exclusive?" tracklist__title--exclusive":"")},this.props.track.exclusive?n({className:"fal fa-fw fa-extra-osu tracklist__exclusive-icon",title:osu.trans("artist.songs.exclusive")}):void 0,i({className:"tracklist__name u-ellipsis-overflow"},this.props.track.title+" ",i({className:"tracklist__version"},this.props.track.version))),s({className:"tracklist__length"},this.props.track.length),s({className:"tracklist__bpm"},this.props.track.bpm+"bpm"),s({className:"tracklist__genre u-ellipsis-overflow"},this.props.track.genre),s({className:"tracklist__dl"},this.props.track.osz?t({className:"tracklist__link",href:this.props.track.osz,title:osu.trans("artist.beatmaps.download")},n({className:"fas fa-fw fa-download"})):i({className:"tracklist__link--disabled",title:osu.trans("artist.beatmaps.download-na")},n({className:"fas fa-fw fa-download"}))))},u}()}).call(window)},y0Iw:function(t,e){(function(){this.BeatmapDiscussionHelper=function(){function t(){}return t.DEFAULT_BEATMAP_ID="-",t.DEFAULT_MODE="timeline",t.DEFAULT_FILTER="total",t.MAX_MESSAGE_PREVIEW_LENGTH=100,t.MAX_LENGTH_TIMELINE=750,t.MODES=["events","general","generalAll","timeline"],t.FILTERS=["deleted","hype","mapperNotes","mine","pending","praises","resolved","total"],t.discussionLinkify=function(e){var n,i;return i=new URL(window.location),n=t.urlParse(i.href),e.replace(osu.urlRegex,function(e){var s,o,r,a;return(a=new URL(e)).host===i.host&&null!=(null!=(r=t.urlParse(a.href,null,{forceDiscussionId:!0}))?r.discussionId:void 0)&&(null!=n&&n.beatmapsetId===r.beatmapsetId?(o="#"+r.discussionId,s='class="js-beatmap-discussion--jump"'):o=r.beatmapsetId+"#"+r.discussionId),"<a href='"+e+"' rel='nofollow' "+(null!=s?s:"")+">"+(null!=o?o:e)+"</a>"})},t.discussionMode=function(t){return null!=t.beatmap_id?null!=t.timestamp?"timeline":"general":"generalAll"},t.format=function(e,n){var i,s,o,r,a,u,l;for(null==n&&(n={}),s="beatmapset-discussion-message",e=(e=_.escape(e)).trim(),e=t.discussionLinkify(e),e=t.linkTimestamp(e,[s+"__timestamp"]),(null==(a=n.newlines)||a)&&(e=e.split("\n").map(function(t){return t.trim()}).join("<br>").replace(/(?:<br>){2,}/g,"<br><br>")),i=s,o=0,r=(l=null!=(u=n.modifiers)?u:[]).length;o<r;o++)i+=" "+s+"--"+l[o];return"<div class='"+i+"'>"+e+"</div>"},t.formatTimestamp=function(t){var e,n,i;if(null!=t)return n=t%1e3,i=Math.floor(t/1e3)%60,e=Math.floor(t/1e3/60),_.padStart(e,2,0)+":"+_.padStart(i,2,0)+"."+_.padStart(n,3,0)},t.linkTimestamp=function(t,e){return null==e&&(e=[]),t.replace(/\b((\d{2}):(\d{2})[:.](\d{3})( \([\d,|]+\)|\b))/g,function(t,n,i,s,o,r){return osu.link(Url.openBeatmapEditor(i+":"+s+":"+o+(null!=r?r:"")),n,{classNames:e})})},t.messageType={icon:{hype:"fas fa-bullhorn",mapperNote:"far fa-sticky-note",praise:"fas fa-heart",problem:"fas fa-exclamation-circle",suggestion:"far fa-circle"},iconText:{mapperNote:["far","&#xf249;"],praise:["fas","&#xf004;"],problem:["fas","&#xf06a;"],resolved:["far","&#xf058;"],suggestion:["far","&#xf111;"]}},t.moderationGroup=function(t){return _.intersection(_.concat(t.default_group,t.groups),["qat","bng"])[0]},t.previewMessage=function(e){return e.length>t.MAX_MESSAGE_PREVIEW_LENGTH?_.chain(e).truncate({length:t.MAX_MESSAGE_PREVIEW_LENGTH}).escape().value():t.format(e,{newlines:!1})},t.stateFromDiscussion=function(e){var n;return null==e?{}:{discussionId:e.id,beatmapsetId:e.beatmapset_id,beatmapId:null!=(n=e.beatmap_id)?n:t.DEFAULT_BEATMAP_ID,mode:t.discussionMode(e)}},t.url=function(e,n){var i,s,o,r,a,u,l,c,h,p,d,m,f,g;return null==e&&(e={}),null==n&&(n=!1),o=(d=n?_.assign(t.urlParse(),e):e).beatmapsetId,s=d.beatmapId,i=d.beatmap,h=d.mode,c=d.filter,a=d.discussionId,l=d.discussions,r=d.discussion,g=d.user,p={},null!=i&&(o=i.beatmapset_id,s=i.id),p.beatmapset=o,p.mode=null!=h?h:t.DEFAULT_MODE,p.beatmap=null==s||"events"===(m=p.mode)||"generalAll"===m?t.DEFAULT_BEATMAP_ID:s,null!=c&&c!==t.DEFAULT_FILTER&&"events"!==p.mode&&(p.filter=c),null!=r&&(a=r.id),null!=a&&(null==r&&null!=l&&(r=_.find(l,{id:a})),null!=r&&(null!=r&&(u=t.stateFromDiscussion(r)),p.beatmapset=u.beatmapsetId,p.beatmap=u.beatmapId,p.mode=u.mode)),(f=new URL(document.location)).pathname=laroute.route("beatmapsets.discussion",p),f.hash=null!=a?f.hash="/"+a:"",null!=g?f.searchParams.set("user",g):f.searchParams.delete("user"),f.toString()},t.urlParse=function(e,n,i){var s,o,r,a,u,l,c,h,p,d,m;if(null==i&&(i={}),null==i.forceDiscussionId&&(i.forceDiscussionId=!1),(p=(m=new URL(null!=e?e:document.location.href)).pathname.split(/\/+/))[0],c=p[1],o=p[2],h=p[3],s=p[4],l=p[5],u=p[6],"beatmapsets"===c&&"discussion"===h)return o=parseInt(o,10),s=parseInt(s,10),d={beatmapsetId:isFinite(o)?o:void 0,beatmapId:isFinite(s)?s:void 0,mode:_.includes(t.MODES,l)?l:t.DEFAULT_MODE,filter:_.includes(t.FILTERS,u)?u:t.DEFAULT_FILTER,user:null!=m.searchParams.get("user")?parseInt(m.searchParams.get("user"),10):void 0},"/"===m.hash[1]&&(a=parseInt(m.hash.slice(2),10),isFinite(a)&&(null!=n?(r=_.find(n,{id:a}),_.assign(d,t.stateFromDiscussion(r))):i.forceDiscussionId&&(d.discussionId=a))),d},t.validMessageLength=function(e,n){return(null!=e?e.length:void 0)>0&&(!n||e.length<=t.MAX_LENGTH_TIMELINE)},t}()}).call(window)},"yP+D":function(t,e){(function(){var t={}.hasOwnProperty;this.osu={isIos:/iPad|iPhone|iPod/.test(navigator.platform),urlRegex:/(https?:\/\/(?:(?:[a-z0-9]\.|[a-z0-9][a-z0-9-]*[a-z0-9]\.)*[a-z][a-z0-9-]*[a-z0-9](?::\d+)?)(?:(?:(?:\/+(?:[a-z0-9$_\.\+!\*',;:@&=-]|%[0-9a-f]{2})*)*(?:\?(?:[a-z0-9$_\.\+!\*',;:@&=-]|%[0-9a-f]{2})*)?)?(?:#(?:[a-z0-9$_\.\+!\*',;:@&=\/?-]|%[0-9a-f]{2})*)?)?)/gi,bottomPage:function(){return 0===osu.bottomPageDistance()},bottomPageDistance:function(){var t,e,n;return(t=null!=(e=null!=(n=document.documentElement)?n:document.body.parent)?e:document.body).scrollHeight-t.scrollTop-t.clientHeight},classWithModifiers:function(t,e){var n,i,s,o;if(o=t,null!=e)for(n=0,i=e.length;n<i;n++)null!=(s=e[n])&&(o+=" "+t+"--"+s);return o},currentUserIsFriendsWith:function(t){return _.find(currentUser.friends,{target_id:t})},executeAction:function(t){if(null!=t)return"1"===t.dataset.isFileupload?$(t).trigger("fileuploadRetry"):t.submit?$(t).submit():t.click?t.click():void 0;osu.reloadPage()},setHash:function(t){var e;if(e=location.href.replace(/#.*/,""),(e+=t)!==location.href)return history.replaceState(history.state,null,e)},ajaxError:function(t){return osu.popup(osu.xhrErrorMessage(t),"danger")},emitAjaxError:function(t){return null==t&&(t=document.body),function(e,n,i){return $(t).trigger("ajax:error",[e,n,i])}},fileuploadFailCallback:function(t){return function(e,n){var i,s;return null==(s=(i=t())[0].dataset).isFileupload&&(s.isFileupload="1"),i.off("fileuploadRetry").one("fileuploadRetry",function(){return n.submit()}),osu.emitAjaxError(i[0])(n.jqXHR)}},pageChange:function(){return Timeout.set(0,osu.pageChangeImmediate)},pageChangeImmediate:function(){return $(document).trigger("osu:page:change")},parseJson:function(t){var e,n;return JSON.parse(null!=(e=null!=(n=document.getElementById(t))?n.text:void 0)?e:null)},storeJson:function(t,e){var n,i;return i=JSON.stringify(e),null==(n=document.getElementById(t))&&((n=document.createElement("script")).id=t,n.type="application/json",document.body.appendChild(n)),n.text=i},jsonClone:function(t){return JSON.parse(JSON.stringify(null!=t?t:null))},isInputElement:function(t){var e;return"INPUT"===(e=t.tagName)||"SELECT"===e||"TEXTAREA"===e||t.isContentEditable},isClickable:function(t){var e;return!(!osu.isInputElement(t)&&"A"!==(e=t.tagName)&&"BUTTON"!==e)||!!t.parentNode&&osu.isClickable(t.parentNode)},isDesktop:function(){return window.matchMedia("(min-width: 900px)").matches},isMobile:function(){return!osu.isDesktop()},focus:function(t){var e;return t=$(t)[0],osu.isIos?(e=t.style.fontSize,t.style.fontSize="16px",t.focus(),t.style.fontSize=e):t.focus()},src2x:function(t){return{src:t,srcSet:t+" 1x, "+(null!=t?t.replace(/(\.[^.]+)$/,"@2x$1"):void 0)+" 2x"}},link:function(t,e,n){var i;return null==n&&(n={}),(i=document.createElement("a")).setAttribute("href",t),n.isRemote&&i.setAttribute("data-remote",!0),n.classNames&&(i.className=n.classNames.join(" ")),i.textContent=e,n.props&&_.each(n.props,function(t,e){return i.setAttribute(e,t)}),i.outerHTML},linkify:function(t){return t.replace(osu.urlRegex,'<a href="$1" rel="nofollow">$1</a>')},timeago:function(t){var e;return(e=document.createElement("time")).classList.add("timeago"),e.setAttribute("datetime",t),e.textContent=t,e.outerHTML},formatBytes:function(t,e){var n,i;return null==e&&(e=2),i=["B","KB","MB","GB","TB","PB","EB","ZB","YB"],1e3,t<1e3?t+" B":(n=Math.floor(Math.log(t)/Math.log(1e3)),osu.formatNumber(t/Math.pow(1e3,n),e)+" "+i[n])},formatNumber:function(t,e,n,i){return null==t?null:(null==n&&(n={}),null!=e&&(n.minimumFractionDigits=e,n.maximumFractionDigits=e),t.toLocaleString(null!=i?i:currentLocale,n))},formatNumberSuffixed:function(t,e,n){var i,s,o;return null==n&&(n={}),o=["","k","m","b","t"],1e3,i=function(t){return null==n&&(n={}),null!=e&&(n.minimumFractionDigits=e,n.maximumFractionDigits=e),t.toLocaleString("en",n)},t<1e3?""+i(t):(s=Math.min(o.length-1,Math.floor(Math.log(t)/Math.log(1e3))),""+i(t/Math.pow(1e3,s))+o[s])},reloadPage:function(t){var e;return null==t&&(t=!0),$(document).off(".ujsHideLoadingOverlay"),Turbolinks.clearCache(),e=_.isEmpty(window.reloadUrl)?location.href:window.reloadUrl,window.reloadUrl=null,osu.navigate(e,t,{action:"replace"})},urlPresence:function(t){if(null!=osu.presence(t))return"url("+t+")"},navigate:function(t,e,n){var i,s;return i=null!=(s=(null!=n?n:{}).action)?s:"advance",e&&osu.keepScrollOnLoad(),Turbolinks.visit(t,{action:i})},keepScrollOnLoad:function(){var t;return t=[window.pageXOffset,window.pageYOffset],$(document).one("turbolinks:load",function(){return window.scrollTo(t[0],t[1])})},popup:function(t,e){var n,i,s,o;return null==e&&(e="info"),i=$("#popup-container"),o=function(){return n.click()},(n=$(".popup-clone").clone()).addClass("alert-"+e+" popup-active").removeClass("popup-clone"),n.find(".popup-text").html(t),"warning"===e||"danger"===e?$("#overlay").off("click.close-alert").one("click.close-alert",o).fadeIn():Timeout.set(5e3,o),"function"==typeof(s=document.activeElement).blur&&s.blur(),n.appendTo(i).fadeIn()},popupShowing:function(){return $("#overlay").is(":visible")},presence:function(t){return osu.present(t)?t:null},present:function(t){return null!=t&&""!==t},promisify:function(t){return new Promise(function(e,n){return t.done(e).fail(n)})},trans:function(t,e,n){return null==e&&(e={}),osu.transExists(t,n)||(n=fallbackLocale),Lang.get(t,e,n)},transArray:function(t,e){switch(null==e&&(e="common.array_and"),t.length){case 0:return"";case 1:return""+t[0];case 2:return t.join(osu.trans(e+".two_words_connector"));default:return""+t.slice(0,-1).join(osu.trans(e+".words_connector"))+osu.trans(e+".last_word_connector")+_.last(t)}},transChoice:function(t,e,n,i){var s,o;return null==n&&(n={}),osu.transExists(t,i)||(i=fallbackLocale,s=Lang.getLocale(),Lang.setLocale(i)),null==n.count_delimited&&(n.count_delimited=osu.formatNumber(e,null,null,i)),o=Lang.choice(t,e,n,i),null!=s&&Lang.setLocale(s),o},transExists:function(t,e){var n;return n=Lang.get(t,null,e),osu.present(n)&&n!==t},uuid:function(){return Turbolinks.uuid()},updateQueryString:function(e,n){var i,s,o;for(i in s=new URL(null!=e?e:window.location.href,document.location.origin),n)t.call(n,i)&&(o=n[i],s.searchParams.set(i,o));return s.href},xhrErrorMessage:function(e){var n,i,s,o,r,a,u,l;if(null!=(l=null!=e&&null!=(a=e.responseJSON)?a.validation_error:void 0)){for(n in i=[],l)t.call(l,n)&&(o=l[n],i=i.concat(o));r=i.join(", ")+"."}return null==r&&(r=null!=e&&null!=(u=e.responseJSON)?u.error:void 0),null!=r&&""!==r||(s="errors.codes.http-"+(null!=e?e.status:void 0),(r=osu.trans(s))===s&&(r=osu.trans("errors.unknown"))),r}}}).call(window)},zaxE:function(t,e){(function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},i={}.hasOwnProperty;e=ReactDOMFactories.div,React.createElement,t="countdown-timer",this.CountdownTimer=function(s){function o(t){var e;this.render=n(this.render,this),this.updateTimer=n(this.updateTimer,this),o.__super__.constructor.call(this,t),e=moment(this.props.deadline),this.state={deadline:e,diff:Math.max(e.diff(),0)}}return function(t,e){for(var n in e)i.call(e,n)&&(t[n]=e[n]);function s(){this.constructor=t}s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype}(o,React.Component),o.prototype.componentDidMount=function(){return this.timer=setInterval(this.updateTimer,1e3)},o.prototype.componentWillUnmount=function(){return clearInterval(this.timer)},o.prototype.updateTimer=function(){var t;return 0===(t=Math.max(this.state.deadline.diff(),0))&&clearInterval(this.timer),this.setState({diff:t})},o.prototype.render=function(){var n,i,s,o;return n=this.state.diff/1e3,s={days:Math.floor(n/86400),hours:Math.floor(n/3600%24),minutes:Math.floor(n/60%60),seconds:Math.floor(n%60)},e({className:t},e({className:t+"__header"},osu.trans("common.time.remaining")+":"),function(){var n;for(i in n=[],s)o=s[i],n.push(e({key:i,className:t+"__field"},e({className:t+"__digit"},o<10?"0"+o:o),e({className:t+"__label"},osu.trans("common.countdown."+i))));return n}())},o}()}).call(window)},zzf1:function(t,e){}});
//# sourceMappingURL=app.js.map